import{$ as xn,A as ci,Aa as hi,B as Md,Ba as Qo,C as kn,Ca as Jo,D as Fd,Da as di,Ea as Yo,F as Ee,Fa as Xo,G as Be,Ga as nf,H as Nt,Ha as On,I as fr,J as pr,K as Ud,L as Bd,M as qd,N as V,O as F,P as ue,R as Go,S as ct,T as wt,U as $d,V as jd,W as zd,X as q,Z as gs,_ as Gd,a as $o,aa as Dn,b as jo,ba as Nn,c as Ry,ca as Xe,d as xd,da as Wd,e as Rn,ea as Hc,f as b,fa as Kc,g as ms,ga as Hd,h as Dd,ha as Kd,i as Nd,ia as Qd,j as Od,ja as Jd,k as jc,l as zc,la as Wo,m as Gc,ma as Yd,n as Wc,na as Ho,p as Vd,q as zo,ra as Xd,s as ii,t as Ld,ta as Zd,u as at,ua as ef,v as Ye,va as Ko,wa as ui,x as si,xa as tf,y as oi,z as ai,za as li}from"./chunk-RNHN6RD7.js";var vd=Ry((jt,_d)=>{"use strict";(function(n,e){typeof jt=="object"&&typeof _d<"u"?_d.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(jt,function(){"use strict";function n(c,u,f){if(typeof c=="function"?c===u:c.has(u))return arguments.length<3?u:f;throw new TypeError("Private element is not present on this object")}function e(c,u){if(u.has(c))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(c,u){return c.get(n(c,u))}function r(c,u,f){e(c,u),u.set(c,f)}function i(c,u,f){return c.set(n(c,u),f),f}let o=100,a={},h=()=>{a.previousActiveElement instanceof HTMLElement?(a.previousActiveElement.focus(),a.previousActiveElement=null):document.body&&document.body.focus()},p=c=>new Promise(u=>{if(!c)return u();let f=window.scrollX,w=window.scrollY;a.restoreFocusTimeout=setTimeout(()=>{h(),u()},o),window.scrollTo(f,w)}),m="swal2-",y=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((c,u)=>(c[u]=m+u,c),{}),D=["success","warning","info","question","error"].reduce((c,u)=>(c[u]=m+u,c),{}),U="SweetAlert2:",j=c=>c.charAt(0).toUpperCase()+c.slice(1),O=c=>{console.warn(`${U} ${typeof c=="object"?c.join(" "):c}`)},K=c=>{console.error(`${U} ${c}`)},Y=[],Z=c=>{Y.includes(c)||(Y.push(c),O(c))},le=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Z(`"${c}" is deprecated and will be removed in the next major release.${u?` Use "${u}" instead.`:""}`)},be=c=>typeof c=="function"?c():c,se=c=>c&&typeof c.toPromise=="function",C=c=>se(c)?c.toPromise():Promise.resolve(c),v=c=>c&&Promise.resolve(c)===c,I=()=>document.body.querySelector(`.${y.container}`),T=c=>{let u=I();return u?u.querySelector(c):null},A=c=>T(`.${c}`),S=()=>A(y.popup),E=()=>A(y.icon),ht=()=>A(y["icon-content"]),un=()=>A(y.title),Gi=()=>A(y["html-container"]),ln=()=>A(y.image),zt=()=>A(y["progress-steps"]),hn=()=>A(y["validation-message"]),et=()=>T(`.${y.actions} .${y.confirm}`),dn=()=>T(`.${y.actions} .${y.cancel}`),$e=()=>T(`.${y.actions} .${y.deny}`),De=()=>A(y["input-label"]),fn=()=>T(`.${y.loader}`),dt=()=>A(y.actions),io=()=>A(y.footer),Tt=()=>A(y["timer-progress-bar"]),Wi=()=>A(y.close),bc=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,pn=()=>{let c=S();if(!c)return[];let u=c.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),f=Array.from(u).sort((B,X)=>{let ae=parseInt(B.getAttribute("tabindex")||"0"),ye=parseInt(X.getAttribute("tabindex")||"0");return ae>ye?1:ae<ye?-1:0}),w=c.querySelectorAll(bc),R=Array.from(w).filter(B=>B.getAttribute("tabindex")!=="-1");return[...new Set(f.concat(R))].filter(B=>Fe(B))},mn=()=>tt(document.body,y.shown)&&!tt(document.body,y["toast-shown"])&&!tt(document.body,y["no-backdrop"]),gn=()=>{let c=S();return c?tt(c,y.toast):!1},Hi=()=>{let c=S();return c?c.hasAttribute("data-loading"):!1},Me=(c,u)=>{if(c.textContent="",u){let w=new DOMParser().parseFromString(u,"text/html"),R=w.querySelector("head");R&&Array.from(R.childNodes).forEach(X=>{c.appendChild(X)});let B=w.querySelector("body");B&&Array.from(B.childNodes).forEach(X=>{X instanceof HTMLVideoElement||X instanceof HTMLAudioElement?c.appendChild(X.cloneNode(!0)):c.appendChild(X)})}},tt=(c,u)=>{if(!u)return!1;let f=u.split(/\s+/);for(let w=0;w<f.length;w++)if(!c.classList.contains(f[w]))return!1;return!0},so=(c,u)=>{Array.from(c.classList).forEach(f=>{!Object.values(y).includes(f)&&!Object.values(D).includes(f)&&!Object.values(u.showClass||{}).includes(f)&&c.classList.remove(f)})},je=(c,u,f)=>{if(so(c,u),!u.customClass)return;let w=u.customClass[f];if(w){if(typeof w!="string"&&!w.forEach){O(`Invalid type of customClass.${f}! Expected string or iterable object, got "${typeof w}"`);return}ee(c,w)}},Mr=(c,u)=>{if(!u)return null;switch(u){case"select":case"textarea":case"file":return c.querySelector(`.${y.popup} > .${y[u]}`);case"checkbox":return c.querySelector(`.${y.popup} > .${y.checkbox} input`);case"radio":return c.querySelector(`.${y.popup} > .${y.radio} input:checked`)||c.querySelector(`.${y.popup} > .${y.radio} input:first-child`);case"range":return c.querySelector(`.${y.popup} > .${y.range} input`);default:return c.querySelector(`.${y.popup} > .${y.input}`)}},Ki=c=>{if(c.focus(),c.type!=="file"){let u=c.value;c.value="",c.value=u}},Qi=(c,u,f)=>{!c||!u||(typeof u=="string"&&(u=u.split(/\s+/).filter(Boolean)),u.forEach(w=>{Array.isArray(c)?c.forEach(R=>{f?R.classList.add(w):R.classList.remove(w)}):f?c.classList.add(w):c.classList.remove(w)}))},ee=(c,u)=>{Qi(c,u,!0)},nt=(c,u)=>{Qi(c,u,!1)},At=(c,u)=>{let f=Array.from(c.children);for(let w=0;w<f.length;w++){let R=f[w];if(R instanceof HTMLElement&&tt(R,u))return R}},ft=(c,u,f)=>{f===`${parseInt(f)}`&&(f=parseInt(f)),f||parseInt(f)===0?c.style.setProperty(u,typeof f=="number"?`${f}px`:f):c.style.removeProperty(u)},_e=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";c&&(c.style.display=u)},Te=c=>{c&&(c.style.display="none")},Ae=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";c&&new MutationObserver(()=>{St(c,c.innerHTML,u)}).observe(c,{childList:!0,subtree:!0})},Ne=(c,u,f,w)=>{let R=c.querySelector(u);R&&R.style.setProperty(f,w)},St=function(c,u){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";u?_e(c,f):Te(c)},Fe=c=>!!(c&&(c.offsetWidth||c.offsetHeight||c.getClientRects().length)),oo=()=>!Fe(et())&&!Fe($e())&&!Fe(dn()),ao=c=>c.scrollHeight>c.clientHeight,yn=c=>{let u=window.getComputedStyle(c),f=parseFloat(u.getPropertyValue("animation-duration")||"0"),w=parseFloat(u.getPropertyValue("transition-duration")||"0");return f>0||w>0},Fr=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=Tt();f&&Fe(f)&&(u&&(f.style.transition="none",f.style.width="100%"),setTimeout(()=>{f.style.transition=`width ${c/1e3}s linear`,f.style.width="0%"},10))},co=()=>{let c=Tt();if(!c)return;let u=parseInt(window.getComputedStyle(c).width);c.style.removeProperty("transition"),c.style.width="100%";let f=parseInt(window.getComputedStyle(c).width),w=u/f*100;c.style.width=`${w}%`},Ur=()=>typeof window>"u"||typeof document>"u",Tc=`
 <div aria-labelledby="${y.title}" aria-describedby="${y["html-container"]}" class="${y.popup}" tabindex="-1">
   <button type="button" class="${y.close}"></button>
   <ul class="${y["progress-steps"]}"></ul>
   <div class="${y.icon}"></div>
   <img class="${y.image}" />
   <h2 class="${y.title}" id="${y.title}"></h2>
   <div class="${y["html-container"]}" id="${y["html-container"]}"></div>
   <input class="${y.input}" id="${y.input}" />
   <input type="file" class="${y.file}" />
   <div class="${y.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${y.select}" id="${y.select}"></select>
   <div class="${y.radio}"></div>
   <label class="${y.checkbox}">
     <input type="checkbox" id="${y.checkbox}" />
     <span class="${y.label}"></span>
   </label>
   <textarea class="${y.textarea}" id="${y.textarea}"></textarea>
   <div class="${y["validation-message"]}" id="${y["validation-message"]}"></div>
   <div class="${y.actions}">
     <div class="${y.loader}"></div>
     <button type="button" class="${y.confirm}"></button>
     <button type="button" class="${y.deny}"></button>
     <button type="button" class="${y.cancel}"></button>
   </div>
   <div class="${y.footer}"></div>
   <div class="${y["timer-progress-bar-container"]}">
     <div class="${y["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Ac=()=>{let c=I();return c?(c.remove(),nt([document.documentElement,document.body],[y["no-backdrop"],y["toast-shown"],y["has-column"]]),!0):!1},pt=()=>{a.currentInstance.resetValidationMessage()},uo=()=>{let c=S(),u=At(c,y.input),f=At(c,y.file),w=c.querySelector(`.${y.range} input`),R=c.querySelector(`.${y.range} output`),B=At(c,y.select),X=c.querySelector(`.${y.checkbox} input`),ae=At(c,y.textarea);u.oninput=pt,f.onchange=pt,B.onchange=pt,X.onchange=pt,ae.oninput=pt,w.oninput=()=>{pt(),R.value=w.value},w.onchange=()=>{pt(),R.value=w.value}},lo=c=>typeof c=="string"?document.querySelector(c):c,Yn=c=>{let u=S();u.setAttribute("role",c.toast?"alert":"dialog"),u.setAttribute("aria-live",c.toast?"polite":"assertive"),c.toast||u.setAttribute("aria-modal","true")},Ji=c=>{window.getComputedStyle(c).direction==="rtl"&&ee(I(),y.rtl)},Yi=c=>{let u=Ac();if(Ur()){K("SweetAlert2 requires document to initialize");return}let f=document.createElement("div");f.className=y.container,u&&ee(f,y["no-transition"]),Me(f,Tc);let w=lo(c.target);w.appendChild(f),Yn(c),Ji(w),uo()},mt=(c,u)=>{c instanceof HTMLElement?u.appendChild(c):typeof c=="object"?ho(c,u):c&&Me(u,c)},ho=(c,u)=>{c.jquery?Br(u,c):Me(u,c.toString())},Br=(c,u)=>{if(c.textContent="",0 in u)for(let f=0;f in u;f++)c.appendChild(u[f].cloneNode(!0));else c.appendChild(u.cloneNode(!0))},Ct=(()=>{if(Ur())return!1;let c=document.createElement("div");return typeof c.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof c.style.animation<"u"?"animationend":!1})(),Xn=(c,u)=>{let f=dt(),w=fn();!f||!w||(!u.showConfirmButton&&!u.showDenyButton&&!u.showCancelButton?Te(f):_e(f),je(f,u,"actions"),fo(f,w,u),Me(w,u.loaderHtml||""),je(w,u,"loader"))};function fo(c,u,f){let w=et(),R=$e(),B=dn();!w||!R||!B||(qr(w,"confirm",f),qr(R,"deny",f),qr(B,"cancel",f),Ue(w,R,B,f),f.reverseButtons&&(f.toast?(c.insertBefore(B,w),c.insertBefore(R,w)):(c.insertBefore(B,u),c.insertBefore(R,u),c.insertBefore(w,u))))}function Ue(c,u,f,w){if(!w.buttonsStyling){nt([c,u,f],y.styled);return}ee([c,u,f],y.styled),w.confirmButtonColor&&(c.style.backgroundColor=w.confirmButtonColor,ee(c,y["default-outline"])),w.denyButtonColor&&(u.style.backgroundColor=w.denyButtonColor,ee(u,y["default-outline"])),w.cancelButtonColor&&(f.style.backgroundColor=w.cancelButtonColor,ee(f,y["default-outline"]))}function qr(c,u,f){let w=j(u);St(c,f[`show${w}Button`],"inline-block"),Me(c,f[`${u}ButtonText`]||""),c.setAttribute("aria-label",f[`${u}ButtonAriaLabel`]||""),c.className=y[u],je(c,f,`${u}Button`)}let Zn=(c,u)=>{let f=Wi();f&&(Me(f,u.closeButtonHtml||""),je(f,u,"closeButton"),St(f,u.showCloseButton),f.setAttribute("aria-label",u.closeButtonAriaLabel||""))},er=(c,u)=>{let f=I();f&&(Sc(f,u.backdrop),Cc(f,u.position),wn(f,u.grow),je(f,u,"container"))};function Sc(c,u){typeof u=="string"?c.style.background=u:u||ee([document.documentElement,document.body],y["no-backdrop"])}function Cc(c,u){u&&(u in y?ee(c,y[u]):(O('The "position" parameter is not valid, defaulting to "center"'),ee(c,y.center)))}function wn(c,u){u&&ee(c,y[`grow-${u}`])}var he={innerParams:new WeakMap,domCache:new WeakMap};let Pc=["input","file","range","select","radio","checkbox","textarea"],$r=(c,u)=>{let f=S();if(!f)return;let w=he.innerParams.get(c),R=!w||u.input!==w.input;Pc.forEach(B=>{let X=At(f,y[B]);X&&(jr(B,u.inputAttributes),X.className=y[B],R&&Te(X))}),u.input&&(R&&po(u),Pt(u))},po=c=>{if(!c.input)return;if(!pe[c.input]){K(`Unexpected type of input! Expected ${Object.keys(pe).join(" | ")}, got "${c.input}"`);return}let u=Gr(c.input);if(!u)return;let f=pe[c.input](u,c);_e(u),c.inputAutoFocus&&setTimeout(()=>{Ki(f)})},Xi=c=>{for(let u=0;u<c.attributes.length;u++){let f=c.attributes[u].name;["id","type","value","style"].includes(f)||c.removeAttribute(f)}},jr=(c,u)=>{let f=S();if(!f)return;let w=Mr(f,c);if(w){Xi(w);for(let R in u)w.setAttribute(R,u[R])}},Pt=c=>{if(!c.input)return;let u=Gr(c.input);u&&je(u,c,"input")},zr=(c,u)=>{!c.placeholder&&u.inputPlaceholder&&(c.placeholder=u.inputPlaceholder)},_n=(c,u,f)=>{if(f.inputLabel){let w=document.createElement("label"),R=y["input-label"];w.setAttribute("for",c.id),w.className=R,typeof f.customClass=="object"&&ee(w,f.customClass.inputLabel),w.innerText=f.inputLabel,u.insertAdjacentElement("beforebegin",w)}},Gr=c=>{let u=S();if(u)return At(u,y[c]||y.input)},vn=(c,u)=>{["string","number"].includes(typeof u)?c.value=`${u}`:v(u)||O(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof u}"`)},pe={};pe.text=pe.email=pe.password=pe.number=pe.tel=pe.url=pe.search=pe.date=pe["datetime-local"]=pe.time=pe.week=pe.month=(c,u)=>(vn(c,u.inputValue),_n(c,c,u),zr(c,u),c.type=u.input,c),pe.file=(c,u)=>(_n(c,c,u),zr(c,u),c),pe.range=(c,u)=>{let f=c.querySelector("input"),w=c.querySelector("output");return vn(f,u.inputValue),f.type=u.input,vn(w,u.inputValue),_n(f,c,u),c},pe.select=(c,u)=>{if(c.textContent="",u.inputPlaceholder){let f=document.createElement("option");Me(f,u.inputPlaceholder),f.value="",f.disabled=!0,f.selected=!0,c.appendChild(f)}return _n(c,c,u),c},pe.radio=c=>(c.textContent="",c),pe.checkbox=(c,u)=>{let f=Mr(S(),"checkbox");f.value="1",f.checked=!!u.inputValue;let w=c.querySelector("span");return Me(w,u.inputPlaceholder||u.inputLabel),f},pe.textarea=(c,u)=>{vn(c,u.inputValue),zr(c,u),_n(c,c,u);let f=w=>parseInt(window.getComputedStyle(w).marginLeft)+parseInt(window.getComputedStyle(w).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let w=parseInt(window.getComputedStyle(S()).width),R=()=>{if(!document.body.contains(c))return;let B=c.offsetWidth+f(c);B>w?S().style.width=`${B}px`:ft(S(),"width",u.width)};new MutationObserver(R).observe(c,{attributes:!0,attributeFilter:["style"]})}}),c};let mo=(c,u)=>{let f=Gi();f&&(Ae(f),je(f,u,"htmlContainer"),u.html?(mt(u.html,f),_e(f,"block")):u.text?(f.textContent=u.text,_e(f,"block")):Te(f),$r(c,u))},Rc=(c,u)=>{let f=io();f&&(Ae(f),St(f,u.footer,"block"),u.footer&&mt(u.footer,f),je(f,u,"footer"))},Wr=(c,u)=>{let f=he.innerParams.get(c),w=E();if(w){if(f&&u.icon===f.icon){Hr(w,u),Zi(w,u);return}if(!u.icon&&!u.iconHtml){Te(w);return}if(u.icon&&Object.keys(D).indexOf(u.icon)===-1){K(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${u.icon}"`),Te(w);return}_e(w),Hr(w,u),Zi(w,u),ee(w,u.showClass&&u.showClass.icon)}},Zi=(c,u)=>{for(let[f,w]of Object.entries(D))u.icon!==f&&nt(c,w);ee(c,u.icon&&D[u.icon]),kc(c,u),es(),je(c,u,"icon")},es=()=>{let c=S();if(!c)return;let u=window.getComputedStyle(c).getPropertyValue("background-color"),f=c.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let w=0;w<f.length;w++)f[w].style.backgroundColor=u},tr=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Gt=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Hr=(c,u)=>{if(!u.icon&&!u.iconHtml)return;let f=c.innerHTML,w="";u.iconHtml?w=ts(u.iconHtml):u.icon==="success"?(w=tr,f=f.replace(/ style=".*?"/g,"")):u.icon==="error"?w=Gt:u.icon&&(w=ts({question:"?",warning:"!",info:"i"}[u.icon])),f.trim()!==w.trim()&&Me(c,w)},kc=(c,u)=>{if(u.iconColor){c.style.color=u.iconColor,c.style.borderColor=u.iconColor;for(let f of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ne(c,f,"background-color",u.iconColor);Ne(c,".swal2-success-ring","border-color",u.iconColor)}},ts=c=>`<div class="${y["icon-content"]}">${c}</div>`,go=(c,u)=>{let f=ln();if(f){if(!u.imageUrl){Te(f);return}_e(f,""),f.setAttribute("src",u.imageUrl),f.setAttribute("alt",u.imageAlt||""),ft(f,"width",u.imageWidth),ft(f,"height",u.imageHeight),f.className=y.image,je(f,u,"image")}},yo=(c,u)=>{let f=I(),w=S();if(!(!f||!w)){if(u.toast){ft(f,"width",u.width),w.style.width="100%";let R=fn();R&&w.insertBefore(R,E())}else ft(w,"width",u.width);ft(w,"padding",u.padding),u.color&&(w.style.color=u.color),u.background&&(w.style.background=u.background),Te(hn()),ns(w,u)}},ns=(c,u)=>{let f=u.showClass||{};c.className=`${y.popup} ${Fe(c)?f.popup:""}`,u.toast?(ee([document.documentElement,document.body],y["toast-shown"]),ee(c,y.toast)):ee(c,y.modal),je(c,u,"popup"),typeof u.customClass=="string"&&ee(c,u.customClass),u.icon&&ee(c,y[`icon-${u.icon}`])},rs=(c,u)=>{let f=zt();if(!f)return;let{progressSteps:w,currentProgressStep:R}=u;if(!w||w.length===0||R===void 0){Te(f);return}_e(f),f.textContent="",R>=w.length&&O("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),w.forEach((B,X)=>{let ae=wo(B);if(f.appendChild(ae),X===R&&ee(ae,y["active-progress-step"]),X!==w.length-1){let ye=_o(u);f.appendChild(ye)}})},wo=c=>{let u=document.createElement("li");return ee(u,y["progress-step"]),Me(u,c),u},_o=c=>{let u=document.createElement("li");return ee(u,y["progress-step-line"]),c.progressStepsDistance&&ft(u,"width",c.progressStepsDistance),u},xc=(c,u)=>{let f=un();f&&(Ae(f),St(f,u.title||u.titleText,"block"),u.title&&mt(u.title,f),u.titleText&&(f.innerText=u.titleText),je(f,u,"title"))},vo=(c,u)=>{yo(c,u),er(c,u),rs(c,u),Wr(c,u),go(c,u),xc(c,u),Zn(c,u),mo(c,u),Xn(c,u),Rc(c,u);let f=S();typeof u.didRender=="function"&&f&&u.didRender(f),a.eventEmitter.emit("didRender",f)},Io=()=>Fe(S()),is=()=>{var c;return(c=et())===null||c===void 0?void 0:c.click()},Dc=()=>{var c;return(c=$e())===null||c===void 0?void 0:c.click()},Wt=()=>{var c;return(c=dn())===null||c===void 0?void 0:c.click()},ze=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),nr=c=>{c.keydownTarget&&c.keydownHandlerAdded&&(c.keydownTarget.removeEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!1)},Kr=(c,u,f)=>{nr(c),u.toast||(c.keydownHandler=w=>rr(u,w,f),c.keydownTarget=u.keydownListenerCapture?window:S(),c.keydownListenerCapture=u.keydownListenerCapture,c.keydownTarget.addEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!0)},Qr=(c,u)=>{var f;let w=pn();if(w.length){c=c+u,c===w.length?c=0:c===-1&&(c=w.length-1),w[c].focus();return}(f=S())===null||f===void 0||f.focus()},de=["ArrowRight","ArrowDown"],Jr=["ArrowLeft","ArrowUp"],rr=(c,u,f)=>{c&&(u.isComposing||u.keyCode===229||(c.stopKeydownPropagation&&u.stopPropagation(),u.key==="Enter"?ir(u,c):u.key==="Tab"?Nc(u):[...de,...Jr].includes(u.key)?Eo(u.key):u.key==="Escape"&&Oc(u,c,f)))},ir=(c,u)=>{if(!be(u.allowEnterKey))return;let f=Mr(S(),u.input);if(c.target&&f&&c.target instanceof HTMLElement&&c.target.outerHTML===f.outerHTML){if(["textarea","file"].includes(u.input))return;is(),c.preventDefault()}},Nc=c=>{let u=c.target,f=pn(),w=-1;for(let R=0;R<f.length;R++)if(u===f[R]){w=R;break}c.shiftKey?Qr(w,-1):Qr(w,1),c.stopPropagation(),c.preventDefault()},Eo=c=>{let u=dt(),f=et(),w=$e(),R=dn();if(!u||!f||!w||!R)return;let B=[f,w,R];if(document.activeElement instanceof HTMLElement&&!B.includes(document.activeElement))return;let X=de.includes(c)?"nextElementSibling":"previousElementSibling",ae=document.activeElement;if(ae){for(let ye=0;ye<u.children.length;ye++){if(ae=ae[X],!ae)return;if(ae instanceof HTMLButtonElement&&Fe(ae))break}ae instanceof HTMLButtonElement&&ae.focus()}},Oc=(c,u,f)=>{be(u.allowEscapeKey)&&(c.preventDefault(),f(ze.esc))};var In={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let Vc=()=>{let c=I();Array.from(document.body.children).forEach(f=>{f.contains(c)||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")||""),f.setAttribute("aria-hidden","true"))})},bo=()=>{Array.from(document.body.children).forEach(u=>{u.hasAttribute("data-previous-aria-hidden")?(u.setAttribute("aria-hidden",u.getAttribute("data-previous-aria-hidden")||""),u.removeAttribute("data-previous-aria-hidden")):u.removeAttribute("aria-hidden")})},En=typeof window<"u"&&!!window.GestureEvent,Rt=()=>{if(En&&!tt(document.body,y.iosfix)){let c=document.body.scrollTop;document.body.style.top=`${c*-1}px`,ee(document.body,y.iosfix),To()}},To=()=>{let c=I();if(!c)return;let u;c.ontouchstart=f=>{u=Ao(f)},c.ontouchmove=f=>{u&&(f.preventDefault(),f.stopPropagation())}},Ao=c=>{let u=c.target,f=I(),w=Gi();return!f||!w||So(c)||bn(c)?!1:u===f||!ao(f)&&u instanceof HTMLElement&&u.tagName!=="INPUT"&&u.tagName!=="TEXTAREA"&&!(ao(w)&&w.contains(u))},So=c=>c.touches&&c.touches.length&&c.touches[0].touchType==="stylus",bn=c=>c.touches&&c.touches.length>1,Lc=()=>{if(tt(document.body,y.iosfix)){let c=parseInt(document.body.style.top,10);nt(document.body,y.iosfix),document.body.style.top="",document.body.scrollTop=c*-1}},Mc=()=>{let c=document.createElement("div");c.className=y["scrollbar-measure"],document.body.appendChild(c);let u=c.getBoundingClientRect().width-c.clientWidth;return document.body.removeChild(c),u},Tn=null,kt=c=>{Tn===null&&(document.body.scrollHeight>window.innerHeight||c==="scroll")&&(Tn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Tn+Mc()}px`)},Fc=()=>{Tn!==null&&(document.body.style.paddingRight=`${Tn}px`,Tn=null)};function Co(c,u,f,w){gn()?ko(c,w):(p(f).then(()=>ko(c,w)),nr(a)),En?(u.setAttribute("style","display:none !important"),u.removeAttribute("class"),u.innerHTML=""):u.remove(),mn()&&(Fc(),Lc(),bo()),sr()}function sr(){nt([document.documentElement,document.body],[y.shown,y["height-auto"],y["no-backdrop"],y["toast-shown"]])}function rt(c){c=Ro(c);let u=In.swalPromiseResolve.get(this),f=Po(this);this.isAwaitingPromise?c.isDismissed||(gt(this),u(c)):f&&u(c)}let Po=c=>{let u=S();if(!u)return!1;let f=he.innerParams.get(c);if(!f||tt(u,f.hideClass.popup))return!1;nt(u,f.showClass.popup),ee(u,f.hideClass.popup);let w=I();return nt(w,f.showClass.backdrop),ee(w,f.hideClass.backdrop),ss(c,u,f),!0};function An(c){let u=In.swalPromiseReject.get(this);gt(this),u&&u(c)}let gt=c=>{c.isAwaitingPromise&&(delete c.isAwaitingPromise,he.innerParams.get(c)||c._destroy())},Ro=c=>typeof c>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},c),ss=(c,u,f)=>{let w=I(),R=Ct&&yn(u);typeof f.willClose=="function"&&f.willClose(u),a.eventEmitter.emit("willClose",u),R?me(c,u,w,f.returnFocus,f.didClose):Co(c,w,f.returnFocus,f.didClose)},me=(c,u,f,w,R)=>{Ct&&(a.swalCloseEventFinishedCallback=Co.bind(null,c,f,w,R),u.addEventListener(Ct,function(B){B.target===u&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback)}))},ko=(c,u)=>{setTimeout(()=>{typeof u=="function"&&u.bind(c.params)(),a.eventEmitter.emit("didClose"),c._destroy&&c._destroy()})},Sn=c=>{let u=S();if(u||new qo,u=S(),!u)return;let f=fn();gn()?Te(E()):xo(u,c),_e(f),u.setAttribute("data-loading","true"),u.setAttribute("aria-busy","true"),u.focus()},xo=(c,u)=>{let f=dt(),w=fn();!f||!w||(!u&&Fe(et())&&(u=et()),_e(f),u&&(Te(u),w.setAttribute("data-button-to-replace",u.className),f.insertBefore(w,u)),ee([c,f],y.loading))},Do=(c,u)=>{u.input==="select"||u.input==="radio"?Vo(c,u):["text","email","number","tel","textarea"].some(f=>f===u.input)&&(se(u.inputValue)||v(u.inputValue))&&(Sn(et()),Uc(c,u))},No=(c,u)=>{let f=c.getInput();if(!f)return null;switch(u.input){case"checkbox":return Yr(f);case"radio":return Oo(f);case"file":return yt(f);default:return u.inputAutoTrim?f.value.trim():f.value}},Yr=c=>c.checked?1:0,Oo=c=>c.checked?c.value:null,yt=c=>c.files&&c.files.length?c.getAttribute("multiple")!==null?c.files:c.files[0]:null,Vo=(c,u)=>{let f=S();if(!f)return;let w=R=>{u.input==="select"?or(f,Cn(R),u):u.input==="radio"&&Lo(f,Cn(R),u)};se(u.inputOptions)||v(u.inputOptions)?(Sn(et()),C(u.inputOptions).then(R=>{c.hideLoading(),w(R)})):typeof u.inputOptions=="object"?w(u.inputOptions):K(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof u.inputOptions}`)},Uc=(c,u)=>{let f=c.getInput();f&&(Te(f),C(u.inputValue).then(w=>{f.value=u.input==="number"?`${parseFloat(w)||0}`:`${w}`,_e(f),f.focus(),c.hideLoading()}).catch(w=>{K(`Error in inputValue promise: ${w}`),f.value="",_e(f),f.focus(),c.hideLoading()}))};function or(c,u,f){let w=At(c,y.select);if(!w)return;let R=(B,X,ae)=>{let ye=document.createElement("option");ye.value=ae,Me(ye,X),ye.selected=ar(ae,f.inputValue),B.appendChild(ye)};u.forEach(B=>{let X=B[0],ae=B[1];if(Array.isArray(ae)){let ye=document.createElement("optgroup");ye.label=X,ye.disabled=!1,w.appendChild(ye),ae.forEach(ri=>R(ye,ri[1],ri[0]))}else R(w,ae,X)}),w.focus()}function Lo(c,u,f){let w=At(c,y.radio);if(!w)return;u.forEach(B=>{let X=B[0],ae=B[1],ye=document.createElement("input"),ri=document.createElement("label");ye.type="radio",ye.name=y.radio,ye.value=X,ar(X,f.inputValue)&&(ye.checked=!0);let $c=document.createElement("span");Me($c,ae),$c.className=y.label,ri.appendChild(ye),ri.appendChild($c),w.appendChild(ri)});let R=w.querySelectorAll("input");R.length&&R[0].focus()}let Cn=c=>{let u=[];return c instanceof Map?c.forEach((f,w)=>{let R=f;typeof R=="object"&&(R=Cn(R)),u.push([w,R])}):Object.keys(c).forEach(f=>{let w=c[f];typeof w=="object"&&(w=Cn(w)),u.push([f,w])}),u},ar=(c,u)=>!!u&&u.toString()===c.toString(),Mo=c=>{let u=he.innerParams.get(c);c.disableButtons(),u.input?os(c,"confirm"):ur(c,!0)},Xr=c=>{let u=he.innerParams.get(c);c.disableButtons(),u.returnInputValueOnDeny?os(c,"deny"):Zr(c,!1)},Bc=(c,u)=>{c.disableButtons(),u(ze.cancel)},os=(c,u)=>{let f=he.innerParams.get(c);if(!f.input){K(`The "input" parameter is needed to be set when using returnInputValueOn${j(u)}`);return}let w=c.getInput(),R=No(c,f);f.inputValidator?cr(c,R,u):w&&!w.checkValidity()?(c.enableButtons(),c.showValidationMessage(f.validationMessage||w.validationMessage)):u==="deny"?Zr(c,R):ur(c,R)},cr=(c,u,f)=>{let w=he.innerParams.get(c);c.disableInput(),Promise.resolve().then(()=>C(w.inputValidator(u,w.validationMessage))).then(B=>{c.enableButtons(),c.enableInput(),B?c.showValidationMessage(B):f==="deny"?Zr(c,u):ur(c,u)})},Zr=(c,u)=>{let f=he.innerParams.get(c||void 0);f.showLoaderOnDeny&&Sn($e()),f.preDeny?(c.isAwaitingPromise=!0,Promise.resolve().then(()=>C(f.preDeny(u,f.validationMessage))).then(R=>{R===!1?(c.hideLoading(),gt(c)):c.close({isDenied:!0,value:typeof R>"u"?u:R})}).catch(R=>ei(c||void 0,R))):c.close({isDenied:!0,value:u})},as=(c,u)=>{c.close({isConfirmed:!0,value:u})},ei=(c,u)=>{c.rejectPromise(u)},ur=(c,u)=>{let f=he.innerParams.get(c||void 0);f.showLoaderOnConfirm&&Sn(),f.preConfirm?(c.resetValidationMessage(),c.isAwaitingPromise=!0,Promise.resolve().then(()=>C(f.preConfirm(u,f.validationMessage))).then(R=>{Fe(hn())||R===!1?(c.hideLoading(),gt(c)):as(c,typeof R>"u"?u:R)}).catch(R=>ei(c||void 0,R))):as(c,u)};function lr(){let c=he.innerParams.get(this);if(!c)return;let u=he.domCache.get(this);Te(u.loader),gn()?c.icon&&_e(E()):ti(u),nt([u.popup,u.actions],y.loading),u.popup.removeAttribute("aria-busy"),u.popup.removeAttribute("data-loading"),u.confirmButton.disabled=!1,u.denyButton.disabled=!1,u.cancelButton.disabled=!1}let ti=c=>{let u=c.popup.getElementsByClassName(c.loader.getAttribute("data-button-to-replace"));u.length?_e(u[0],"inline-block"):oo()&&Te(c.actions)};function cs(){let c=he.innerParams.get(this),u=he.domCache.get(this);return u?Mr(u.popup,c.input):null}function us(c,u,f){let w=he.domCache.get(c);u.forEach(R=>{w[R].disabled=f})}function xt(c,u){let f=S();if(!(!f||!c))if(c.type==="radio"){let w=f.querySelectorAll(`[name="${y.radio}"]`);for(let R=0;R<w.length;R++)w[R].disabled=u}else c.disabled=u}function ls(){us(this,["confirmButton","denyButton","cancelButton"],!1)}function hs(){us(this,["confirmButton","denyButton","cancelButton"],!0)}function ds(){xt(this.getInput(),!1)}function fs(){xt(this.getInput(),!0)}function hr(c){let u=he.domCache.get(this),f=he.innerParams.get(this);Me(u.validationMessage,c),u.validationMessage.className=y["validation-message"],f.customClass&&f.customClass.validationMessage&&ee(u.validationMessage,f.customClass.validationMessage),_e(u.validationMessage);let w=this.getInput();w&&(w.setAttribute("aria-invalid","true"),w.setAttribute("aria-describedby",y["validation-message"]),Ki(w),ee(w,y.inputerror))}function Ge(){let c=he.domCache.get(this);c.validationMessage&&Te(c.validationMessage);let u=this.getInput();u&&(u.removeAttribute("aria-invalid"),u.removeAttribute("aria-describedby"),nt(u,y.inputerror))}let Ht={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Fo=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Pn={allowEnterKey:void 0},s=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],l=c=>Object.prototype.hasOwnProperty.call(Ht,c),d=c=>Fo.indexOf(c)!==-1,g=c=>Pn[c],P=c=>{l(c)||O(`Unknown parameter "${c}"`)},k=c=>{s.includes(c)&&O(`The parameter "${c}" is incompatible with toasts`)},M=c=>{let u=g(c);u&&le(c,u)},ce=c=>{c.backdrop===!1&&c.allowOutsideClick&&O('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let u in c)P(u),c.toast&&k(u),M(u)};function Se(c){let u=S(),f=he.innerParams.get(this);if(!u||tt(u,f.hideClass.popup)){O("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let w=re(c),R=Object.assign({},f,w);vo(this,R),he.innerParams.set(this,R),Object.defineProperties(this,{params:{value:Object.assign({},this.params,c),writable:!1,enumerable:!0}})}let re=c=>{let u={};return Object.keys(c).forEach(f=>{d(f)?u[f]=c[f]:O(`Invalid parameter to update: ${f}`)}),u};function ke(){let c=he.domCache.get(this),u=he.innerParams.get(this);if(!u){Kt(this);return}c.popup&&a.swalCloseEventFinishedCallback&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback),typeof u.didDestroy=="function"&&u.didDestroy(),a.eventEmitter.emit("didDestroy"),Oe(this)}let Oe=c=>{Kt(c),delete c.params,delete a.keydownHandler,delete a.keydownTarget,delete a.currentInstance},Kt=c=>{c.isAwaitingPromise?(Je(he,c),c.isAwaitingPromise=!0):(Je(In,c),Je(he,c),delete c.isAwaitingPromise,delete c.disableButtons,delete c.enableButtons,delete c.getInput,delete c.disableInput,delete c.enableInput,delete c.hideLoading,delete c.disableLoading,delete c.showValidationMessage,delete c.resetValidationMessage,delete c.close,delete c.closePopup,delete c.closeModal,delete c.closeToast,delete c.rejectPromise,delete c.update,delete c._destroy)},Je=(c,u)=>{for(let f in c)c[f].delete(u)};var ni=Object.freeze({__proto__:null,_destroy:ke,close:rt,closeModal:rt,closePopup:rt,closeToast:rt,disableButtons:hs,disableInput:fs,disableLoading:lr,enableButtons:ls,enableInput:ds,getInput:cs,handleAwaitingPromise:gt,hideLoading:lr,rejectPromise:An,resetValidationMessage:Ge,showValidationMessage:hr,update:Se});let ps=(c,u,f)=>{c.toast?qg(c,u,f):(jg(u),zg(u),Gg(c,u,f))},qg=(c,u,f)=>{u.popup.onclick=()=>{c&&($g(c)||c.timer||c.input)||f(ze.close)}},$g=c=>!!(c.showConfirmButton||c.showDenyButton||c.showCancelButton||c.showCloseButton),Uo=!1,jg=c=>{c.popup.onmousedown=()=>{c.container.onmouseup=function(u){c.container.onmouseup=()=>{},u.target===c.container&&(Uo=!0)}}},zg=c=>{c.container.onmousedown=u=>{u.target===c.container&&u.preventDefault(),c.popup.onmouseup=function(f){c.popup.onmouseup=()=>{},(f.target===c.popup||f.target instanceof HTMLElement&&c.popup.contains(f.target))&&(Uo=!0)}}},Gg=(c,u,f)=>{u.container.onclick=w=>{if(Uo){Uo=!1;return}w.target===u.container&&be(c.allowOutsideClick)&&f(ze.backdrop)}},Wg=c=>typeof c=="object"&&c.jquery,bd=c=>c instanceof Element||Wg(c),Hg=c=>{let u={};return typeof c[0]=="object"&&!bd(c[0])?Object.assign(u,c[0]):["title","html","icon"].forEach((f,w)=>{let R=c[w];typeof R=="string"||bd(R)?u[f]=R:R!==void 0&&K(`Unexpected type of ${f}! Expected "string" or "Element", got ${typeof R}`)}),u};function Kg(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return new this(...u)}function Qg(c){class u extends this{_main(w,R){return super._main(w,Object.assign({},c,R))}}return u}let Jg=()=>a.timeout&&a.timeout.getTimerLeft(),Td=()=>{if(a.timeout)return co(),a.timeout.stop()},Ad=()=>{if(a.timeout){let c=a.timeout.start();return Fr(c),c}},Yg=()=>{let c=a.timeout;return c&&(c.running?Td():Ad())},Xg=c=>{if(a.timeout){let u=a.timeout.increase(c);return Fr(u,!0),u}},Zg=()=>!!(a.timeout&&a.timeout.isRunning()),Sd=!1,qc={};function ey(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";qc[c]=this,Sd||(document.body.addEventListener("click",ty),Sd=!0)}let ty=c=>{for(let u=c.target;u&&u!==document;u=u.parentNode)for(let f in qc){let w=u.getAttribute(f);if(w){qc[f].fire({template:w});return}}};class ny{constructor(){this.events={}}_getHandlersByEventName(u){return typeof this.events[u]>"u"&&(this.events[u]=[]),this.events[u]}on(u,f){let w=this._getHandlersByEventName(u);w.includes(f)||w.push(f)}once(u,f){var w=this;let R=function(){w.removeListener(u,R);for(var B=arguments.length,X=new Array(B),ae=0;ae<B;ae++)X[ae]=arguments[ae];f.apply(w,X)};this.on(u,R)}emit(u){for(var f=arguments.length,w=new Array(f>1?f-1:0),R=1;R<f;R++)w[R-1]=arguments[R];this._getHandlersByEventName(u).forEach(B=>{try{B.apply(this,w)}catch(X){console.error(X)}})}removeListener(u,f){let w=this._getHandlersByEventName(u),R=w.indexOf(f);R>-1&&w.splice(R,1)}removeAllListeners(u){this.events[u]!==void 0&&(this.events[u].length=0)}reset(){this.events={}}}a.eventEmitter=new ny;var ry=Object.freeze({__proto__:null,argsToParams:Hg,bindClickHandler:ey,clickCancel:Wt,clickConfirm:is,clickDeny:Dc,enableLoading:Sn,fire:Kg,getActions:dt,getCancelButton:dn,getCloseButton:Wi,getConfirmButton:et,getContainer:I,getDenyButton:$e,getFocusableElements:pn,getFooter:io,getHtmlContainer:Gi,getIcon:E,getIconContent:ht,getImage:ln,getInputLabel:De,getLoader:fn,getPopup:S,getProgressSteps:zt,getTimerLeft:Jg,getTimerProgressBar:Tt,getTitle:un,getValidationMessage:hn,increaseTimer:Xg,isDeprecatedParameter:g,isLoading:Hi,isTimerRunning:Zg,isUpdatableParameter:d,isValidParameter:l,isVisible:Io,mixin:Qg,off:(c,u)=>{if(!c){a.eventEmitter.reset();return}u?a.eventEmitter.removeListener(c,u):a.eventEmitter.removeAllListeners(c)},on:(c,u)=>{a.eventEmitter.on(c,u)},once:(c,u)=>{a.eventEmitter.once(c,u)},resumeTimer:Ad,showLoading:Sn,stopTimer:Td,toggleTimer:Yg});class iy{constructor(u,f){this.callback=u,this.remaining=f,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(u){let f=this.running;return f&&this.stop(),this.remaining+=u,f&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let Cd=["swal-title","swal-html","swal-footer"],sy=c=>{let u=typeof c.template=="string"?document.querySelector(c.template):c.template;if(!u)return{};let f=u.content;return fy(f),Object.assign(oy(f),ay(f),cy(f),uy(f),ly(f),hy(f),dy(f,Cd))},oy=c=>{let u={};return Array.from(c.querySelectorAll("swal-param")).forEach(w=>{dr(w,["name","value"]);let R=w.getAttribute("name"),B=w.getAttribute("value");!R||!B||(typeof Ht[R]=="boolean"?u[R]=B!=="false":typeof Ht[R]=="object"?u[R]=JSON.parse(B):u[R]=B)}),u},ay=c=>{let u={};return Array.from(c.querySelectorAll("swal-function-param")).forEach(w=>{let R=w.getAttribute("name"),B=w.getAttribute("value");!R||!B||(u[R]=new Function(`return ${B}`)())}),u},cy=c=>{let u={};return Array.from(c.querySelectorAll("swal-button")).forEach(w=>{dr(w,["type","color","aria-label"]);let R=w.getAttribute("type");!R||!["confirm","cancel","deny"].includes(R)||(u[`${R}ButtonText`]=w.innerHTML,u[`show${j(R)}Button`]=!0,w.hasAttribute("color")&&(u[`${R}ButtonColor`]=w.getAttribute("color")),w.hasAttribute("aria-label")&&(u[`${R}ButtonAriaLabel`]=w.getAttribute("aria-label")))}),u},uy=c=>{let u={},f=c.querySelector("swal-image");return f&&(dr(f,["src","width","height","alt"]),f.hasAttribute("src")&&(u.imageUrl=f.getAttribute("src")||void 0),f.hasAttribute("width")&&(u.imageWidth=f.getAttribute("width")||void 0),f.hasAttribute("height")&&(u.imageHeight=f.getAttribute("height")||void 0),f.hasAttribute("alt")&&(u.imageAlt=f.getAttribute("alt")||void 0)),u},ly=c=>{let u={},f=c.querySelector("swal-icon");return f&&(dr(f,["type","color"]),f.hasAttribute("type")&&(u.icon=f.getAttribute("type")),f.hasAttribute("color")&&(u.iconColor=f.getAttribute("color")),u.iconHtml=f.innerHTML),u},hy=c=>{let u={},f=c.querySelector("swal-input");f&&(dr(f,["type","label","placeholder","value"]),u.input=f.getAttribute("type")||"text",f.hasAttribute("label")&&(u.inputLabel=f.getAttribute("label")),f.hasAttribute("placeholder")&&(u.inputPlaceholder=f.getAttribute("placeholder")),f.hasAttribute("value")&&(u.inputValue=f.getAttribute("value")));let w=Array.from(c.querySelectorAll("swal-input-option"));return w.length&&(u.inputOptions={},w.forEach(R=>{dr(R,["value"]);let B=R.getAttribute("value");if(!B)return;let X=R.innerHTML;u.inputOptions[B]=X})),u},dy=(c,u)=>{let f={};for(let w in u){let R=u[w],B=c.querySelector(R);B&&(dr(B,[]),f[R.replace(/^swal-/,"")]=B.innerHTML.trim())}return f},fy=c=>{let u=Cd.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(c.children).forEach(f=>{let w=f.tagName.toLowerCase();u.includes(w)||O(`Unrecognized element <${w}>`)})},dr=(c,u)=>{Array.from(c.attributes).forEach(f=>{u.indexOf(f.name)===-1&&O([`Unrecognized attribute "${f.name}" on <${c.tagName.toLowerCase()}>.`,`${u.length?`Allowed attributes are: ${u.join(", ")}`:"To set the value, use HTML within the element."}`])})},Pd=10,py=c=>{let u=I(),f=S();typeof c.willOpen=="function"&&c.willOpen(f),a.eventEmitter.emit("willOpen",f);let R=window.getComputedStyle(document.body).overflowY;yy(u,f,c),setTimeout(()=>{my(u,f)},Pd),mn()&&(gy(u,c.scrollbarPadding,R),Vc()),!gn()&&!a.previousActiveElement&&(a.previousActiveElement=document.activeElement),typeof c.didOpen=="function"&&setTimeout(()=>c.didOpen(f)),a.eventEmitter.emit("didOpen",f),nt(u,y["no-transition"])},Rd=c=>{let u=S();if(c.target!==u||!Ct)return;let f=I();u.removeEventListener(Ct,Rd),f.style.overflowY="auto"},my=(c,u)=>{Ct&&yn(u)?(c.style.overflowY="hidden",u.addEventListener(Ct,Rd)):c.style.overflowY="auto"},gy=(c,u,f)=>{Rt(),u&&f!=="hidden"&&kt(f),setTimeout(()=>{c.scrollTop=0})},yy=(c,u,f)=>{ee(c,f.showClass.backdrop),f.animation?(u.style.setProperty("opacity","0","important"),_e(u,"grid"),setTimeout(()=>{ee(u,f.showClass.popup),u.style.removeProperty("opacity")},Pd)):_e(u,"grid"),ee([document.documentElement,document.body],y.shown),f.heightAuto&&f.backdrop&&!f.toast&&ee([document.documentElement,document.body],y["height-auto"])};var kd={email:(c,u)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(c)?Promise.resolve():Promise.resolve(u||"Invalid email address"),url:(c,u)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(c)?Promise.resolve():Promise.resolve(u||"Invalid URL")};function wy(c){c.inputValidator||(c.input==="email"&&(c.inputValidator=kd.email),c.input==="url"&&(c.inputValidator=kd.url))}function _y(c){(!c.target||typeof c.target=="string"&&!document.querySelector(c.target)||typeof c.target!="string"&&!c.target.appendChild)&&(O('Target parameter is not valid, defaulting to "body"'),c.target="body")}function vy(c){wy(c),c.showLoaderOnConfirm&&!c.preConfirm&&O(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),_y(c),typeof c.title=="string"&&(c.title=c.title.split(`
`).join("<br />")),Yi(c)}let Dt;var Bo=new WeakMap;class Ie{constructor(){if(r(this,Bo,void 0),typeof window>"u")return;Dt=this;for(var u=arguments.length,f=new Array(u),w=0;w<u;w++)f[w]=arguments[w];let R=Object.freeze(this.constructor.argsToParams(f));this.params=R,this.isAwaitingPromise=!1,i(Bo,this,this._main(Dt.params))}_main(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ce(Object.assign({},f,u)),a.currentInstance){let B=In.swalPromiseResolve.get(a.currentInstance),{isAwaitingPromise:X}=a.currentInstance;a.currentInstance._destroy(),X||B({isDismissed:!0}),mn()&&bo()}a.currentInstance=Dt;let w=Ey(u,f);vy(w),Object.freeze(w),a.timeout&&(a.timeout.stop(),delete a.timeout),clearTimeout(a.restoreFocusTimeout);let R=by(Dt);return vo(Dt,w),he.innerParams.set(Dt,w),Iy(Dt,R,w)}then(u){return t(Bo,this).then(u)}finally(u){return t(Bo,this).finally(u)}}let Iy=(c,u,f)=>new Promise((w,R)=>{let B=X=>{c.close({isDismissed:!0,dismiss:X})};In.swalPromiseResolve.set(c,w),In.swalPromiseReject.set(c,R),u.confirmButton.onclick=()=>{Mo(c)},u.denyButton.onclick=()=>{Xr(c)},u.cancelButton.onclick=()=>{Bc(c,B)},u.closeButton.onclick=()=>{B(ze.close)},ps(f,u,B),Kr(a,f,B),Do(c,f),py(f),Ty(a,f,B),Ay(u,f),setTimeout(()=>{u.container.scrollTop=0})}),Ey=(c,u)=>{let f=sy(c),w=Object.assign({},Ht,u,f,c);return w.showClass=Object.assign({},Ht.showClass,w.showClass),w.hideClass=Object.assign({},Ht.hideClass,w.hideClass),w.animation===!1&&(w.showClass={backdrop:"swal2-noanimation"},w.hideClass={}),w},by=c=>{let u={popup:S(),container:I(),actions:dt(),confirmButton:et(),denyButton:$e(),cancelButton:dn(),loader:fn(),closeButton:Wi(),validationMessage:hn(),progressSteps:zt()};return he.domCache.set(c,u),u},Ty=(c,u,f)=>{let w=Tt();Te(w),u.timer&&(c.timeout=new iy(()=>{f("timer"),delete c.timeout},u.timer),u.timerProgressBar&&(_e(w),je(w,u,"timerProgressBar"),setTimeout(()=>{c.timeout&&c.timeout.running&&Fr(u.timer)})))},Ay=(c,u)=>{if(!u.toast){if(!be(u.allowEnterKey)){le("allowEnterKey"),Py();return}Sy(c)||Cy(c,u)||Qr(-1,1)}},Sy=c=>{let u=c.popup.querySelectorAll("[autofocus]");for(let f of u)if(f instanceof HTMLElement&&Fe(f))return f.focus(),!0;return!1},Cy=(c,u)=>u.focusDeny&&Fe(c.denyButton)?(c.denyButton.focus(),!0):u.focusCancel&&Fe(c.cancelButton)?(c.cancelButton.focus(),!0):u.focusConfirm&&Fe(c.confirmButton)?(c.confirmButton.focus(),!0):!1,Py=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let c=new Date,u=localStorage.getItem("swal-initiation");u?(c.getTime()-Date.parse(u))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let f=document.createElement("audio");f.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",f.loop=!0,document.body.appendChild(f),setTimeout(()=>{f.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${c}`)}Ie.prototype.disableButtons=hs,Ie.prototype.enableButtons=ls,Ie.prototype.getInput=cs,Ie.prototype.disableInput=fs,Ie.prototype.enableInput=ds,Ie.prototype.hideLoading=lr,Ie.prototype.disableLoading=lr,Ie.prototype.showValidationMessage=hr,Ie.prototype.resetValidationMessage=Ge,Ie.prototype.close=rt,Ie.prototype.closePopup=rt,Ie.prototype.closeModal=rt,Ie.prototype.closeToast=rt,Ie.prototype.rejectPromise=An,Ie.prototype.update=Se,Ie.prototype._destroy=ke,Object.assign(Ie,ry),Object.keys(ni).forEach(c=>{Ie[c]=function(){return Dt&&Dt[c]?Dt[c](...arguments):null}}),Ie.DismissReason=ze,Ie.version="11.14.1";let qo=Ie;return qo.default=qo,qo});typeof jt<"u"&&jt.Sweetalert2&&(jt.swal=jt.sweetAlert=jt.Swal=jt.SweetAlert=jt.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var sf=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ky=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],h=n[t++],p=((i&7)<<18|(o&63)<<12|(a&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},of={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,h=a?n[i+1]:0,p=i+2<n.length,m=p?n[i+2]:0,_=o>>2,y=(o&3)<<4|h>>4,x=(h&15)<<2|m>>6,D=m&63;p||(D=64,a||(x=64)),r.push(t[_],t[y],t[x],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sf(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ky(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;let m=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||m==null||y==null)throw new Jc;let x=o<<2|h>>4;if(r.push(x),m!==64){let D=h<<4&240|m>>2;if(r.push(D),y!==64){let U=m<<6&192|y;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Jc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xy=function(n){let e=sf(n);return of.encodeByteArray(e,!0)},ys=function(n){return xy(n).replace(/\./g,"")},Xc=function(n){try{return of.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ny=()=>Dy().__FIREBASE_DEFAULTS__,Oy=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Vy=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Xc(n[1]);return e&&JSON.parse(e)},ea=()=>{try{return Ny()||Oy()||Vy()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Zc=n=>{var e,t;return(t=(e=ea())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},af=n=>{let e=Zc(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},eu=()=>{var n;return(n=ea())===null||n===void 0?void 0:n.config},tu=n=>{var e;return(e=ea())===null||e===void 0?void 0:e[`_${n}`]};var Zo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function cf(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ys(JSON.stringify(t)),ys(JSON.stringify(a)),""].join(".")}function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ly(){var n;let e=(n=ea())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function df(){let n=Ve();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ff(){return!Ly()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nu(){try{return typeof indexedDB=="object"}catch{return!1}}function pf(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var My="FirebaseError",it=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=My,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}},Qt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?Fy(o,r):"Error",h=`${this.serviceName}: ${a} (${i}).`;return new it(i,h,r)}};function Fy(n,e){return n.replace(Uy,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Uy=/\{\$([^}]+)}/g;function mf(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(rf(o)&&rf(a)){if(!mr(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function rf(n){return n!==null&&typeof n=="object"}function ws(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fi(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function pi(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function gf(n,e){let t=new Yc(n,e);return t.subscribe.bind(t)}var Yc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");By(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Qc),i.error===void 0&&(i.error=Qc),i.complete===void 0&&(i.complete=Qc);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function By(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qc(){}var YE=4*60*60*1e3;function We(n){return n&&n._delegate?n._delegate:n}var ut=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gr="[DEFAULT]";var ru=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Zo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($y(e))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=gr){return this.instances.has(e)}getOptions(e=gr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qy(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gr){return this.component?this.component.multipleInstances?e:gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qy(n){return n===gr?void 0:n}function $y(n){return n.instantiationMode==="EAGER"}var ta=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ru(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var jy=[],te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(te||{}),zy={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Gy=te.INFO,Wy={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Hy=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Wy[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Vn=class{constructor(e){this.name=e,this._logLevel=Gy,this._logHandler=Hy,this._userLogHandler=null,jy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var Ky=(n,e)=>e.some(t=>n instanceof t),yf,wf;function Qy(){return yf||(yf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jy(){return wf||(wf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _f=new WeakMap,su=new WeakMap,vf=new WeakMap,iu=new WeakMap,au=new WeakMap;function Yy(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Ot(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&_f.set(t,n)}).catch(()=>{}),au.set(e,n),e}function Xy(n){if(su.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});su.set(n,e)}var ou={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return su.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vf.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ot(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function If(n){ou=n(ou)}function Zy(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(na(this),e,...t);return vf.set(r,e.sort?e.sort():[e]),Ot(r)}:Jy().includes(n)?function(...e){return n.apply(na(this),e),Ot(_f.get(this))}:function(...e){return Ot(n.apply(na(this),e))}}function ew(n){return typeof n=="function"?Zy(n):(n instanceof IDBTransaction&&Xy(n),Ky(n,Qy())?new Proxy(n,ou):n)}function Ot(n){if(n instanceof IDBRequest)return Yy(n);if(iu.has(n))return iu.get(n);let e=ew(n);return e!==n&&(iu.set(n,e),au.set(e,n)),e}var na=n=>au.get(n);function bf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),h=Ot(a);return r&&a.addEventListener("upgradeneeded",p=>{r(Ot(a.result),p.oldVersion,p.newVersion,Ot(a.transaction),p)}),t&&a.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{o&&p.addEventListener("close",()=>o()),i&&p.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var tw=["get","getKey","getAll","getAllKeys","count"],nw=["put","add","delete","clear"],cu=new Map;function Ef(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cu.get(e))return cu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=nw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tw.includes(t)))return;let o=function(a,...h){return b(this,null,function*(){let p=this.transaction(a,i?"readwrite":"readonly"),m=p.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&p.done]))[0]})};return cu.set(e,o),o}If(n=>jo($o({},n),{get:(e,t,r)=>Ef(e,t)||n.get(e,t,r),has:(e,t)=>!!Ef(e,t)||n.has(e,t)}));var lu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rw(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function rw(n){let e=n.getComponent();return e?.type==="VERSION"}var hu="@firebase/app",Tf="0.10.10";var Jt=new Vn("@firebase/app"),iw="@firebase/app-compat",sw="@firebase/analytics-compat",ow="@firebase/analytics",aw="@firebase/app-check-compat",cw="@firebase/app-check",uw="@firebase/auth",lw="@firebase/auth-compat",hw="@firebase/database",dw="@firebase/database-compat",fw="@firebase/functions",pw="@firebase/functions-compat",mw="@firebase/installations",gw="@firebase/installations-compat",yw="@firebase/messaging",ww="@firebase/messaging-compat",_w="@firebase/performance",vw="@firebase/performance-compat",Iw="@firebase/remote-config",Ew="@firebase/remote-config-compat",bw="@firebase/storage",Tw="@firebase/storage-compat",Aw="@firebase/firestore",Sw="@firebase/vertexai-preview",Cw="@firebase/firestore-compat",Pw="firebase",Rw="10.13.1";var du="[DEFAULT]",kw={[hu]:"fire-core",[iw]:"fire-core-compat",[ow]:"fire-analytics",[sw]:"fire-analytics-compat",[cw]:"fire-app-check",[aw]:"fire-app-check-compat",[uw]:"fire-auth",[lw]:"fire-auth-compat",[hw]:"fire-rtdb",[dw]:"fire-rtdb-compat",[fw]:"fire-fn",[pw]:"fire-fn-compat",[mw]:"fire-iid",[gw]:"fire-iid-compat",[yw]:"fire-fcm",[ww]:"fire-fcm-compat",[_w]:"fire-perf",[vw]:"fire-perf-compat",[Iw]:"fire-rc",[Ew]:"fire-rc-compat",[bw]:"fire-gcs",[Tw]:"fire-gcs-compat",[Aw]:"fire-fst",[Cw]:"fire-fst-compat",[Sw]:"fire-vertex","fire-js":"fire-js",[Pw]:"fire-js-all"};var _s=new Map,xw=new Map,fu=new Map;function Af(n,e){try{n.container.addComponent(e)}catch(t){Jt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mn(n){let e=n.name;if(fu.has(e))return Jt.debug(`There were multiple attempts to register component ${e}.`),!1;fu.set(e,n);for(let t of _s.values())Af(t,n);for(let t of xw.values())Af(t,n);return!0}function Is(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _t(n){return n.settings!==void 0}var Dw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ln=new Qt("app","Firebase",Dw);var pu=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}};var Fn=Rw;function yu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:du,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ln.create("bad-app-name",{appName:String(i)});if(t||(t=eu()),!t)throw Ln.create("no-options");let o=_s.get(i);if(o){if(mr(t,o.options)&&mr(r,o.config))return o;throw Ln.create("duplicate-app",{appName:i})}let a=new ta(i);for(let p of fu.values())a.addComponent(p);let h=new pu(t,r,a);return _s.set(i,h),h}function mi(n=du){let e=_s.get(n);if(!e&&n===du&&eu())return yu();if(!e)throw Ln.create("no-app",{appName:n});return e}function ra(){return Array.from(_s.values())}function xe(n,e,t){var r;let i=(r=kw[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&h.push("and"),a&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jt.warn(h.join(" "));return}Mn(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Nw="firebase-heartbeat-database",Ow=1,vs="firebase-heartbeat-store",uu=null;function Rf(){return uu||(uu=bf(Nw,Ow,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vs)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ln.create("idb-open",{originalErrorMessage:n.message})})),uu}function Vw(n){return b(this,null,function*(){try{let t=(yield Rf()).transaction(vs),r=yield t.objectStore(vs).get(kf(n));return yield t.done,r}catch(e){if(e instanceof it)Jt.warn(e.message);else{let t=Ln.create("idb-get",{originalErrorMessage:e?.message});Jt.warn(t.message)}}})}function Sf(n,e){return b(this,null,function*(){try{let r=(yield Rf()).transaction(vs,"readwrite");yield r.objectStore(vs).put(e,kf(n)),yield r.done}catch(t){if(t instanceof it)Jt.warn(t.message);else{let r=Ln.create("idb-set",{originalErrorMessage:t?.message});Jt.warn(r.message)}}})}function kf(n){return`${n.name}!${n.options.appId}`}var Lw=1024,Mw=30*24*60*60*1e3,mu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new gu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Cf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let h=new Date(a.date).valueOf();return Date.now()-h<=Mw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jt.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Cf(),{heartbeatsToSend:r,unsentEntries:i}=Fw(this._heartbeatsCache.heartbeats),o=ys(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Jt.warn(t),""}})}};function Cf(){return new Date().toISOString().substring(0,10)}function Fw(n,e=Lw){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Pf(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Pf(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var gu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return nu()?pf().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Vw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Sf(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Sf(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Pf(n){return ys(JSON.stringify({version:2,heartbeats:n})).length}function Uw(n){Mn(new ut("platform-logger",e=>new lu(e),"PRIVATE")),Mn(new ut("heartbeat",e=>new mu(e),"PRIVATE")),xe(hu,Tf,n),xe(hu,Tf,"esm2017"),xe("fire-js","")}Uw("");var Bw="firebase",qw="10.13.1";xe(Bw,qw,"app");var wr=new Hd("ANGULARFIRE2_VERSION");function sa(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Es=(n,e)=>{let t=e?[e]:ra(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},yi=class{constructor(){return Es($w)}},$w="app-check";function gi(){}var ia=class{zone;delegate;constructor(e,t=Od){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,r)}},wu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gi,{},gi,gi)),t.pipe(Vd({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ia(Zone.current)),this.insideAngular=t.run(()=>new ia(Zone.current,Nd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ld(kn))};static \u0275prov=zo({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oa(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function jw(n){return oa().ngZone.runOutsideAngular(()=>n())}function yr(n){return oa().ngZone.run(()=>n())}function zw(n){return Gw(oa())(n)}function Gw(n){return function(t){return t=t.lift(new wu(n.ngZone)),t.pipe(Gc(n.outsideAngular),zc(n.insideAngular))}}var Ww=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),yr(()=>n.apply(void 0,r))},Ze=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=yr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gi,{},gi,gi))),r[o]=Ww(r[o],t));let i=jw(()=>n.apply(this,r));if(!e)if(i instanceof ms){let o=oa();return i.pipe(Gc(o.outsideAngular),zc(o.insideAngular))}else return yr(()=>i);return i instanceof ms?i.pipe(zw):i instanceof Promise?yr(()=>new Promise((o,a)=>i.then(h=>yr(()=>o(h)),h=>yr(()=>a(h))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:yr(()=>i)};var Yt=class{constructor(e){return e}},_r=class{constructor(){return ra()}};function Hw(n){return n&&n.length===1?n[0]:new Yt(mi())}var _u=new ii("angularfire2._apps"),Kw={provide:Yt,useFactory:Hw,deps:[[new at,_u]]},Qw={provide:_r,deps:[[new at,_u]]};function Jw(n){return(e,t)=>{let r=t.get(Fd);xe("angularfire",wr.full,"core"),xe("angularfire",wr.full,"app"),xe("angular",Kd.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Yt(i)}}function xf(n,...e){return si([Kw,Qw,{provide:_u,useFactory:Jw(n),multi:!0,deps:[kn,ci,wi,...e]}])}var Df=Ze(yu,!0);function Qf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Jf=Qf,Yf=new Qt("auth","Firebase",Qf());var da=new Vn("@firebase/auth");function Yw(n,...e){da.logLevel<=te.WARN&&da.warn(`Auth (${Fn}): ${n}`,...e)}function ca(n,...e){da.logLevel<=te.ERROR&&da.error(`Auth (${Fn}): ${n}`,...e)}function Lt(n,...e){throw $u(n,...e)}function vr(n,...e){return $u(n,...e)}function Xf(n,e,t){let r=Object.assign(Object.assign({},Jf()),{[e]:t});return new Qt("auth","Firebase",r).create(e,{appName:n.name})}function en(n){return Xf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $u(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Yf.create(n,...e)}function W(n,e,...t){if(!n)throw $u(e,...t)}function Xt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ca(e),new Error(e)}function qn(n,e){n||Xt(e)}function bu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Xw(){return Nf()==="http:"||Nf()==="https:"}function Nf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Zw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xw()||lf()||"connection"in navigator)?navigator.onLine:!0}function e_(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ir=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,qn(t>e,"Short delay should be less than long delay!"),this.isMobile=uf()||hf()}get(){return Zw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ju(n,e){qn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var fa=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var t_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var n_=new Ir(3e4,6e4);function $n(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function jn(o,a,h,p){return b(this,arguments,function*(n,e,t,r,i={}){return Zf(n,i,()=>b(this,null,function*(){let m={},_={};r&&(e==="GET"?_=r:m={body:JSON.stringify(r)});let y=ws(Object.assign({key:n.config.apiKey},_)).slice(1),x=yield n._getAdditionalHeaders();return x["Content-Type"]="application/json",n.languageCode&&(x["X-Firebase-Locale"]=n.languageCode),fa.fetch()(ep(n,n.config.apiHost,t,y),Object.assign({method:e,headers:x,referrerPolicy:"no-referrer"},m))}))})}function Zf(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},t_),e);try{let i=new Tu(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw aa(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let h=o.ok?a.errorMessage:a.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw aa(n,"credential-already-in-use",a);if(p==="EMAIL_EXISTS")throw aa(n,"email-already-in-use",a);if(p==="USER_DISABLED")throw aa(n,"user-disabled",a);let _=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Xf(n,_,m);Lt(n,_)}}catch(i){if(i instanceof it)throw i;Lt(n,"network-request-failed",{message:String(i)})}})}function ks(o,a,h,p){return b(this,arguments,function*(n,e,t,r,i={}){let m=yield jn(n,e,t,r,i);return"mfaPendingCredential"in m&&Lt(n,"multi-factor-auth-required",{_serverResponse:m}),m})}function ep(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?ju(n.config,i):`${n.config.apiScheme}://${i}`}function r_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Tu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vr(this.auth,"network-request-failed")),n_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function aa(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=vr(n,e,r);return i.customData._tokenResponse=t,i}function Of(n){return n!==void 0&&n.enterprise!==void 0}var Au=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return r_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function i_(n,e){return b(this,null,function*(){return jn(n,"GET","/v2/recaptchaConfig",$n(n,e))})}function s_(n,e){return b(this,null,function*(){return jn(n,"POST","/v1/accounts:delete",e)})}function tp(n,e){return b(this,null,function*(){return jn(n,"POST","/v1/accounts:lookup",e)})}function bs(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zu(n,e=!1){return b(this,null,function*(){let t=We(n),r=yield t.getIdToken(e),i=Gu(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:bs(vu(i.auth_time)),issuedAtTime:bs(vu(i.iat)),expirationTime:bs(vu(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function vu(n){return Number(n)*1e3}function Gu(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ca("JWT malformed, contained fewer than 3 sections"),null;try{let i=Xc(t);return i?JSON.parse(i):(ca("Failed to decode base64 JWT payload"),null)}catch(i){return ca("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Vf(n){let e=Gu(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function As(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof it&&o_(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function o_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Su=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ss=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bs(this.lastLoginAt),this.creationTime=bs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pa(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield As(n,tp(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?np(o.providerUserInfo):[],h=a_(n.providerData,a),p=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!h?.length,_=p?m:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ss(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,y)})}function Wu(n){return b(this,null,function*(){let e=We(n);yield pa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function a_(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function np(n){return n.map(e=>{var{providerId:t}=e,r=jc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function c_(n,e){return b(this,null,function*(){let t=yield Zf(n,{},()=>b(this,null,function*(){let r=ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=ep(n,i,"/v1/token",`key=${o}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",fa.fetch()(a,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function u_(n,e){return b(this,null,function*(){return jn(n,"POST","/v2/accounts:revokeToken",$n(n,e))})}var Ts=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=Vf(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield c_(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xt("not implemented")}};function Bn(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var _i=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=jc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Su(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ss(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield As(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return zu(this,e)}reload(){return Wu(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield pa(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(_t(this.auth.app))return Promise.reject(en(this.auth));let e=yield this.getIdToken();return yield As(this,s_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,h,p,m,_;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(i=t.email)!==null&&i!==void 0?i:void 0,D=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,U=(a=t.photoURL)!==null&&a!==void 0?a:void 0,j=(h=t.tenantId)!==null&&h!==void 0?h:void 0,O=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,K=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:le,isAnonymous:be,providerData:se,stsTokenManager:C}=t;W(Z&&C,e,"internal-error");let v=Ts.fromJSON(this.name,C);W(typeof Z=="string",e,"internal-error"),Bn(y,e.name),Bn(x,e.name),W(typeof le=="boolean",e,"internal-error"),W(typeof be=="boolean",e,"internal-error"),Bn(D,e.name),Bn(U,e.name),Bn(j,e.name),Bn(O,e.name),Bn(K,e.name),Bn(Y,e.name);let I=new n({uid:Z,auth:e,email:x,emailVerified:le,displayName:y,isAnonymous:be,photoURL:U,phoneNumber:D,tenantId:j,stsTokenManager:v,createdAt:K,lastLoginAt:Y});return se&&Array.isArray(se)&&(I.providerData=se.map(T=>Object.assign({},T))),O&&(I._redirectEventId=O),I}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new Ts;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pa(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?np(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,h=new Ts;h.updateFromIdToken(r);let p=new n({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ss(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(p,m),p})}};var Lf=new Map;function Zt(n){qn(n instanceof Function,"Expected a class definition");let e=Lf.get(n);return e?(qn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Lf.set(n,e),e)}var l_=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Cu=l_;function ua(n,e,t){return`firebase:${n}:${e}:${t}`}var ma=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=ua(this.userKey,i.apiKey,o),this.fullPersistenceKey=ua("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?_i._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Zt(Cu),e,r);let i=(yield Promise.all(t.map(m=>b(this,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),o=i[0]||Zt(Cu),a=ua(r,e.config.apiKey,e.name),h=null;for(let m of t)try{let _=yield m._get(a);if(_){let y=_i._fromJSON(e,_);m!==o&&(h=y),o=m;break}}catch{}let p=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new n(o,e,r):(o=p[0],h&&(yield o._set(a,h.toJSON())),yield Promise.all(t.map(m=>b(this,null,function*(){if(m!==o)try{yield m._remove(a)}catch{}}))),new n(o,e,r))})}};function Mf(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(op(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cp(e))return"Blackberry";if(up(e))return"Webos";if(ip(e))return"Safari";if((e.includes("chrome/")||sp(e))&&!e.includes("edge/"))return"Chrome";if(ap(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function rp(n=Ve()){return/firefox\//i.test(n)}function ip(n=Ve()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sp(n=Ve()){return/crios\//i.test(n)}function op(n=Ve()){return/iemobile/i.test(n)}function ap(n=Ve()){return/android/i.test(n)}function cp(n=Ve()){return/blackberry/i.test(n)}function up(n=Ve()){return/webos/i.test(n)}function Hu(n=Ve()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function h_(n=Ve()){var e;return Hu(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d_(){return df()&&document.documentMode===10}function lp(n=Ve()){return Hu(n)||ap(n)||up(n)||cp(n)||/windows phone/i.test(n)||op(n)}function hp(n,e=[]){let t;switch(n){case"Browser":t=Mf(Ve());break;case"Worker":t=`${Mf(Ve())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fn}/${r}`}var Pu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,h)=>{try{let p=e(o);a(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function f_(t){return b(this,arguments,function*(n,e={}){return jn(n,"GET","/v2/passwordPolicy",$n(n,e))})}var p_=6,Ru=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:p_,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,h;let p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsUppercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsNumericCharacter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var ku=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ga(this),this.idTokenSubscription=new ga(this),this.beforeStateQueue=new Pu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zt(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ma.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield tp(this,{idToken:e}),r=yield _i._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(_t(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i?._redirectEventId,p=yield this.tryRedirectSignIn(e);(!a||a===h)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield pa(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=e_()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(_t(this.app))return Promise.reject(en(this));let t=e?We(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return _t(this.app)?Promise.reject(en(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _t(this.app)?Promise.reject(en(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Zt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield f_(this),t=new Ru(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield u_(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Zt(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield ma.create(this,[Zt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(h,this,"internal-error"),h.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let p=e.addObserver(t,r,i);return()=>{a=!0,p()}}else{let p=e.addObserver(t);return()=>{a=!0,p()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Yw(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function br(n){return We(n)}var ga=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gf(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ba={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m_(n){ba=n}function dp(n){return ba.loadJS(n)}function g_(){return ba.recaptchaEnterpriseScript}function y_(){return ba.gapiScript}function fp(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var w_="recaptcha-enterprise",__="NO_RECAPTCHA",xu=class{constructor(e){this.type=w_,this.auth=br(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(o){return b(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,h)=>b(this,null,function*(){i_(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{let m=new Au(p);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,a(m.siteKey)}}).catch(p=>{h(p)})}))})}function i(o,a,h){let p=window.grecaptcha;Of(p)?p.enterprise.ready(()=>{p.enterprise.execute(o,{action:e}).then(m=>{a(m)}).catch(()=>{a(__)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(h=>{if(!t&&Of(window.grecaptcha))i(h,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let p=g_();p.length!==0&&(p+=h),dp(p).then(()=>{i(h,o,a)}).catch(m=>{a(m)})}}).catch(h=>{a(h)})})})}};function Ff(n,e,t,r=!1){return b(this,null,function*(){let i=new xu(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Du(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Ff(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>b(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield Ff(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)}))})}function Ku(n,e){let t=Is(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(mr(o,e??{}))return i;Lt(i,"already-initialized")}return t.initialize({options:e})}function v_(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Zt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Qu(n,e,t){let r=br(n);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=pp(e),{host:a,port:h}=I_(e),p=h===null?"":`:${h}`;r.config.emulator={url:`${o}//${a}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||E_()}function pp(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function I_(n){let e=pp(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Uf(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:Uf(a)}}}function Uf(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function E_(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Cs=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xt("not implemented")}_getIdTokenResponse(e){return Xt("not implemented")}_linkToIdToken(e,t){return Xt("not implemented")}_getReauthenticationResolver(e){return Xt("not implemented")}};function b_(n,e){return b(this,null,function*(){return jn(n,"POST","/v1/accounts:signUp",e)})}function T_(n,e){return b(this,null,function*(){return ks(n,"POST","/v1/accounts:signInWithPassword",$n(n,e))})}function A_(n,e){return b(this,null,function*(){return ks(n,"POST","/v1/accounts:signInWithEmailLink",$n(n,e))})}function S_(n,e){return b(this,null,function*(){return ks(n,"POST","/v1/accounts:signInWithEmailLink",$n(n,e))})}var Ps=class n extends Cs{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,t,"signInWithPassword",T_);case"emailLink":return A_(e,{email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,r,"signUpPassword",b_);case"emailLink":return S_(e,{idToken:t,email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Iu(n,e){return b(this,null,function*(){return ks(n,"POST","/v1/accounts:signInWithIdp",$n(n,e))})}function C_(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function P_(n){let e=fi(pi(n)).link,t=e?fi(pi(e)).deep_link_id:null,r=fi(pi(n)).deep_link_id;return(r?fi(pi(r)).link:null)||r||t||e||n}var ya=class n{constructor(e){var t,r,i,o,a,h;let p=fi(pi(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(r=p.oobCode)!==null&&r!==void 0?r:null,y=C_((i=p.mode)!==null&&i!==void 0?i:null);W(m&&_&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=_,this.continueUrl=(o=p.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=p.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){let t=P_(e);try{return new n(t)}catch{return null}}};var mp=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ps._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ya.parseLink(r);return W(i,"argument-error"),Ps._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),wa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Nu=class extends wa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function R_(n,e){return b(this,null,function*(){return ks(n,"POST","/v1/accounts:signUp",$n(n,e))})}var vi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let o=yield _i._fromIdTokenResponse(e,r,i),a=Bf(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Bf(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Bf(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ou=class n extends it{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function gp(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ou._fromErrorAndOperation(n,o,e,r):o})}function k_(n,e,t=!1){return b(this,null,function*(){let r=yield As(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return vi._forOperation(n,"link",r)})}function x_(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(_t(r.app))return Promise.reject(en(r));let i="reauthenticate";try{let o=yield As(n,gp(r,i,e,n),t);W(o.idToken,r,"internal-error");let a=Gu(o.idToken);W(a,r,"internal-error");let{sub:h}=a;return W(n.uid===h,r,"user-mismatch"),vi._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Lt(r,"user-mismatch"),o}})}function yp(n,e,t=!1){return b(this,null,function*(){if(_t(n.app))return Promise.reject(en(n));let r="signIn",i=yield gp(n,r,e),o=yield vi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Ju(n,e){return b(this,null,function*(){return yp(br(n),e)})}function wp(n){return b(this,null,function*(){let e=br(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Yu(n,e,t){return b(this,null,function*(){if(_t(n.app))return Promise.reject(en(n));let r=br(n),a=yield Du(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",R_).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&wp(n),p}),h=yield vi._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(h.user),h})}function Xu(n,e,t){return _t(n.app)?Promise.reject(en(n)):Ju(We(n),mp.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&wp(n),r}))}function Zu(n,e,t,r){return We(n).onIdTokenChanged(e,t,r)}function el(n,e,t){return We(n).beforeAuthStateChanged(e,t)}var _a="__sak";var va=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var D_=1e3,N_=10,O_=(()=>{class n extends va{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lp(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},a=this.storage.getItem(i);d_()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,N_):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},D_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield Rn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield Rn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield Rn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),_p=O_;var V_=(()=>{class n extends va{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),tl=V_;function L_(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var M_=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,h=this.handlersMap[o];if(!h?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let p=Array.from(h).map(_=>b(this,null,function*(){return _(r.origin,a)})),m=yield L_(p);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function vp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Vu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((h,p)=>{let m=vp("",20);i.port1.start();let _=setTimeout(()=>{p(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let x=y;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(_),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Vt(){return window}function F_(n){Vt().location.href=n}function Ip(){return typeof Vt().WorkerGlobalScope<"u"&&typeof Vt().importScripts=="function"}function U_(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function B_(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function q_(){return Ip()?self:null}var Ep="firebaseLocalStorageDb",$_=1,Ia="firebaseLocalStorage",bp="fbase_key",Er=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ta(n,e){return n.transaction([Ia],e?"readwrite":"readonly").objectStore(Ia)}function j_(){let n=indexedDB.deleteDatabase(Ep);return new Er(n).toPromise()}function Lu(){let n=indexedDB.open(Ep,$_);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Ia,{keyPath:bp})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Ia)?e(r):(r.close(),yield j_(),e(yield Lu()))}))})}function qf(n,e,t){return b(this,null,function*(){let r=Ta(n,!0).put({[bp]:e,value:t});return new Er(r).toPromise()})}function z_(n,e){return b(this,null,function*(){let t=Ta(n,!1).get(e),r=yield new Er(t).toPromise();return r===void 0?null:r.value})}function $f(n,e){let t=Ta(n,!0).delete(e);return new Er(t).toPromise()}var G_=800,W_=3,H_=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Lu(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>W_)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return Ip()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=M_._getInstance(q_()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield U_(),!this.activeServiceWorker)return;this.sender=new Vu(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||B_()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Lu();return yield qf(t,_a,"1"),yield $f(t,_a),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>qf(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>z_(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>$f(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(o=>{let a=Ta(o,!1).getAll();return new Er(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),G_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Tp=H_;var zb=fp("rcb"),Gb=new Ir(3e4,6e4);function K_(n,e){return e?Zt(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Rs=class extends Cs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Iu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Iu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Iu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Q_(n){return yp(n.auth,new Rs(n),n.bypassAuthState)}function J_(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),x_(t,new Rs(n),n.bypassAuthState)}function Y_(n){return b(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),k_(t,new Rs(n),n.bypassAuthState)})}var Mu=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:h}=e;if(a){this.reject(a);return}let p={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(h)(p))}catch(m){this.reject(m)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q_;case"linkViaPopup":case"linkViaRedirect":return Y_;case"reauthViaPopup":case"reauthViaRedirect":return J_;default:Lt(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Wb=new Ir(2e3,1e4);var X_="pendingRedirect",la=new Map,Fu=class n extends Mu{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=la.get(this.auth._key());if(!e){try{let r=(yield Z_(this.resolver,this.auth))?yield Rn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}la.set(this.auth._key(),e)}return this.bypassAuthState||la.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return Rn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Rn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function Z_(n,e){return b(this,null,function*(){let t=nv(e),r=tv(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function ev(n,e){la.set(n._key(),e)}function tv(n){return Zt(n._redirectPersistence)}function nv(n){return ua(X_,n.config.apiKey,n.name)}function rv(n,e,t=!1){return b(this,null,function*(){if(_t(n.app))return Promise.reject(en(n));let r=br(n),i=K_(r,e),a=yield new Fu(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var iv=10*60*1e3,Uu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sv(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ap(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(vr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iv&&this.cachedEventUids.clear(),this.cachedEventUids.has(jf(e))}saveEventToCache(e){this.cachedEventUids.add(jf(e)),this.lastProcessedEventTime=Date.now()}};function jf(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ap({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sv(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ap(n);default:return!1}}function ov(t){return b(this,arguments,function*(n,e={}){return jn(n,"GET","/v1/projects",e)})}var av=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cv=/^https?/;function uv(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield ov(n);for(let t of e)try{if(lv(t))return}catch{}Lt(n,"unauthorized-domain")})}function lv(n){let e=bu(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!cv.test(t))return!1;if(av.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var hv=new Ir(3e4,6e4);function zf(){let n=Vt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dv(n){return new Promise((e,t)=>{var r,i,o;function a(){zf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zf(),t(vr(n,"network-request-failed"))},timeout:hv.get()})}if(!((i=(r=Vt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Vt().gapi)===null||o===void 0)&&o.load)a();else{let h=fp("iframefcb");return Vt()[h]=()=>{gapi.load?a():t(vr(n,"network-request-failed"))},dp(`${y_()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw ha=null,e})}var ha=null;function fv(n){return ha=ha||dv(n),ha}var pv=new Ir(5e3,15e3),mv="__/auth/iframe",gv="emulator/auth/iframe",yv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _v(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ju(e,gv):`https://${n.config.authDomain}/${mv}`,r={apiKey:e.apiKey,appName:n.name,v:Fn},i=wv.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ws(r).slice(1)}`}function vv(n){return b(this,null,function*(){let e=yield fv(n),t=Vt().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:_v(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yv,dontclear:!0},r=>new Promise((i,o)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=vr(n,"network-request-failed"),h=Vt().setTimeout(()=>{o(a)},pv.get());function p(){Vt().clearTimeout(h),i(r)}r.ping(p).then(p,()=>{o(a)})})))})}var Iv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ev=500,bv=600,Tv="_blank",Av="http://localhost",Ea=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Sv(n,e,t,r=Ev,i=bv){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),h="",p=Object.assign(Object.assign({},Iv),{width:r.toString(),height:i.toString(),top:o,left:a}),m=Ve().toLowerCase();t&&(h=sp(m)?Tv:t),rp(m)&&(e=e||Av,p.scrollbars="yes");let _=Object.entries(p).reduce((x,[D,U])=>`${x}${D}=${U},`,"");if(h_(m)&&h!=="_self")return Cv(e||"",h),new Ea(null);let y=window.open(e||"",h,_);W(y,n,"popup-blocked");try{y.focus()}catch{}return new Ea(y)}function Cv(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Pv="__/auth/handler",Rv="emulator/auth/handler",kv=encodeURIComponent("fac");function Gf(n,e,t,r,i,o){return b(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Fn,eventId:i};if(e instanceof wa){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",mf(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[_,y]of Object.entries(o||{}))a[_]=y}if(e instanceof Nu){let _=e.getScopes().filter(y=>y!=="");_.length>0&&(a.scopes=_.join(","))}n.tenantId&&(a.tid=n.tenantId);let h=a;for(let _ of Object.keys(h))h[_]===void 0&&delete h[_];let p=yield n._getAppCheckToken(),m=p?`#${kv}=${encodeURIComponent(p)}`:"";return`${xv(n)}?${ws(h).slice(1)}${m}`})}function xv({config:n}){return n.emulator?ju(n,Rv):`https://${n.authDomain}/${Pv}`}var Eu="webStorageSupport",Bu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tl,this._completeRedirectFn=rv,this._overrideRedirectResult=ev}_openPopup(e,t,r,i){return b(this,null,function*(){var o;qn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield Gf(e,t,r,bu(),i);return Sv(e,a,vp())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let o=yield Gf(e,t,r,bu(),i);return F_(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(qn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield vv(e),r=new Uu(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eu,{type:Eu},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[Eu];a!==void 0&&t(!!a),Lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lp()||ip()||Hu()}},Sp=Bu;var Wf="@firebase/auth",Hf="1.7.8";var qu=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Dv(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nv(n){Mn(new ut("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:h}=r.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let p={apiKey:a,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hp(n)},m=new ku(r,i,o,p);return v_(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new ut("auth-internal",e=>{let t=br(e.getProvider("auth").getImmediate());return(r=>new qu(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(Wf,Hf,Dv(n)),xe(Wf,Hf,"esm2017")}var Ov=5*60,Vv=tu("authIdTokenMaxAge")||Ov,Kf=null,Lv=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Vv)return;let i=t?.token;Kf!==i&&(Kf=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function nl(n=mi()){let e=Is(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ku(n,{popupRedirectResolver:Sp,persistence:[Tp,_p,tl]}),r=tu("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=Lv(o.toString());el(t,a,()=>a(t.currentUser)),Zu(t,h=>a(h))}}let i=Zc("auth");return i&&Qu(t,`http://${i}`),t}function Mv(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}m_({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=vr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Mv().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nv("Browser");var Cp="auth",tn=class{constructor(e){return e}},xs=class{constructor(){return Es(Cp)}};var rl=new ii("angularfire2.auth-instances");function PI(n,e){let t=sa(Cp,n,e);return t&&new tn(t)}function RI(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new tn(r)}}var kI={provide:xs,deps:[[new at,rl]]},xI={provide:tn,useFactory:PI,deps:[[new at,rl],Yt]};function Pp(n,...e){return xe("angularfire",wr.full,"auth"),si([xI,kI,{provide:rl,useFactory:RI(n),multi:!0,deps:[kn,ci,wi,_r,[new at,yi],...e]}])}var Rp=Ze(Yu,!0);var kp=Ze(nl,!0);var xp=Ze(Xu,!0);var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Op={};var zn,il;(function(){var n;function e(C,v){function I(){}I.prototype=v.prototype,C.D=v.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(T,A,S){for(var E=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)E[ht-2]=arguments[ht];return v.prototype[A].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)T[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;16>A;++A)T[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=C.g[0],I=C.g[1],A=C.g[2];var S=C.g[3],E=v+(S^I&(A^S))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[2]+606105819&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[3]+3250441966&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[6]+2821735955&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[7]+4249261313&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[10]+4294925233&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[11]+2304563134&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[14]+2792965006&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[15]+1236535329&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(A^S&(I^A))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[11]+643717713&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[0]+3921069994&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[15]+3634488961&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[4]+3889429448&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[3]+4107603335&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[8]+1163531501&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[7]+1735328473&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[12]+2368359562&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(I^A^S)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[11]+1839030562&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[14]+4259657740&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[7]+4139469664&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[10]+3200236656&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[3]+3572445317&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[6]+76029189&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[15]+530742520&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[2]+3299628645&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(A^(I|~S))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[14]+2878612391&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[5]+4237533241&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[10]+4293915773&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[1]+2240044497&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[6]+2734768916&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[13]+1309151649&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[2]+718787259&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+A&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var I=v-this.blockSize,T=this.B,A=this.h,S=0;S<v;){if(A==0)for(;S<=I;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<v;)if(T[A++]=C.charCodeAt(S++),A==this.blockSize){i(this,T),A=0;break}}else for(;S<v;)if(T[A++]=C[S++],A==this.blockSize){i(this,T),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var I=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=I&255,I/=256;for(this.u(C),C=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)C[I++]=this.g[v]>>>T&255;return C};function o(C,v){var I=h;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=v(C)}function a(C,v){this.h=v;for(var I=[],T=!0,A=C.length-1;0<=A;A--){var S=C[A]|0;T&&S==v||(I[A]=S,T=!1)}this.g=I}var h={};function p(C){return-128<=C&&128>C?o(C,function(v){return new a([v|0],0>v?-1:0)}):new a([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return y;if(0>C)return O(m(-C));for(var v=[],I=1,T=0;C>=I;T++)v[T]=C/I|0,I*=4294967296;return new a(v,0)}function _(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return O(_(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(v,8)),T=y,A=0;A<C.length;A+=8){var S=Math.min(8,C.length-A),E=parseInt(C.substring(A,A+S),v);8>S?(S=m(Math.pow(v,S)),T=T.j(S).add(m(E))):(T=T.j(I),T=T.add(m(E)))}return T}var y=p(0),x=p(1),D=p(16777216);n=a.prototype,n.m=function(){if(j(this))return-O(this).m();for(var C=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(U(this))return"0";if(j(this))return"-"+O(this).toString(C);for(var v=m(Math.pow(C,6)),I=this,T="";;){var A=le(I,v).g;I=K(I,A.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=A,U(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function U(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function j(C){return C.h==-1}n.l=function(C){return C=K(this,C),j(C)?-1:U(C)?0:1};function O(C){for(var v=C.g.length,I=[],T=0;T<v;T++)I[T]=~C.g[T];return new a(I,~C.h).add(x)}n.abs=function(){return j(this)?O(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0,A=0;A<=v;A++){var S=T+(this.i(A)&65535)+(C.i(A)&65535),E=(S>>>16)+(this.i(A)>>>16)+(C.i(A)>>>16);T=E>>>16,S&=65535,E&=65535,I[A]=E<<16|S}return new a(I,I[I.length-1]&-2147483648?-1:0)};function K(C,v){return C.add(O(v))}n.j=function(C){if(U(this)||U(C))return y;if(j(this))return j(C)?O(this).j(O(C)):O(O(this).j(C));if(j(C))return O(this.j(O(C)));if(0>this.l(D)&&0>C.l(D))return m(this.m()*C.m());for(var v=this.g.length+C.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<C.g.length;A++){var S=this.i(T)>>>16,E=this.i(T)&65535,ht=C.i(A)>>>16,un=C.i(A)&65535;I[2*T+2*A]+=E*un,Y(I,2*T+2*A),I[2*T+2*A+1]+=S*un,Y(I,2*T+2*A+1),I[2*T+2*A+1]+=E*ht,Y(I,2*T+2*A+1),I[2*T+2*A+2]+=S*ht,Y(I,2*T+2*A+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new a(I,0)};function Y(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function Z(C,v){this.g=C,this.h=v}function le(C,v){if(U(v))throw Error("division by zero");if(U(C))return new Z(y,y);if(j(C))return v=le(O(C),v),new Z(O(v.g),O(v.h));if(j(v))return v=le(C,O(v)),new Z(O(v.g),v.h);if(30<C.g.length){if(j(C)||j(v))throw Error("slowDivide_ only works with positive integers.");for(var I=x,T=v;0>=T.l(C);)I=be(I),T=be(T);var A=se(I,1),S=se(T,1);for(T=se(T,2),I=se(I,2);!U(T);){var E=S.add(T);0>=E.l(C)&&(A=A.add(I),S=E),T=se(T,1),I=se(I,1)}return v=K(C,A.j(v)),new Z(A,v)}for(A=y;0<=C.l(v);){for(I=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=m(I),E=S.j(v);j(E)||0<E.l(C);)I-=T,S=m(I),E=S.j(v);U(S)&&(S=x),A=A.add(S),C=K(C,E)}return new Z(A,C)}n.A=function(C){return le(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&C.i(T);return new a(I,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|C.i(T);return new a(I,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^C.i(T);return new a(I,this.h^C.h)};function be(C){for(var v=C.g.length+1,I=[],T=0;T<v;T++)I[T]=C.i(T)<<1|C.i(T-1)>>>31;return new a(I,C.h)}function se(C,v){var I=v>>5;v%=32;for(var T=C.g.length-I,A=[],S=0;S<T;S++)A[S]=0<v?C.i(S+I)>>>v|C.i(S+I+1)<<32-v:C.i(S+I);return new a(A,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,il=Op.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=_,zn=Op.Integer=a}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nn={};var sl,ol,Ii,al,Ds,Sa,cl,ul,ll;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,d){return s==Array.prototype||s==Object.prototype||(s[l]=d.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof Aa=="object"&&Aa];for(var l=0;l<s.length;++l){var d=s[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(s,l){if(l)e:{var d=r;s=s.split(".");for(var g=0;g<s.length-1;g++){var P=s[g];if(!(P in d))break e;d=d[P]}s=s[s.length-1],g=d[s],l=l(g),l!=g&&l!=null&&e(d,s,{configurable:!0,writable:!0,value:l})}}function o(s,l){s instanceof String&&(s+="");var d=0,g=!1,P={next:function(){if(!g&&d<s.length){var k=d++;return{value:l(k,s[k]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(s){return s||function(){return o(this,function(l,d){return d})}});var a=a||{},h=this||self;function p(s){var l=typeof s;return l=l!="object"?l:s?Array.isArray(s)?"array":l:"null",l=="array"||l=="object"&&typeof s.length=="number"}function m(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}function _(s,l,d){return s.call.apply(s.bind,arguments)}function y(s,l,d){if(!s)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),s.apply(l,P)}}return function(){return s.apply(l,arguments)}}function x(s,l,d){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:y,x.apply(null,arguments)}function D(s,l){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),s.apply(this,g)}}function U(s,l){function d(){}d.prototype=l.prototype,s.aa=l.prototype,s.prototype=new d,s.prototype.constructor=s,s.Qb=function(g,P,k){for(var M=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)M[ce-2]=arguments[ce];return l.prototype[P].apply(g,M)}}function j(s){let l=s.length;if(0<l){let d=Array(l);for(let g=0;g<l;g++)d[g]=s[g];return d}return[]}function O(s,l){for(let d=1;d<arguments.length;d++){let g=arguments[d];if(p(g)){let P=s.length||0,k=g.length||0;s.length=P+k;for(let M=0;M<k;M++)s[P+M]=g[M]}else s.push(g)}}class K{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Y(s){return/^[\s\xa0]*$/.test(s)}function Z(){var s=h.navigator;return s&&(s=s.userAgent)?s:""}function le(s){return le[" "](s),s}le[" "]=function(){};var be=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function se(s,l,d){for(let g in s)l.call(d,s[g],g,s)}function C(s,l){for(let d in s)l.call(void 0,s[d],d,s)}function v(s){let l={};for(let d in s)l[d]=s[d];return l}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(s,l){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)s[d]=g[d];for(let k=0;k<I.length;k++)d=I[k],Object.prototype.hasOwnProperty.call(g,d)&&(s[d]=g[d])}}function A(s){var l=1;s=s.split(":");let d=[];for(;0<l&&s.length;)d.push(s.shift()),l--;return s.length&&d.push(s.join(":")),d}function S(s){h.setTimeout(()=>{throw s},0)}function E(){var s=hn;let l=null;return s.g&&(l=s.g,s.g=s.g.next,s.g||(s.h=null),l.next=null),l}class ht{constructor(){this.h=this.g=null}add(l,d){let g=un.get();g.set(l,d),this.h?this.h.next=g:this.g=g,this.h=g}}var un=new K(()=>new Gi,s=>s.reset());class Gi{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ln,zt=!1,hn=new ht,et=()=>{let s=h.Promise.resolve(void 0);ln=()=>{s.then(dn)}};var dn=()=>{for(var s;s=E();){try{s.h.call(s.g)}catch(d){S(d)}var l=un;l.j(s),100>l.h&&(l.h++,s.next=l.g,l.g=s)}zt=!1};function $e(){this.s=this.s,this.C=this.C}$e.prototype.s=!1,$e.prototype.ma=function(){this.s||(this.s=!0,this.N())},$e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(s,l){this.type=s,this.g=this.target=l,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let d=()=>{};h.addEventListener("test",d,l),h.removeEventListener("test",d,l)}catch{}return s}();function dt(s,l){if(De.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var d=this.type=s.type,g=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=l,l=s.relatedTarget){if(be){e:{try{le(l.nodeName);var P=!0;break e}catch{}P=!1}P||(l=null)}}else d=="mouseover"?l=s.fromElement:d=="mouseout"&&(l=s.toElement);this.relatedTarget=l,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:io[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&dt.aa.h.call(this)}}U(dt,De);var io={2:"touch",3:"pen",4:"mouse"};dt.prototype.h=function(){dt.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),Wi=0;function bc(s,l,d,g,P){this.listener=s,this.proxy=null,this.src=l,this.type=d,this.capture=!!g,this.ha=P,this.key=++Wi,this.da=this.fa=!1}function pn(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function mn(s){this.src=s,this.g={},this.h=0}mn.prototype.add=function(s,l,d,g,P){var k=s.toString();s=this.g[k],s||(s=this.g[k]=[],this.h++);var M=Hi(s,l,g,P);return-1<M?(l=s[M],d||(l.fa=!1)):(l=new bc(l,this.src,k,!!g,P),l.fa=d,s.push(l)),l};function gn(s,l){var d=l.type;if(d in s.g){var g=s.g[d],P=Array.prototype.indexOf.call(g,l,void 0),k;(k=0<=P)&&Array.prototype.splice.call(g,P,1),k&&(pn(l),s.g[d].length==0&&(delete s.g[d],s.h--))}}function Hi(s,l,d,g){for(var P=0;P<s.length;++P){var k=s[P];if(!k.da&&k.listener==l&&k.capture==!!d&&k.ha==g)return P}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),tt={};function so(s,l,d,g,P){if(g&&g.once)return Ki(s,l,d,g,P);if(Array.isArray(l)){for(var k=0;k<l.length;k++)so(s,l[k],d,g,P);return null}return d=Te(d),s&&s[Tt]?s.K(l,d,m(g)?!!g.capture:!!g,P):je(s,l,d,!1,g,P)}function je(s,l,d,g,P,k){if(!l)throw Error("Invalid event type");var M=m(P)?!!P.capture:!!P,ce=ft(s);if(ce||(s[Me]=ce=new mn(s)),d=ce.add(l,d,g,M,k),d.proxy)return d;if(g=Mr(),d.proxy=g,g.src=s,g.listener=d,s.addEventListener)fn||(P=M),P===void 0&&(P=!1),s.addEventListener(l.toString(),g,P);else if(s.attachEvent)s.attachEvent(nt(l.toString()),g);else if(s.addListener&&s.removeListener)s.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Mr(){function s(d){return l.call(s.src,s.listener,d)}let l=At;return s}function Ki(s,l,d,g,P){if(Array.isArray(l)){for(var k=0;k<l.length;k++)Ki(s,l[k],d,g,P);return null}return d=Te(d),s&&s[Tt]?s.L(l,d,m(g)?!!g.capture:!!g,P):je(s,l,d,!0,g,P)}function Qi(s,l,d,g,P){if(Array.isArray(l))for(var k=0;k<l.length;k++)Qi(s,l[k],d,g,P);else g=m(g)?!!g.capture:!!g,d=Te(d),s&&s[Tt]?(s=s.i,l=String(l).toString(),l in s.g&&(k=s.g[l],d=Hi(k,d,g,P),-1<d&&(pn(k[d]),Array.prototype.splice.call(k,d,1),k.length==0&&(delete s.g[l],s.h--)))):s&&(s=ft(s))&&(l=s.g[l.toString()],s=-1,l&&(s=Hi(l,d,g,P)),(d=-1<s?l[s]:null)&&ee(d))}function ee(s){if(typeof s!="number"&&s&&!s.da){var l=s.src;if(l&&l[Tt])gn(l.i,s);else{var d=s.type,g=s.proxy;l.removeEventListener?l.removeEventListener(d,g,s.capture):l.detachEvent?l.detachEvent(nt(d),g):l.addListener&&l.removeListener&&l.removeListener(g),(d=ft(l))?(gn(d,s),d.h==0&&(d.src=null,l[Me]=null)):pn(s)}}}function nt(s){return s in tt?tt[s]:tt[s]="on"+s}function At(s,l){if(s.da)s=!0;else{l=new dt(l,this);var d=s.listener,g=s.ha||s.src;s.fa&&ee(s),s=d.call(g,l)}return s}function ft(s){return s=s[Me],s instanceof mn?s:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(s){return typeof s=="function"?s:(s[_e]||(s[_e]=function(l){return s.handleEvent(l)}),s[_e])}function Ae(){$e.call(this),this.i=new mn(this),this.M=this,this.F=null}U(Ae,$e),Ae.prototype[Tt]=!0,Ae.prototype.removeEventListener=function(s,l,d,g){Qi(this,s,l,d,g)};function Ne(s,l){var d,g=s.F;if(g)for(d=[];g;g=g.F)d.push(g);if(s=s.M,g=l.type||l,typeof l=="string")l=new De(l,s);else if(l instanceof De)l.target=l.target||s;else{var P=l;l=new De(g,s),T(l,P)}if(P=!0,d)for(var k=d.length-1;0<=k;k--){var M=l.g=d[k];P=St(M,g,!0,l)&&P}if(M=l.g=s,P=St(M,g,!0,l)&&P,P=St(M,g,!1,l)&&P,d)for(k=0;k<d.length;k++)M=l.g=d[k],P=St(M,g,!1,l)&&P}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var s=this.i,l;for(l in s.g){for(var d=s.g[l],g=0;g<d.length;g++)pn(d[g]);delete s.g[l],s.h--}}this.F=null},Ae.prototype.K=function(s,l,d,g){return this.i.add(String(s),l,!1,d,g)},Ae.prototype.L=function(s,l,d,g){return this.i.add(String(s),l,!0,d,g)};function St(s,l,d,g){if(l=s.i.g[String(l)],!l)return!0;l=l.concat();for(var P=!0,k=0;k<l.length;++k){var M=l[k];if(M&&!M.da&&M.capture==d){var ce=M.listener,Se=M.ha||M.src;M.fa&&gn(s.i,M),P=ce.call(Se,g)!==!1&&P}}return P&&!g.defaultPrevented}function Fe(s,l,d){if(typeof s=="function")d&&(s=x(s,d));else if(s&&typeof s.handleEvent=="function")s=x(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:h.setTimeout(s,l||0)}function oo(s){s.g=Fe(()=>{s.g=null,s.i&&(s.i=!1,oo(s))},s.l);let l=s.h;s.h=null,s.m.apply(null,l)}class ao extends $e{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:oo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(s){$e.call(this),this.h=s,this.g={}}U(yn,$e);var Fr=[];function co(s){se(s.g,function(l,d){this.g.hasOwnProperty(d)&&ee(l)},s),s.g={}}yn.prototype.N=function(){yn.aa.N.call(this),co(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ur=h.JSON.stringify,Tc=h.JSON.parse,Ac=class{stringify(s){return h.JSON.stringify(s,void 0)}parse(s){return h.JSON.parse(s,void 0)}};function pt(){}pt.prototype.h=null;function uo(s){return s.h||(s.h=s.i())}function lo(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ji(){De.call(this,"d")}U(Ji,De);function Yi(){De.call(this,"c")}U(Yi,De);var mt={},ho=null;function Br(){return ho=ho||new Ae}mt.La="serverreachability";function Ct(s){De.call(this,mt.La,s)}U(Ct,De);function Xn(s){let l=Br();Ne(l,new Ct(l))}mt.STAT_EVENT="statevent";function fo(s,l){De.call(this,mt.STAT_EVENT,s),this.stat=l}U(fo,De);function Ue(s){let l=Br();Ne(l,new fo(l,s))}mt.Ma="timingevent";function qr(s,l){De.call(this,mt.Ma,s),this.size=l}U(qr,De);function Zn(s,l){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){s()},l)}function er(){this.g=!0}er.prototype.xa=function(){this.g=!1};function Sc(s,l,d,g,P,k){s.info(function(){if(s.g)if(k)for(var M="",ce=k.split("&"),Se=0;Se<ce.length;Se++){var re=ce[Se].split("=");if(1<re.length){var ke=re[0];re=re[1];var Oe=ke.split("_");M=2<=Oe.length&&Oe[1]=="type"?M+(ke+"="+re+"&"):M+(ke+"=redacted&")}}else M=null;else M=k;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+l+`
`+d+`
`+M})}function Cc(s,l,d,g,P,k,M){s.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+l+`
`+d+`
`+k+" "+M})}function wn(s,l,d,g){s.info(function(){return"XMLHTTP TEXT ("+l+"): "+Pc(s,d)+(g?" "+g:"")})}function he(s,l){s.info(function(){return"TIMEOUT: "+l})}er.prototype.info=function(){};function Pc(s,l){if(!s.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(s=0;s<d.length;s++)if(Array.isArray(d[s])){var g=d[s];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if(k!="noop"&&k!="stop"&&k!="close")for(var M=1;M<P.length;M++)P[M]=""}}}}return Ur(d)}catch{return l}}var $r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},po={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xi;function jr(){}U(jr,pt),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},Xi=new jr;function Pt(s,l,d,g){this.j=s,this.i=l,this.l=d,this.R=g||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zr}function zr(){this.i=null,this.g="",this.h=!1}var _n={},Gr={};function vn(s,l,d){s.L=1,s.v=Jr(ze(l)),s.m=d,s.P=!0,pe(s,null)}function pe(s,l){s.F=Date.now(),Wr(s),s.A=ze(s.v);var d=s.A,g=s.R;Array.isArray(g)||(g=[String(g)]),So(d.i,"t",g),s.C=0,d=s.j.J,s.h=new zr,s.g=ds(s.j,d?l:null,!s.m),0<s.O&&(s.M=new ao(x(s.Y,s,s.g),s.O)),l=s.U,d=s.g,g=s.ca;var P="readystatechange";Array.isArray(P)||(P&&(Fr[0]=P.toString()),P=Fr);for(var k=0;k<P.length;k++){var M=so(d,P[k],g||l.handleEvent,!1,l.h||l);if(!M)break;l.g[M.key]=M}l=s.H?v(s.H):{},s.m?(s.u||(s.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,l)):(s.u="GET",s.g.ea(s.A,s.u,null,l)),Xn(),Sc(s.i,s.u,s.A,s.l,s.R,s.m)}Pt.prototype.ca=function(s){s=s.target;let l=this.M;l&&yt(s)==3?l.j():this.Y(s)},Pt.prototype.Y=function(s){try{if(s==this.g)e:{let Oe=yt(this.g);var l=this.g.Ba();let Kt=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||Vo(this.g)))){this.J||Oe!=4||l==7||(l==8||0>=Kt?Xn(3):Xn(2)),es(this);var d=this.g.Z();this.X=d;t:if(mo(this)){var g=Vo(this.g);s="";var P=g.length,k=yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),tr(this);var M="";break t}this.h.i=new h.TextDecoder}for(l=0;l<P;l++)this.h.h=!0,s+=this.h.i.decode(g[l],{stream:!(k&&l==P-1)});g.length=0,this.h.g+=s,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=d==200,Cc(this.i,this.u,this.A,this.l,this.R,Oe,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,Se=this.g;if((ce=Se.g?Se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ce)){var re=ce;break t}}re=null}if(d=re)wn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hr(this,d);else{this.o=!1,this.s=3,Ue(12),Gt(this),tr(this);break e}}if(this.P){d=!0;let Je;for(;!this.J&&this.C<M.length;)if(Je=Rc(this,M),Je==Gr){Oe==4&&(this.s=4,Ue(14),d=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==_n){this.s=4,Ue(15),wn(this.i,this.l,M,"[Invalid Chunk]"),d=!1;break}else wn(this.i,this.l,Je,null),Hr(this,Je);if(mo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||M.length!=0||this.h.h||(this.s=1,Ue(16),d=!1),this.o=this.o&&d,!d)wn(this.i,this.l,M,"[Invalid Chunked Response]"),Gt(this),tr(this);else if(0<M.length&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.ba&&!ke.M&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),ur(ke),ke.M=!0,Ue(11))}}else wn(this.i,this.l,M,null),Hr(this,M);Oe==4&&Gt(this),this.o&&!this.J&&(Oe==4?cs(this.j,this):(this.o=!1,Wr(this)))}else Uc(this.g),d==400&&0<M.indexOf("Unknown SID")?(this.s=3,Ue(12)):(this.s=0,Ue(13)),Gt(this),tr(this)}}}catch{}finally{}};function mo(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function Rc(s,l){var d=s.C,g=l.indexOf(`
`,d);return g==-1?Gr:(d=Number(l.substring(d,g)),isNaN(d)?_n:(g+=1,g+d>l.length?Gr:(l=l.slice(g,g+d),s.C=g+d,l)))}Pt.prototype.cancel=function(){this.J=!0,Gt(this)};function Wr(s){s.S=Date.now()+s.I,Zi(s,s.I)}function Zi(s,l){if(s.B!=null)throw Error("WatchDog timer not null");s.B=Zn(x(s.ba,s),l)}function es(s){s.B&&(h.clearTimeout(s.B),s.B=null)}Pt.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(he(this.i,this.A),this.L!=2&&(Xn(),Ue(17)),Gt(this),this.s=2,tr(this)):Zi(this,this.S-s)};function tr(s){s.j.G==0||s.J||cs(s.j,s)}function Gt(s){es(s);var l=s.M;l&&typeof l.ma=="function"&&l.ma(),s.M=null,co(s.U),s.g&&(l=s.g,s.g=null,l.abort(),l.ma())}function Hr(s,l){try{var d=s.j;if(d.G!=0&&(d.g==s||ns(d.h,s))){if(!s.K&&ns(d.h,s)&&d.G==3){try{var g=d.Da.g.parse(l)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<s.F)ti(d),ar(d);else break e;ei(d),Ue(18)}}else d.za=P[1],0<d.za-d.T&&37500>P[2]&&d.F&&d.v==0&&!d.C&&(d.C=Zn(x(d.Za,d),6e3));if(1>=yo(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else xt(d,11)}else if((s.K||d.g==s)&&ti(d),!Y(l))for(P=d.Da.g.parse(l),l=0;l<P.length;l++){let re=P[l];if(d.T=re[0],re=re[1],d.G==2)if(re[0]=="c"){d.K=re[1],d.ia=re[2];let ke=re[3];ke!=null&&(d.la=ke,d.j.info("VER="+d.la));let Oe=re[4];Oe!=null&&(d.Aa=Oe,d.j.info("SVER="+d.Aa));let Kt=re[5];Kt!=null&&typeof Kt=="number"&&0<Kt&&(g=1.5*Kt,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;let Je=s.g;if(Je){let ni=Je.g?Je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var k=g.h;k.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(rs(k,k.h),k.h=null))}if(g.D){let ps=Je.g?Je.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(g.ya=ps,de(g.I,g.D,ps))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-s.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var M=s;if(g.qa=hs(g,g.J?g.ia:null,g.W),M.K){wo(g.h,M);var ce=M,Se=g.L;Se&&(ce.I=Se),ce.B&&(es(ce),Wr(ce)),g.g=M}else as(g);0<d.i.length&&Xr(d)}else re[0]!="stop"&&re[0]!="close"||xt(d,7);else d.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?xt(d,7):Cn(d):re[0]!="noop"&&d.l&&d.l.ta(re),d.v=0)}}Xn(4)}catch{}}var kc=class{constructor(s,l){this.g=s,this.map=l}};function ts(s){this.l=s||10,h.PerformanceNavigationTiming?(s=h.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function go(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function yo(s){return s.h?1:s.g?s.g.size:0}function ns(s,l){return s.h?s.h==l:s.g?s.g.has(l):!1}function rs(s,l){s.g?s.g.add(l):s.h=l}function wo(s,l){s.h&&s.h==l?s.h=null:s.g&&s.g.has(l)&&s.g.delete(l)}ts.prototype.cancel=function(){if(this.i=_o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function _o(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let l=s.i;for(let d of s.g.values())l=l.concat(d.D);return l}return j(s.i)}function xc(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(p(s)){for(var l=[],d=s.length,g=0;g<d;g++)l.push(s[g]);return l}l=[],d=0;for(g in s)l[d++]=s[g];return l}function vo(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(p(s)||typeof s=="string"){var l=[];s=s.length;for(var d=0;d<s;d++)l.push(d);return l}l=[],d=0;for(let g in s)l[d++]=g;return l}}}function Io(s,l){if(s.forEach&&typeof s.forEach=="function")s.forEach(l,void 0);else if(p(s)||typeof s=="string")Array.prototype.forEach.call(s,l,void 0);else for(var d=vo(s),g=xc(s),P=g.length,k=0;k<P;k++)l.call(void 0,g[k],d&&d[k],s)}var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dc(s,l){if(s){s=s.split("&");for(var d=0;d<s.length;d++){var g=s[d].indexOf("="),P=null;if(0<=g){var k=s[d].substring(0,g);P=s[d].substring(g+1)}else k=s[d];l(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Wt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Wt){this.h=s.h,nr(this,s.j),this.o=s.o,this.g=s.g,Kr(this,s.s),this.l=s.l;var l=s.i,d=new En;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),Qr(this,d),this.m=s.m}else s&&(l=String(s).match(is))?(this.h=!1,nr(this,l[1]||"",!0),this.o=rr(l[2]||""),this.g=rr(l[3]||"",!0),Kr(this,l[4]),this.l=rr(l[5]||"",!0),Qr(this,l[6]||"",!0),this.m=rr(l[7]||"")):(this.h=!1,this.i=new En(null,this.h))}Wt.prototype.toString=function(){var s=[],l=this.j;l&&s.push(ir(l,Eo,!0),":");var d=this.g;return(d||l=="file")&&(s.push("//"),(l=this.o)&&s.push(ir(l,Eo,!0),"@"),s.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&s.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&s.push("/"),s.push(ir(d,d.charAt(0)=="/"?In:Oc,!0))),(d=this.i.toString())&&s.push("?",d),(d=this.m)&&s.push("#",ir(d,bo)),s.join("")};function ze(s){return new Wt(s)}function nr(s,l,d){s.j=d?rr(l,!0):l,s.j&&(s.j=s.j.replace(/:$/,""))}function Kr(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.s=l}else s.s=null}function Qr(s,l,d){l instanceof En?(s.i=l,Lc(s.i,s.h)):(d||(l=ir(l,Vc)),s.i=new En(l,s.h))}function de(s,l,d){s.i.set(l,d)}function Jr(s){return de(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function rr(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function ir(s,l,d){return typeof s=="string"?(s=encodeURI(s).replace(l,Nc),d&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Nc(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Eo=/[#\/\?@]/g,Oc=/[#\?:]/g,In=/[#\?]/g,Vc=/[#\?@]/g,bo=/#/g;function En(s,l){this.h=this.g=null,this.i=s||null,this.j=!!l}function Rt(s){s.g||(s.g=new Map,s.h=0,s.i&&Dc(s.i,function(l,d){s.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=En.prototype,n.add=function(s,l){Rt(this),this.i=null,s=bn(this,s);var d=this.g.get(s);return d||this.g.set(s,d=[]),d.push(l),this.h+=1,this};function To(s,l){Rt(s),l=bn(s,l),s.g.has(l)&&(s.i=null,s.h-=s.g.get(l).length,s.g.delete(l))}function Ao(s,l){return Rt(s),l=bn(s,l),s.g.has(l)}n.forEach=function(s,l){Rt(this),this.g.forEach(function(d,g){d.forEach(function(P){s.call(l,P,g,this)},this)},this)},n.na=function(){Rt(this);let s=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let g=0;g<l.length;g++){let P=s[g];for(let k=0;k<P.length;k++)d.push(l[g])}return d},n.V=function(s){Rt(this);let l=[];if(typeof s=="string")Ao(this,s)&&(l=l.concat(this.g.get(bn(this,s))));else{s=Array.from(this.g.values());for(let d=0;d<s.length;d++)l=l.concat(s[d])}return l},n.set=function(s,l){return Rt(this),this.i=null,s=bn(this,s),Ao(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[l]),this.h+=1,this},n.get=function(s,l){return s?(s=this.V(s),0<s.length?String(s[0]):l):l};function So(s,l,d){To(s,l),0<d.length&&(s.i=null,s.g.set(bn(s,l),j(d)),s.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var g=l[d];let k=encodeURIComponent(String(g)),M=this.V(g);for(g=0;g<M.length;g++){var P=k;M[g]!==""&&(P+="="+encodeURIComponent(String(M[g]))),s.push(P)}}return this.i=s.join("&")};function bn(s,l){return l=String(l),s.j&&(l=l.toLowerCase()),l}function Lc(s,l){l&&!s.j&&(Rt(s),s.i=null,s.g.forEach(function(d,g){var P=g.toLowerCase();g!=P&&(To(this,g),So(this,P,d))},s)),s.j=l}function Mc(s,l){let d=new er;if(h.Image){let g=new Image;g.onload=D(kt,d,"TestLoadImage: loaded",!0,l,g),g.onerror=D(kt,d,"TestLoadImage: error",!1,l,g),g.onabort=D(kt,d,"TestLoadImage: abort",!1,l,g),g.ontimeout=D(kt,d,"TestLoadImage: timeout",!1,l,g),h.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=s}else l(!1)}function Tn(s,l){let d=new er,g=new AbortController,P=setTimeout(()=>{g.abort(),kt(d,"TestPingServer: timeout",!1,l)},1e4);fetch(s,{signal:g.signal}).then(k=>{clearTimeout(P),k.ok?kt(d,"TestPingServer: ok",!0,l):kt(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(P),kt(d,"TestPingServer: error",!1,l)})}function kt(s,l,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function Fc(){this.g=new Ac}function Co(s,l,d){let g=d||"";try{Io(s,function(P,k){let M=P;m(P)&&(M=Ur(P)),l.push(g+k+"="+encodeURIComponent(M))})}catch(P){throw l.push(g+"type="+encodeURIComponent("_badmap")),P}}function sr(s){this.l=s.Ub||null,this.j=s.eb||!1}U(sr,pt),sr.prototype.g=function(){return new rt(this.l,this.j)},sr.prototype.i=function(s){return function(){return s}}({});function rt(s,l){Ae.call(this),this.D=s,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(rt,Ae),n=rt.prototype,n.open=function(s,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=l,this.readyState=1,gt(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(l.body=s),(this.D||h).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,An(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,gt(this)),this.g&&(this.readyState=3,gt(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Po(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function Po(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var l=s.value?s.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!s.done}))&&(this.response=this.responseText+=l)}s.done?An(this):gt(this),this.readyState==3&&Po(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,An(this))},n.Qa=function(s){this.g&&(this.response=s,An(this))},n.ga=function(){this.g&&An(this)};function An(s){s.readyState=4,s.l=null,s.j=null,s.v=null,gt(s)}n.setRequestHeader=function(s,l){this.u.append(s,l)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,s.push(d[0]+": "+d[1]),d=l.next();return s.join(`\r
`)};function gt(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(rt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function Ro(s){let l="";return se(s,function(d,g){l+=g,l+=":",l+=d,l+=`\r
`}),l}function ss(s,l,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Ro(d),typeof s=="string"?d!=null&&encodeURIComponent(String(d)):de(s,l,d))}function me(s){Ae.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(me,Ae);var ko=/^https?$/i,Sn=["POST","PUT"];n=me.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,l,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);l=l?l.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xi.g(),this.v=this.o?uo(this.o):uo(Xi),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(l,String(s),!0),this.B=!1}catch(k){xo(this,k);return}if(s=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let k of g.keys())d.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(k=>k.toLowerCase()=="content-type"),P=h.FormData&&s instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Sn,l,void 0))||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,M]of d)this.g.setRequestHeader(k,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oo(this),this.u=!0,this.g.send(s),this.u=!1}catch(k){xo(this,k)}};function xo(s,l){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=l,s.m=5,Do(s),Yr(s)}function Do(s){s.A||(s.A=!0,Ne(s,"complete"),Ne(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,Ne(this,"complete"),Ne(this,"abort"),Yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?No(this):this.bb())},n.bb=function(){No(this)};function No(s){if(s.h&&typeof a<"u"&&(!s.v[1]||yt(s)!=4||s.Z()!=2)){if(s.u&&yt(s)==4)Fe(s.Ea,0,s);else if(Ne(s,"readystatechange"),yt(s)==4){s.h=!1;try{let M=s.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var g;if(g=M===0){var P=String(s.D).match(is)[1]||null;!P&&h.self&&h.self.location&&(P=h.self.location.protocol.slice(0,-1)),g=!ko.test(P?P.toLowerCase():"")}d=g}if(d)Ne(s,"complete"),Ne(s,"success");else{s.m=6;try{var k=2<yt(s)?s.g.statusText:""}catch{k=""}s.l=k+" ["+s.Z()+"]",Do(s)}}finally{Yr(s)}}}}function Yr(s,l){if(s.g){Oo(s);let d=s.g,g=s.v[0]?()=>{}:null;s.g=null,s.v=null,l||Ne(s,"ready");try{d.onreadystatechange=g}catch{}}}function Oo(s){s.I&&(h.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function yt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var l=this.g.responseText;return s&&l.indexOf(s)==0&&(l=l.substring(s.length)),Tc(l)}};function Vo(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function Uc(s){let l={};s=(s.g&&2<=yt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<s.length;g++){if(Y(s[g]))continue;var d=A(s[g]);let P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let k=l[P]||[];l[P]=k,k.push(d)}C(l,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function or(s,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[s]||l}function Lo(s){this.Aa=0,this.i=[],this.j=new er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=or("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=or("baseRetryDelayMs",5e3,s),this.cb=or("retryDelaySeedMs",1e4,s),this.Wa=or("forwardChannelMaxRetries",2,s),this.wa=or("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new ts(s&&s.concurrentRequestLimit),this.Da=new Fc,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lo.prototype,n.la=8,n.G=1,n.connect=function(s,l,d,g){Ue(0),this.W=s,this.H=l||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=hs(this,null,this.W),Xr(this)};function Cn(s){if(Mo(s),s.G==3){var l=s.U++,d=ze(s.I);if(de(d,"SID",s.K),de(d,"RID",l),de(d,"TYPE","terminate"),cr(s,d),l=new Pt(s,s.j,l),l.L=2,l.v=Jr(ze(d)),d=!1,h.navigator&&h.navigator.sendBeacon)try{d=h.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&h.Image&&(new Image().src=l.v,d=!0),d||(l.g=ds(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Wr(l)}ls(s)}function ar(s){s.g&&(ur(s),s.g.cancel(),s.g=null)}function Mo(s){ar(s),s.u&&(h.clearTimeout(s.u),s.u=null),ti(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&h.clearTimeout(s.s),s.s=null)}function Xr(s){if(!go(s.h)&&!s.s){s.s=!0;var l=s.Ga;ln||et(),zt||(ln(),zt=!0),hn.add(l,s),s.B=0}}function Bc(s,l){return yo(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=l.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=Zn(x(s.Ga,s,l),us(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let P=new Pt(this,this.j,s),k=this.o;if(this.S&&(k?(k=v(k),T(k,this.S)):k=this.S),this.m!==null||this.O||(P.H=k,k=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(l+=g,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=Zr(this,P,l),d=ze(this.I),de(d,"RID",s),de(d,"CVER",22),this.D&&de(d,"X-HTTP-Session-Id",this.D),cr(this,d),k&&(this.O?l="headers="+encodeURIComponent(String(Ro(k)))+"&"+l:this.m&&ss(d,this.m,k)),rs(this.h,P),this.Ua&&de(d,"TYPE","init"),this.P?(de(d,"$req",l),de(d,"SID","null"),P.T=!0,vn(P,d,null)):vn(P,d,l),this.G=2}}else this.G==3&&(s?os(this,s):this.i.length==0||go(this.h)||os(this))};function os(s,l){var d;l?d=l.l:d=s.U++;let g=ze(s.I);de(g,"SID",s.K),de(g,"RID",d),de(g,"AID",s.T),cr(s,g),s.m&&s.o&&ss(g,s.m,s.o),d=new Pt(s,s.j,d,s.B+1),s.m===null&&(d.H=s.o),l&&(s.i=l.D.concat(s.i)),l=Zr(s,d,1e3),d.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),rs(s.h,d),vn(d,g,l)}function cr(s,l){s.H&&se(s.H,function(d,g){de(l,g,d)}),s.l&&Io({},function(d,g){de(l,g,d)})}function Zr(s,l,d){d=Math.min(s.i.length,d);var g=s.l?x(s.l.Na,s.l,s):null;e:{var P=s.i;let k=-1;for(;;){let M=["count="+d];k==-1?0<d?(k=P[0].g,M.push("ofs="+k)):k=0:M.push("ofs="+k);let ce=!0;for(let Se=0;Se<d;Se++){let re=P[Se].g,ke=P[Se].map;if(re-=k,0>re)k=Math.max(0,P[Se].g-100),ce=!1;else try{Co(ke,M,"req"+re+"_")}catch{g&&g(ke)}}if(ce){g=M.join("&");break e}}}return s=s.i.splice(0,d),l.D=s,g}function as(s){if(!s.g&&!s.u){s.Y=1;var l=s.Fa;ln||et(),zt||(ln(),zt=!0),hn.add(l,s),s.v=0}}function ei(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=Zn(x(s.Fa,s),us(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,lr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=Zn(x(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ue(10),ar(this),lr(this))};function ur(s){s.A!=null&&(h.clearTimeout(s.A),s.A=null)}function lr(s){s.g=new Pt(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var l=ze(s.qa);de(l,"RID","rpc"),de(l,"SID",s.K),de(l,"AID",s.T),de(l,"CI",s.F?"0":"1"),!s.F&&s.ja&&de(l,"TO",s.ja),de(l,"TYPE","xmlhttp"),cr(s,l),s.m&&s.o&&ss(l,s.m,s.o),s.L&&(s.g.I=s.L);var d=s.g;s=s.ia,d.L=1,d.v=Jr(ze(l)),d.m=null,d.P=!0,pe(d,s)}n.Za=function(){this.C!=null&&(this.C=null,ar(this),ei(this),Ue(19))};function ti(s){s.C!=null&&(h.clearTimeout(s.C),s.C=null)}function cs(s,l){var d=null;if(s.g==l){ti(s),ur(s),s.g=null;var g=2}else if(ns(s.h,l))d=l.D,wo(s.h,l),g=1;else return;if(s.G!=0){if(l.o)if(g==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var P=s.B;g=Br(),Ne(g,new qr(g,d)),Xr(s)}else as(s);else if(P=l.s,P==3||P==0&&0<l.X||!(g==1&&Bc(s,l)||g==2&&ei(s)))switch(d&&0<d.length&&(l=s.h,l.i=l.i.concat(d)),P){case 1:xt(s,5);break;case 4:xt(s,10);break;case 3:xt(s,6);break;default:xt(s,2)}}}function us(s,l){let d=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(d*=2),d*l}function xt(s,l){if(s.j.info("Error code "+l),l==2){var d=x(s.fb,s),g=s.Xa;let P=!g;g=new Wt(g||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||nr(g,"https"),Jr(g),P?Mc(g.toString(),d):Tn(g.toString(),d)}else Ue(2);s.G=0,s.l&&s.l.sa(l),ls(s),Mo(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function ls(s){if(s.G=0,s.ka=[],s.l){let l=_o(s.h);(l.length!=0||s.i.length!=0)&&(O(s.ka,l),O(s.ka,s.i),s.h.i.length=0,j(s.i),s.i.length=0),s.l.ra()}}function hs(s,l,d){var g=d instanceof Wt?ze(d):new Wt(d);if(g.g!="")l&&(g.g=l+"."+g.g),Kr(g,g.s);else{var P=h.location;g=P.protocol,l=l?l+"."+P.hostname:P.hostname,P=+P.port;var k=new Wt(null);g&&nr(k,g),l&&(k.g=l),P&&Kr(k,P),d&&(k.l=d),g=k}return d=s.D,l=s.ya,d&&l&&de(g,d,l),de(g,"VER",s.la),cr(s,g),g}function ds(s,l,d){if(l&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=s.Ca&&!s.pa?new me(new sr({eb:d})):new me(s.pa),l.Ha(s.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fs(){}n=fs.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hr(){}hr.prototype.g=function(s,l){return new Ge(s,l)};function Ge(s,l){Ae.call(this),this.g=new Lo(l),this.l=s,this.h=l&&l.messageUrlParams||null,s=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(s?s["X-WebChannel-Content-Type"]=l.messageContentType:s={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(s?s["X-WebChannel-Client-Profile"]=l.va:s={"X-WebChannel-Client-Profile":l.va}),this.g.S=s,(s=l&&l.Sb)&&!Y(s)&&(this.g.m=s),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Y(l)&&(this.g.D=l,s=this.h,s!==null&&l in s&&(s=this.h,l in s&&delete s[l])),this.j=new Pn(this)}U(Ge,Ae),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){Cn(this.g)},Ge.prototype.o=function(s){var l=this.g;if(typeof s=="string"){var d={};d.__data__=s,s=d}else this.u&&(d={},d.__data__=Ur(s),s=d);l.i.push(new kc(l.Ya++,s)),l.G==3&&Xr(l)},Ge.prototype.N=function(){this.g.l=null,delete this.j,Cn(this.g),delete this.g,Ge.aa.N.call(this)};function Ht(s){Ji.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var l=s.__sm__;if(l){e:{for(let d in l){s=d;break e}s=void 0}(this.i=s)&&(s=this.i,l=l!==null&&s in l?l[s]:void 0),this.data=l}else this.data=s}U(Ht,Ji);function Fo(){Yi.call(this),this.status=1}U(Fo,Yi);function Pn(s){this.g=s}U(Pn,fs),Pn.prototype.ua=function(){Ne(this.g,"a")},Pn.prototype.ta=function(s){Ne(this.g,new Ht(s))},Pn.prototype.sa=function(s){Ne(this.g,new Fo)},Pn.prototype.ra=function(){Ne(this.g,"b")},hr.prototype.createWebChannel=hr.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,ll=nn.createWebChannelTransport=function(){return new hr},ul=nn.getStatEventTarget=function(){return Br()},cl=nn.Event=mt,Sa=nn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$r.NO_ERROR=0,$r.TIMEOUT=8,$r.HTTP_ERROR=6,Ds=nn.ErrorCode=$r,po.COMPLETE="complete",al=nn.EventType=po,lo.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Ii=nn.WebChannel=lo,ol=nn.FetchXmlHttpFactory=sr,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,sl=nn.XhrIo=me}).apply(typeof Aa<"u"?Aa:typeof self<"u"?self:typeof window<"u"?window:{});var Vp="@firebase/firestore";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var Bi="10.13.1";var Pr=new Vn("@firebase/firestore");function Ns(){return Pr.logLevel}function z(n,...e){if(Pr.logLevel<=te.DEBUG){let t=e.map(Yh);Pr.debug(`Firestore (${Bi}): ${n}`,...t)}}function sn(n,...e){if(Pr.logLevel<=te.ERROR){let t=e.map(Yh);Pr.error(`Firestore (${Bi}): ${n}`,...t)}}function Pi(n,...e){if(Pr.logLevel<=te.WARN){let t=e.map(Yh);Pr.warn(`Firestore (${Bi}): ${n}`,...t)}}function Yh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${Bi}) INTERNAL ASSERTION FAILED: `+n;throw sn(e),new Error(e)}function fe(n,e){n||H()}function Q(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends it{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var xa=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ml=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Le.UNAUTHENTICATED))}shutdown(){}},gl=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yl=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve(),o=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rn,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let p=o;e.enqueueRetryable(()=>b(this,null,function*(){yield p.promise,yield i(this.currentUser)}))},h=p=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){let p=this.t.getImmediate({optional:!0});p?h(p):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rn)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new xa(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Le(e)}},wl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_l=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new wl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Il=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string"),this.R=t.token,new vl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function DI(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Da=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=DI(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function Ri(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var qe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Na=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(),r===void 0?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},we=class n extends Na{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},NI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class n extends Na{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return NI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let h=e[i];if(h==="\\"){if(i+1===e.length)throw new $(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new $(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else h==="`"?(a=!a,i++):h!=="."||a?(r+=h,i++):(o(),i++)}if(o(),a)throw new $(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(we.fromString(e))}static fromName(e){return new n(we.fromString(e).popFirst(5))}static empty(){return new n(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return we.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new we(e.slice()))}};var El=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};El.UNKNOWN_ID=-1;function OI(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new Rr(i,G.empty(),e)}function VI(n){return new Rr(n.readTime,n.key,-1)}var Rr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),G.empty(),-1)}static max(){return new n(J.max(),G.empty(),-1)}};function LI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var MI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Zs(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==MI)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(h=>{++i,h.next(()=>{++o,a&&o===i&&t()},p=>r(p))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),h=0;for(let p=0;p<o;p++){let m=p;t(e[m]).next(_=>{a[m]=_,++h,h===o&&r(a)},_=>i(_))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function FI(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function eo(n){return n.name==="IndexedDbTransactionError"}var gm=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function cc(n){return n==null}function Bs(n){return n===0&&1/n==-1/0}function UI(n){return typeof n=="number"&&Number.isInteger(n)&&!Bs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var BI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qT=[...BI,"documentOverlays"],qI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$I=qI,jI=[...$I,"indexConfiguration","indexState","indexEntries"];var $T=[...jI,"globals"];function Lp(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ym(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ve=class n{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ai(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ai(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ai(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ai(this.root,e,this.comparator,!0)}},Ai=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ut=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ke=class n{constructor(e){this.comparator=e,this.data=new ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oa(this.data.getIterator())}getIteratorFrom(e){return new Oa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Oa=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ft=class n{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ke(st.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ri(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Va=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Va("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var zI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(n){if(fe(!!n),typeof n=="string"){let e=0,t=zI.exec(n);if(fe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ge(n.seconds),nanos:ge(n.nanos)}}function ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wn(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function Xh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Zh(n){let e=n.mapValue.fields.__previous_value__;return Xh(e)?Zh(e):e}function qs(n){let e=on(n.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var Tl=class{constructor(e,t,r,i,o,a,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m}},La=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ca={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function kr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xh(n)?4:_m(n)?9007199254740991:wm(n)?10:11:H()}function $t(n,e){if(n===e)return!0;let t=kr(n);if(t!==kr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qs(n).isEqual(qs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=on(i.timestampValue),h=on(o.timestampValue);return a.seconds===h.seconds&&a.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Wn(i.bytesValue).isEqual(Wn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ge(i.geoPointValue.latitude)===ge(o.geoPointValue.latitude)&&ge(i.geoPointValue.longitude)===ge(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ge(i.integerValue)===ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=ge(i.doubleValue),h=ge(o.doubleValue);return a===h?Bs(a)===Bs(h):isNaN(a)&&isNaN(h)}return!1}(n,e);case 9:return Ri(n.arrayValue.values||[],e.arrayValue.values||[],$t);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},h=o.mapValue.fields||{};if(Lp(a)!==Lp(h))return!1;for(let p in a)if(a.hasOwnProperty(p)&&(h[p]===void 0||!$t(a[p],h[p])))return!1;return!0}(n,e);default:return H()}}function $s(n,e){return(n.values||[]).find(t=>$t(t,e))!==void 0}function ki(n,e){if(n===e)return 0;let t=kr(n),r=kr(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,a){let h=ge(o.integerValue||o.doubleValue),p=ge(a.integerValue||a.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Mp(n.timestampValue,e.timestampValue);case 4:return Mp(qs(n),qs(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,a){let h=Wn(o),p=Wn(a);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let h=o.split("/"),p=a.split("/");for(let m=0;m<h.length&&m<p.length;m++){let _=oe(h[m],p[m]);if(_!==0)return _}return oe(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let h=oe(ge(o.latitude),ge(a.latitude));return h!==0?h:oe(ge(o.longitude),ge(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Fp(n.arrayValue,e.arrayValue);case 10:return function(o,a){var h,p,m,_;let y=o.fields||{},x=a.fields||{},D=(h=y.value)===null||h===void 0?void 0:h.arrayValue,U=(p=x.value)===null||p===void 0?void 0:p.arrayValue,j=oe(((m=D?.values)===null||m===void 0?void 0:m.length)||0,((_=U?.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:Fp(D,U)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ca.mapValue&&a===Ca.mapValue)return 0;if(o===Ca.mapValue)return 1;if(a===Ca.mapValue)return-1;let h=o.fields||{},p=Object.keys(h),m=a.fields||{},_=Object.keys(m);p.sort(),_.sort();for(let y=0;y<p.length&&y<_.length;++y){let x=oe(p[y],_[y]);if(x!==0)return x;let D=ki(h[p[y]],m[_[y]]);if(D!==0)return D}return oe(p.length,_.length)}(n.mapValue,e.mapValue);default:throw H()}}function Mp(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=on(n),r=on(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function Fp(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ki(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function xi(n){return Al(n)}function Al(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=on(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Wn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Al(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${Al(t.fields[a])}`;return i+"}"}(n.mapValue):H()}function Up(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sl(n){return!!n&&"integerValue"in n}function ed(n){return!!n&&"arrayValue"in n}function Bp(n){return!!n&&"nullValue"in n}function qp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ra(n){return!!n&&"mapValue"in n}function wm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Vs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _m(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ra(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vs(t)}setAll(e){let t=st.emptyPath(),r={},i=[];e.forEach((a,h)=>{if(!t.isImmediateParentOf(h)){let p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}a?r[h.lastSegment()]=Vs(a):i.push(h.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ra(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $t(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ra(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Vs(this.value))}};function vm(n){let e=[];return qi(n.fields,(t,r)=>{let i=new st([t]);if(Ra(r)){let o=vm(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Ft(e)}var It=class n{constructor(e,t,r,i,o,a,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=h}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Di=class{constructor(e,t){this.position=e,this.inclusive=t}};function $p(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(a.referenceValue),t.key):r=ki(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function jp(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$t(n.position[t],e.position[t]))return!1;return!0}var xr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function GI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ma=class{},Re=class n extends Ma{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Pl(e,t,r):t==="array-contains"?new xl(e,r):t==="in"?new Dl(e,r):t==="not-in"?new Nl(e,r):t==="array-contains-any"?new Ol(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Rl(e,r):new kl(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ki(t,this.value)):t!==null&&kr(this.value)===kr(t)&&this.matchesComparison(ki(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Et=class n extends Ma{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Im(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Im(n){return n.op==="and"}function Em(n){return WI(n)&&Im(n)}function WI(n){for(let e of n.filters)if(e instanceof Et)return!1;return!0}function Cl(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+xi(n.value);if(Em(n))return n.filters.map(e=>Cl(e)).join(",");{let e=n.filters.map(t=>Cl(t)).join(",");return`${n.op}(${e})`}}function bm(n,e){return n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&$t(r.value,i.value)}(n,e):n instanceof Et?function(r,i){return i instanceof Et&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,h)=>o&&bm(a,i.filters[h]),!0):!1}(n,e):void H()}function Tm(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${xi(t.value)}`}(n):n instanceof Et?function(t){return t.op.toString()+" {"+t.getFilters().map(Tm).join(" ,")+"}"}(n):"Filter"}var Pl=class extends Re{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},Rl=class extends Re{constructor(e,t){super(e,"in",t),this.keys=Am("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},kl=class extends Re{constructor(e,t){super(e,"not-in",t),this.keys=Am("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Am(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var xl=class extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ed(t)&&$s(t.arrayValue,this.value)}},Dl=class extends Re{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&$s(this.value.arrayValue,t)}},Nl=class extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if($s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!$s(this.value.arrayValue,t)}},Ol=class extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ed(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$s(this.value.arrayValue,r))}};var Vl=class{constructor(e,t=null,r=[],i=[],o=null,a=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=h,this.ue=null}};function zp(n,e=null,t=[],r=[],i=null,o=null,a=null){return new Vl(n,e,t,r,i,o,a)}function td(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Cl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xi(r)).join(",")),e.ue=t}return e.ue}function nd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bm(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jp(n.startAt,e.startAt)&&jp(n.endAt,e.endAt)}function Ll(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hn=class{constructor(e,t=null,r=[],i=[],o=null,a="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function HI(n,e,t,r,i,o,a,h){return new Hn(n,e,t,r,i,o,a,h)}function rd(n){return new Hn(n)}function Gp(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Sm(n){return n.collectionGroup!==null}function Ls(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let h=new Ke(st.comparator);return a.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new xr(o,r))}),t.has(st.keyField().canonicalString())||e.ce.push(new xr(st.keyField(),r))}return e.ce}function Bt(n){let e=Q(n);return e.le||(e.le=KI(e,Ls(n))),e.le}function KI(n,e){if(n.limitType==="F")return zp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xr(i.field,o)});let t=n.endAt?new Di(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Di(n.startAt.position,n.startAt.inclusive):null;return zp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ml(n,e){let t=n.filters.concat([e]);return new Hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fa(n,e,t){return new Hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uc(n,e){return nd(Bt(n),Bt(e))&&n.limitType===e.limitType}function Cm(n){return`${td(Bt(n))}|lt:${n.limitType}`}function Ei(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Tm(i)).join(", ")}]`),cc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>xi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>xi(i)).join(",")),`Target(${r})`}(Bt(n))}; limitType=${n.limitType})`}function lc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ls(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,h,p){let m=$p(a,h,p);return a.inclusive?m<=0:m<0}(r.startAt,Ls(r),i)||r.endAt&&!function(a,h,p){let m=$p(a,h,p);return a.inclusive?m>=0:m>0}(r.endAt,Ls(r),i))}(n,e)}function QI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pm(n){return(e,t)=>{let r=!1;for(let i of Ls(n)){let o=JI(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function JI(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):function(o,a,h){let p=a.data.field(o),m=h.data.field(o);return p!==null&&m!==null?ki(p,m):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}var Kn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ym(this.inner)}size(){return this.innerSize}};var YI=new ve(G.comparator);function an(){return YI}var Rm=new ve(G.comparator);function Os(...n){let e=Rm;for(let t of n)e=e.insert(t.key,t);return e}function km(n){let e=Rm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Tr(){return Ms()}function xm(){return Ms()}function Ms(){return new Kn(n=>n.toString(),(n,e)=>n.isEqual(e))}var XI=new ve(G.comparator),ZI=new Ke(G.comparator);function ne(...n){let e=ZI;for(let t of n)e=e.add(t);return e}var e0=new Ke(oe);function t0(){return e0}function id(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bs(e)?"-0":e}}function Dm(n){return{integerValue:""+n}}function n0(n,e){return UI(e)?Dm(e):id(n,e)}var Ni=class{constructor(){this._=void 0}};function r0(n,e,t){return n instanceof Oi?function(i,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Xh(o)&&(o=Zh(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof Dr?Om(n,e):n instanceof Nr?Vm(n,e):function(i,o){let a=Nm(i,o),h=Wp(a)+Wp(i.Pe);return Sl(a)&&Sl(i.Pe)?Dm(h):id(i.serializer,h)}(n,e)}function i0(n,e,t){return n instanceof Dr?Om(n,e):n instanceof Nr?Vm(n,e):t}function Nm(n,e){return n instanceof Vi?function(r){return Sl(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Oi=class extends Ni{},Dr=class extends Ni{constructor(e){super(),this.elements=e}};function Om(n,e){let t=Lm(e);for(let r of n.elements)t.some(i=>$t(i,r))||t.push(r);return{arrayValue:{values:t}}}var Nr=class extends Ni{constructor(e){super(),this.elements=e}};function Vm(n,e){let t=Lm(e);for(let r of n.elements)t=t.filter(i=>!$t(i,r));return{arrayValue:{values:t}}}var Vi=class extends Ni{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Wp(n){return ge(n.integerValue||n.doubleValue)}function Lm(n){return ed(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function s0(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Dr&&i instanceof Dr||r instanceof Nr&&i instanceof Nr?Ri(r.elements,i.elements,$t):r instanceof Vi&&i instanceof Vi?$t(r.Pe,i.Pe):r instanceof Oi&&i instanceof Oi}(n.transform,e.transform)}var Fl=class{constructor(e,t){this.version=e,this.transformResults=t}},Cr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ka(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Li=class{};function Mm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ua(n.key,Cr.none()):new Or(n.key,n.data,Cr.none());{let t=n.data,r=vt.empty(),i=new Ke(st.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new cn(n.key,r,new Ft(i.toArray()),Cr.none())}}function o0(n,e,t){n instanceof Or?function(i,o,a){let h=i.value.clone(),p=Kp(i.fieldTransforms,o,a.transformResults);h.setAll(p),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):n instanceof cn?function(i,o,a){if(!ka(i.precondition,o))return void o.convertToUnknownDocument(a.version);let h=Kp(i.fieldTransforms,o,a.transformResults),p=o.data;p.setAll(Fm(i)),p.setAll(h),o.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Fs(n,e,t,r){return n instanceof Or?function(o,a,h,p){if(!ka(o.precondition,a))return h;let m=o.value.clone(),_=Qp(o.fieldTransforms,p,a);return m.setAll(_),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof cn?function(o,a,h,p){if(!ka(o.precondition,a))return h;let m=Qp(o.fieldTransforms,p,a),_=a.data;return _.setAll(Fm(o)),_.setAll(m),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,a,h){return ka(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):h}(n,e,t)}function a0(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Nm(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function Hp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ri(r,i,(o,a)=>s0(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Or=class extends Li{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cn=class extends Li{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Fm(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Kp(n,e,t){let r=new Map;fe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,h=e.data.field(o.field);r.set(o.field,i0(a,h,t[i]))}return r}function Qp(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,r0(o,a,e))}return r}var Ua=class extends Li{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ul=class extends Li{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&o0(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fs(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xm();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,h=this.applyToLocalView(a,o.mutatedFields);h=t.has(i.key)?null:h;let p=Mm(a,h);p!==null&&r.set(i.key,p),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ne())}isEqual(e){return this.batchId===e.batchId&&Ri(this.mutations,e.mutations,(t,r)=>Hp(t,r))&&Ri(this.baseMutations,e.baseMutations,(t,r)=>Hp(t,r))}},ql=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){fe(e.mutations.length===r.length);let i=function(){return XI}(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var $l=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jl=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ce,ie;function c0(n){switch(n){default:return H();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function Um(n){if(n===void 0)return sn("GRPC error has no .code"),N.UNKNOWN;switch(n){case Ce.OK:return N.OK;case Ce.CANCELLED:return N.CANCELLED;case Ce.UNKNOWN:return N.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return N.INTERNAL;case Ce.UNAVAILABLE:return N.UNAVAILABLE;case Ce.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ce.NOT_FOUND:return N.NOT_FOUND;case Ce.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ce.ABORTED:return N.ABORTED;case Ce.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ce.DATA_LOSS:return N.DATA_LOSS;default:return H()}}(ie=Ce||(Ce={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var Jp=null;function u0(){return new TextEncoder}var l0=new zn([4294967295,4294967295],0);function Yp(n){let e=u0().encode(n),t=new il;return t.update(e),new Uint8Array(t.digest())}function Xp(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zn([t,r],0),new zn([i,o],0)]}var zl=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ar(`Invalid padding: ${t}`);if(r<0)throw new Ar(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ar(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ar(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=zn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(zn.fromNumber(r)));return i.compare(l0)===1&&(i=new zn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Yp(e),[r,i]=Xp(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(h=>a.insert(h)),a}insert(e){if(this.Ie===0)return;let t=Yp(e),[r,i]=Xp(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ar=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ba=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,js.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new ve(oe),an(),ne())}},js=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ne(),ne(),ne())}};var Si=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},qa=class{constructor(e,t){this.targetId=e,this.me=t}},$a=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ja=class{constructor(){this.fe=0,this.ge=em(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),t=ne(),r=ne();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new js(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=em()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Gl=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=an(),this.qe=Zp(),this.Qe=new ve(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Ll(o))if(r===0){let a=new G(o.path);this.Ue(t,a,It.newNoDocument(a,J.min()))}else fe(r===1);else{let a=this.Ye(t);if(a!==r){let h=this.Ze(e),p=h?this.Xe(h,e,a):1;if(p!==0){this.je(t);let m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}Jp?.et(function(_,y,x,D,U){var j,O,K,Y,Z,le;let be={localCacheCount:_,existenceFilterCount:y.count,databaseId:x.database,projectId:x.projectId},se=y.unchangedNames;return se&&(be.bloomFilter={applied:U===0,hashCount:(j=se?.hashCount)!==null&&j!==void 0?j:0,bitmapLength:(Y=(K=(O=se?.bits)===null||O===void 0?void 0:O.bitmap)===null||K===void 0?void 0:K.length)!==null&&Y!==void 0?Y:0,padding:(le=(Z=se?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&le!==void 0?le:0,mightContain:C=>{var v;return(v=D?.mightContain(C))!==null&&v!==void 0&&v}}),be}(a,e.me,this.Le.tt(),h,p))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,h;try{a=Wn(r).toUint8Array()}catch(p){if(p instanceof Va)return Pi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new zl(a,i,o)}catch(p){return Pi(p instanceof Ar?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.Le.tt(),h=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let h=this.Je(a);if(h){if(o.current&&Ll(h.target)){let p=new G(h.target.path);this.ke.get(p)!==null||this.it(a,p)||this.Ue(a,p,It.newNoDocument(p,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let r=ne();this.qe.forEach((o,a)=>{let h=!0;a.forEachWhile(p=>{let m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let i=new Ba(e,t,this.Qe,this.ke,r);return this.ke=an(),this.qe=Zp(),this.Qe=new ve(oe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ja,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ke(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ja),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Zp(){return new ve(G.comparator)}function em(){return new ve(G.comparator)}var h0={asc:"ASCENDING",desc:"DESCENDING"},d0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f0={and:"AND",or:"OR"},Wl=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Hl(n,e){return n.useProto3Json||cc(e)?e:{value:e}}function za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bm(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p0(n,e){return za(n,e.toTimestamp())}function qt(n){return fe(!!n),J.fromTimestamp(function(t){let r=on(t);return new qe(r.seconds,r.nanos)}(n))}function sd(n,e){return Kl(n,e).canonicalString()}function Kl(n,e){let t=function(i){return new we(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qm(n){let e=we.fromString(n);return fe(Wm(e)),e}function Ql(n,e){return sd(n.databaseId,e.path)}function hl(n,e){let t=qm(e);if(t.get(1)!==n.databaseId.projectId)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(jm(t))}function $m(n,e){return sd(n.databaseId,e)}function m0(n){let e=qm(n);return e.length===4?we.emptyPath():jm(e)}function Jl(n){return new we(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jm(n){return fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function tm(n,e,t){return{name:Ql(n,e),fields:t.value.mapValue.fields}}function g0(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(fe(_===void 0||typeof _=="string"),Qe.fromBase64String(_||"")):(fe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Qe.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,h=a&&function(m){let _=m.code===void 0?N.UNKNOWN:Um(m.code);return new $(_,m.message||"")}(a);t=new $a(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hl(n,r.document.name),o=qt(r.document.updateTime),a=r.document.createTime?qt(r.document.createTime):J.min(),h=new vt({mapValue:{fields:r.document.fields}}),p=It.newFoundDocument(i,o,a,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new Si(m,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hl(n,r.document),o=r.readTime?qt(r.readTime):J.min(),a=It.newNoDocument(i,o),h=r.removedTargetIds||[];t=new Si([],h,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hl(n,r.document),o=r.removedTargetIds||[];t=new Si([],o,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new jl(i,o),h=r.targetId;t=new qa(h,a)}}return t}function y0(n,e){let t;if(e instanceof Or)t={update:tm(n,e.key,e.value)};else if(e instanceof Ua)t={delete:Ql(n,e.key)};else if(e instanceof cn)t={update:tm(n,e.key,e.data),updateMask:S0(e.fieldMask)};else{if(!(e instanceof Ul))return H();t={verify:Ql(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){let h=a.transform;if(h instanceof Oi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Dr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Nr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Vi)return{fieldPath:a.field.canonicalString(),increment:h.Pe};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:p0(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H()}(n,e.precondition)),t}function w0(n,e){return n&&n.length>0?(fe(e!==void 0),n.map(t=>function(i,o){let a=i.updateTime?qt(i.updateTime):qt(o);return a.isEqual(J.min())&&(a=qt(o)),new Fl(a,i.transformResults||[])}(t,e))):[]}function _0(n,e){return{documents:[$m(n,e.path)]}}function v0(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$m(n,i);let o=function(m){if(m.length!==0)return Gm(Et.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(m){if(m.length!==0)return m.map(_=>function(x){return{field:bi(x.field),direction:b0(x.dir)}}(_))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let h=Hl(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:i}}function I0(n){let e=m0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){fe(r===1);let _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=function(y){let x=zm(y);return x instanceof Et&&Em(x)?x.getFilters():[x]}(t.where));let a=[];t.orderBy&&(a=function(y){return y.map(x=>function(U){return new xr(Ti(U.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(x))}(t.orderBy));let h=null;t.limit&&(h=function(y){let x;return x=typeof y=="object"?y.value:y,cc(x)?null:x}(t.limit));let p=null;t.startAt&&(p=function(y){let x=!!y.before,D=y.values||[];return new Di(D,x)}(t.startAt));let m=null;return t.endAt&&(m=function(y){let x=!y.before,D=y.values||[];return new Di(D,x)}(t.endAt)),HI(e,i,a,o,h,"F",p,m)}function E0(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zm(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ti(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ti(t.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ti(t.unaryFilter.field);return Re.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Ti(t.unaryFilter.field);return Re.create(a,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return Re.create(Ti(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Et.create(t.compositeFilter.filters.map(r=>zm(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function b0(n){return h0[n]}function T0(n){return d0[n]}function A0(n){return f0[n]}function bi(n){return{fieldPath:n.canonicalString()}}function Ti(n){return st.fromServerFormat(n.fieldPath)}function Gm(n){return n instanceof Re?function(t){if(t.op==="=="){if(qp(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NAN"}};if(Bp(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qp(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NOT_NAN"}};if(Bp(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bi(t.field),op:T0(t.op),value:t.value}}}(n):n instanceof Et?function(t){let r=t.getFilters().map(i=>Gm(i));return r.length===1?r[0]:{compositeFilter:{op:A0(t.op),filters:r}}}(n):H()}function S0(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Wm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zs=class n{constructor(e,t,r,i,o=J.min(),a=J.min(),h=Qe.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Yl=class{constructor(e){this.ct=e}};function C0(n){let e=I0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fa(e,e.limit,"L"):e}var Ga=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ge(e.integerValue));else if("doubleValue"in e){let r=ge(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Bs(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=on(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Wn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?_m(e)?this.dt(t,Number.MAX_SAFE_INTEGER):wm(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let a="value",h=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ge(h)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),G.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ga.vt=new Ga;var Xl=class{constructor(){this.un=new Zl}addToCollectionParentIndex(e,t){return this.un.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Rr.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},Zl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ke(we.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(we.comparator)).toArray()}};var zT=new Uint8Array(0);var Mt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(41943040,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);var Gs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var eh=class{constructor(){this.changes=new Kn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var th=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fs(r.mutation,i,Ft.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ne()){let i=Tr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=Os();return o.forEach((h,p)=>{a=a.insert(h,p.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Tr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ne()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,h)=>{t.set(a,h)})})}computeViews(e,t,r,i){let o=an(),a=Ms(),h=function(){return Ms()}();return t.forEach((p,m)=>{let _=r.get(m.key);i.has(m.key)&&(_===void 0||_.mutation instanceof cn)?o=o.insert(m.key,m):_!==void 0?(a.set(m.key,_.mutation.getFieldMask()),Fs(_.mutation,m,_.mutation.getFieldMask(),qe.now())):a.set(m.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((m,_)=>a.set(m,_)),t.forEach((m,_)=>{var y;return h.set(m,new th(_,(y=a.get(m))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,t){let r=Ms(),i=new ve((a,h)=>a-h),o=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let h of a)h.keys().forEach(p=>{let m=t.get(p);if(m===null)return;let _=r.get(p)||Ft.empty();_=h.applyToLocalView(m,_),r.set(p,_);let y=(i.get(h.batchId)||ne()).add(p);i=i.insert(h.batchId,y)})}).next(()=>{let a=[],h=i.getReverseIterator();for(;h.hasNext();){let p=h.getNext(),m=p.key,_=p.value,y=xm();_.forEach(x=>{if(!o.has(x)){let D=Mm(t.get(x),r.get(x));D!==null&&y.set(x,D),o=o.add(x)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,y))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(Tr()),h=-1,p=o;return a.next(m=>L.forEach(m,(_,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(_)?L.resolve():this.remoteDocumentCache.getEntry(e,_).next(x=>{p=p.insert(_,x)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,p,m,ne())).next(_=>({batchId:h,changes:km(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=Os();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=Os();return this.indexManager.getCollectionParents(e,o).next(h=>L.forEach(h,p=>{let m=function(y,x){return new Hn(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(_=>{_.forEach((y,x)=>{a=a.insert(y,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((p,m)=>{let _=m.getKey();a.get(_)===null&&(a=a.insert(_,It.newInvalidDocument(_)))});let h=Os();return a.forEach((p,m)=>{let _=o.get(p);_!==void 0&&Fs(_.mutation,m,Ft.empty(),qe.now()),lc(t,m)&&(h=h.insert(p,m))}),h})}};var rh=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return L.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:qt(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:C0(i.bundledQuery),readTime:qt(i.readTime)}}(t)),L.resolve()}};var ih=class{constructor(){this.overlays=new ve(G.comparator),this.Ir=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Tr();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=Tr(),o=t.length+1,a=new G(t.child("")),h=this.overlays.getIteratorFrom(a);for(;h.hasNext();){let p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ve((m,_)=>m-_),a=this.overlays.getIterator();for(;a.hasNext();){let m=a.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=o.get(m.largestBatchId);_===null&&(_=Tr(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}let h=Tr(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=i)););return L.resolve(h)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new $l(t,r));let o=this.Ir.get(t);o===void 0&&(o=ne(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var sh=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Ws=class{constructor(){this.Tr=new Ke(Pe.Er),this.dr=new Ke(Pe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Pe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Pe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new G(new we([])),r=new Pe(t,e),i=new Pe(t,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new G(new we([])),r=new Pe(t,e),i=new Pe(t,e+1),o=ne();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Pe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return G.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||G.comparator(e.key,t.key)}};var oh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Pe.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Bl(o,t,r,i);this.mutationQueue.push(a);for(let h of i)this.br=this.br.add(new Pe(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,t){return L.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Pe(t,0),i=new Pe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{let h=this.Dr(a.wr);o.push(h)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ke(oe);return t.forEach(i=>{let o=new Pe(i,0),a=new Pe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],h=>{r=r.add(h.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let a=new Pe(new G(o),0),h=new Ke(oe);return this.br.forEachWhile(p=>{let m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(p.wr)),!0)},a),L.resolve(this.Cr(h))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){fe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(t.mutations,i=>{let o=new Pe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Pe(t,0),i=this.br.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ah=class{constructor(e){this.Mr=e,this.docs=function(){return new ve(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():It.newInvalidDocument(t))}getEntries(e,t){let r=an();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():It.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=an(),a=t.path,h=new G(a.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){let{key:m,value:{document:_}}=p.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||LI(VI(_),r)<=0||(i.has(_.key)||lc(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){H()}Or(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ch(this)}getSize(e){return L.resolve(this.size)}},ch=class extends eh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var uh=class{constructor(e){this.persistence=e,this.Nr=new Kn(t=>td(t),nd),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ws,this.targetCount=0,this.kr=Gs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),L.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Gs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Kn(t),L.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((a,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.Br.containsKey(t))}};var lh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new gm(0),this.Kr=!1,this.Kr=!0,this.$r=new sh,this.referenceDelegate=e(this),this.Ur=new uh(this),this.indexManager=new Xl,this.remoteDocumentCache=function(i){return new ah(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Yl(t),this.Gr=new rh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ih,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new oh(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new hh(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},hh=class extends bl{constructor(e){super(),this.currentSequenceNumber=e}},dh=class n{constructor(e){this.persistence=e,this.Jr=new Ws,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),L.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return L.or([()=>L.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var fh=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ne(),i=ne();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var ph=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ff()?8:FI(Ve())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new ph;return this.Xi(e,t,a).next(h=>{if(o.result=h,this.zi)return this.es(e,t,a,h.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ns()<=te.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Ei(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Ns()<=te.DEBUG&&z("QueryEngine","Query:",Ei(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ns()<=te.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Ei(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bt(t))):L.resolve())}Yi(e,t){if(Gp(t))return L.resolve(null);let r=Bt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fa(t,null,"F"),r=Bt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=ne(...o);return this.Ji.getDocuments(e,a).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{let m=this.ts(t,h);return this.ns(t,m,a,p.readTime)?this.Yi(e,Fa(t,null,"F")):this.rs(e,m,t,p)}))})))}Zi(e,t,r,i){return Gp(t)||i.isEqual(J.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let a=this.ts(t,o);return this.ns(t,a,r,i)?L.resolve(null):(Ns()<=te.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ei(t)),this.rs(e,a,t,OI(i,-1)).next(h=>h))})}ts(e,t){let r=new Ke(Pm(e));return t.forEach((i,o)=>{lc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ns()<=te.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Ei(t)),this.Ji.getDocumentsMatchingQuery(e,t,Rr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var gh=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ve(oe),this._s=new Kn(o=>td(o),nd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function P0(n,e,t,r){return new gh(n,e,t,r)}function Hm(n,e){return b(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],h=[],p=ne();for(let m of i){a.push(m.batchId);for(let _ of m.mutations)p=p.add(_.key)}for(let m of o){h.push(m.batchId);for(let _ of m.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(r,p).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:h}))})})})}function R0(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,p,m,_){let y=m.batch,x=y.keys(),D=L.resolve();return x.forEach(U=>{D=D.next(()=>_.getEntry(p,U)).next(j=>{let O=m.docVersions.get(U);fe(O!==null),j.version.compareTo(O)<0&&(y.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),_.addEntry(j)))})}),D.next(()=>h.mutationQueue.removeMutationBatch(p,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let p=ne();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Km(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function k0(n,e){let t=Q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let h=[];e.targetChanges.forEach((_,y)=>{let x=i.get(y);if(!x)return;h.push(t.Ur.removeMatchingKeys(o,_.removedDocuments,y).next(()=>t.Ur.addMatchingKeys(o,_.addedDocuments,y)));let D=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?D=D.withResumeToken(Qe.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,r)),i=i.insert(y,D),function(j,O,K){return j.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(x,D,_)&&h.push(t.Ur.updateTargetData(o,D))});let p=an(),m=ne();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(x0(o,a,e.documentUpdates).next(_=>{p=_.Ps,m=_.Is})),!r.isEqual(J.min())){let _=t.Ur.getLastRemoteSnapshotVersion(o).next(y=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(_)}return L.waitFor(h).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,m)).next(()=>p)}).then(o=>(t.os=i,o))}function x0(n,e,t){let r=ne(),i=ne();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=an();return t.forEach((h,p)=>{let m=o.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(J.min())?(e.removeEntry(h,p.readTime),a=a.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),a=a.insert(h,p)):z("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{Ps:a,Is:i}})}function D0(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function N0(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new zs(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function yh(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!eo(a))throw a;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function nm(n,e,t){let r=Q(n),i=J.min(),o=ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(p,m,_){let y=Q(p),x=y._s.get(_);return x!==void 0?L.resolve(y.os.get(x)):y.Ur.getTargetData(m,_)}(r,a,Bt(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,h.targetId).next(p=>{o=p})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:J.min(),t?o:ne())).next(h=>(O0(r,QI(e),h),{documents:h,Ts:o})))}function O0(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Wa=class{constructor(){this.activeTargetIds=t0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wh=class{constructor(){this.so=new Wa,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wa,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _h=class{_o(e){}shutdown(){}};var Ha=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pa=null;function dl(){return Pa===null?Pa=function(){return 268435456+Math.round(2147483648*Math.random())}():Pa++,"0x"+Pa.toString(16)}var V0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var vh=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var He="WebChannelConnection",Ih=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,a){let h=dl(),p=this.xo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${h}:`,p,i);let m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,a),this.No(t,p,m,i).then(_=>(z("RestConnection",`Received RPC '${t}' ${h}: `,_),_),_=>{throw Pi("RestConnection",`RPC '${t}' ${h} failed with error: `,_,"url: ",p,"request:",i),_})}Lo(t,r,i,o,a,h){return this.Mo(t,r,i,o,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bi}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>t[a]=o),i&&i.headers.forEach((o,a)=>t[a]=o)}xo(t,r){let i=V0[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=dl();return new Promise((a,h)=>{let p=new sl;p.setWithCredentials(!0),p.listenOnce(al.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ds.NO_ERROR:let _=p.getResponseJson();z(He,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),a(_);break;case Ds.TIMEOUT:z(He,`RPC '${e}' ${o} timed out`),h(new $(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ds.HTTP_ERROR:let y=p.getStatus();if(z(He,`RPC '${e}' ${o} failed with status:`,y,"response text:",p.getResponseText()),y>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);let D=x?.error;if(D&&D.status&&D.message){let U=function(O){let K=O.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(K)>=0?K:N.UNKNOWN}(D.status);h(new $(U,D.message))}else h(new $(N.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new $(N.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{z(He,`RPC '${e}' ${o} completed.`)}});let m=JSON.stringify(i);z(He,`RPC '${e}' ${o} sending request:`,i),p.send(t,"POST",m,r,15)})}Bo(e,t,r){let i=dl(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ll(),h=ul(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.xmlHttpFactory=new ol({})),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;let _=o.join("");z(He,`Creating RPC '${e}' stream ${i}: ${_}`,p);let y=a.createWebChannel(_,p),x=!1,D=!1,U=new vh({Io:O=>{D?z(He,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(x||(z(He,`Opening RPC '${e}' stream ${i} transport.`),y.open(),x=!0),z(He,`RPC '${e}' stream ${i} sending:`,O),y.send(O))},To:()=>y.close()}),j=(O,K,Y)=>{O.listen(K,Z=>{try{Y(Z)}catch(le){setTimeout(()=>{throw le},0)}})};return j(y,Ii.EventType.OPEN,()=>{D||(z(He,`RPC '${e}' stream ${i} transport opened.`),U.yo())}),j(y,Ii.EventType.CLOSE,()=>{D||(D=!0,z(He,`RPC '${e}' stream ${i} transport closed`),U.So())}),j(y,Ii.EventType.ERROR,O=>{D||(D=!0,Pi(He,`RPC '${e}' stream ${i} transport errored:`,O),U.So(new $(N.UNAVAILABLE,"The operation could not be completed")))}),j(y,Ii.EventType.MESSAGE,O=>{var K;if(!D){let Y=O.data[0];fe(!!Y);let Z=Y,le=Z.error||((K=Z[0])===null||K===void 0?void 0:K.error);if(le){z(He,`RPC '${e}' stream ${i} received error:`,le);let be=le.status,se=function(I){let T=Ce[I];if(T!==void 0)return Um(T)}(be),C=le.message;se===void 0&&(se=N.INTERNAL,C="Unknown error status: "+be+" with message "+le.message),D=!0,U.So(new $(se,C)),y.close()}else z(He,`RPC '${e}' stream ${i} received:`,Y),U.bo(Y)}}),j(h,cl.STAT_EVENT,O=>{O.stat===Sa.PROXY?z(He,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Sa.NOPROXY&&z(He,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{U.wo()},0),U}};function fl(){return typeof document<"u"?document:null}function hc(n){return new Wl(n,!0)}var Ka=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Qa=class{constructor(e,t,r,i,o,a,h,p){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ka(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new $(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Eh=class extends Qa{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=g0(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?qt(a.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Jl(this.serializer),t.addTarget=function(o,a){let h,p=a.target;if(h=Ll(p)?{documents:_0(o,p)}:{query:v0(o,p)._t},h.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){h.resumeToken=Bm(o,a.resumeToken);let m=Hl(o,a.expectedCount);m!==null&&(h.expectedCount=m)}else if(a.snapshotVersion.compareTo(J.min())>0){h.readTime=za(o,a.snapshotVersion.toTimestamp());let m=Hl(o,a.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);let r=E0(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Jl(this.serializer),t.removeTarget=e,this.a_(t)}},bh=class extends Qa{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=w0(e.writeResults,e.commitTime),r=qt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Jl(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>y0(this.serializer,r))};this.a_(t)}};var Th=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Kl(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection.Lo(e,Kl(t,r),i,a,h,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(N.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Ah=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sn(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Sh=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(()=>b(this,null,function*(){Vr(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(p){return b(this,null,function*(){let m=Q(p);m.L_.add(4),yield to(m),m.q_.set("Unknown"),m.L_.delete(4),yield dc(m)})}(this))}))}),this.q_=new Ah(r,i)}};function dc(n){return b(this,null,function*(){if(Vr(n))for(let e of n.B_)yield e(!0)})}function to(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Qm(n,e){let t=Q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ud(t)?cd(t):$i(t).r_()&&ad(t,e))}function od(n,e){let t=Q(n),r=$i(t);t.N_.delete(e),r.r_()&&Jm(t,e),t.N_.size===0&&(r.r_()?r.o_():Vr(t)&&t.q_.set("Unknown"))}function ad(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$i(n).A_(e)}function Jm(n,e){n.Q_.xe(e),$i(n).R_(e)}function cd(n){n.Q_=new Gl({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),$i(n).start(),n.q_.v_()}function ud(n){return Vr(n)&&!$i(n).n_()&&n.N_.size>0}function Vr(n){return Q(n).L_.size===0}function Ym(n){n.Q_=void 0}function L0(n){return b(this,null,function*(){n.q_.set("Online")})}function M0(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{ad(n,e)})})}function F0(n,e){return b(this,null,function*(){Ym(n),ud(n)?(n.q_.M_(e),cd(n)):n.q_.set("Unknown")})}function U0(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof $a&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let a=o.cause;for(let h of o.targetIds)i.N_.has(h)&&(yield i.remoteSyncer.rejectListen(h,a),i.N_.delete(h),i.Q_.removeTarget(h))})}(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ja(n,r)}else if(e instanceof Si?n.Q_.Ke(e):e instanceof qa?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield Km(n.localStore);t.compareTo(r)>=0&&(yield function(o,a){let h=o.Q_.rt(a);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){let _=o.N_.get(m);_&&o.N_.set(m,_.withResumeToken(p.resumeToken,a))}}),h.targetMismatches.forEach((p,m)=>{let _=o.N_.get(p);if(!_)return;o.N_.set(p,_.withResumeToken(Qe.EMPTY_BYTE_STRING,_.snapshotVersion)),Jm(o,p);let y=new zs(_.target,p,m,_.sequenceNumber);ad(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Ja(n,r)}})}function Ja(n,e,t){return b(this,null,function*(){if(!eo(e))throw e;n.L_.add(1),yield to(n),n.q_.set("Offline"),t||(t=()=>Km(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield dc(n)}))})}function Xm(n,e){return e().catch(t=>Ja(n,t,e))}function fc(n){return b(this,null,function*(){let e=Q(n),t=Qn(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;B0(e);)try{let i=yield D0(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,q0(e,i)}catch(i){yield Ja(e,i)}Zm(e)&&eg(e)})}function B0(n){return Vr(n)&&n.O_.length<10}function q0(n,e){n.O_.push(e);let t=Qn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Zm(n){return Vr(n)&&!Qn(n).n_()&&n.O_.length>0}function eg(n){Qn(n).start()}function $0(n){return b(this,null,function*(){Qn(n).p_()})}function j0(n){return b(this,null,function*(){let e=Qn(n);for(let t of n.O_)e.m_(t.mutations)})}function z0(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=ql.from(r,e,t);yield Xm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield fc(n)})}function G0(n,e){return b(this,null,function*(){e&&Qn(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(a){return c0(a)&&a!==N.ABORTED}(i.code)){let o=r.O_.shift();Qn(r).s_(),yield Xm(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield fc(r)}})}(n,e)),Zm(n)&&eg(n)})}function rm(n,e){return b(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let r=Vr(t);t.L_.add(3),yield to(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield dc(t)})}function W0(n,e){return b(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield dc(t)):e||(t.L_.add(2),yield to(t),t.q_.set("Unknown"))})}function $i(n){return n.K_||(n.K_=function(t,r,i){let o=Q(t);return o.w_(),new Eh(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:L0.bind(null,n),Ro:M0.bind(null,n),mo:F0.bind(null,n),d_:U0.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),ud(n)?cd(n):n.q_.set("Unknown")):(yield n.K_.stop(),Ym(n))}))),n.K_}function Qn(n){return n.U_||(n.U_=function(t,r,i){let o=Q(t);return o.w_(),new bh(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$0.bind(null,n),mo:G0.bind(null,n),f_:j0.bind(null,n),g_:z0.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield fc(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Ch=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,h=new n(e,t,a,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ld(n,e){if(sn("AsyncQueue",`${e}: ${n}`),eo(n))return new $(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Ya=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=Os(),this.sortedSet=new ve(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Xa=class{constructor(){this.W_=new ve(G.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Mi=class n{constructor(e,t,r,i,o,a,h,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(h=>{a.push({type:0,doc:h})}),new n(e,t,Ya.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ph=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Rh=class{constructor(){this.queries=im(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=im(),o.forEach((a,h)=>{for(let p of h.j_)p.onError(r)})})(this,new $(N.ABORTED,"Firestore shutting down"))}};function im(){return new Kn(n=>Cm(n),uc)}function H0(n,e){return b(this,null,function*(){let t=Q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Ph,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let h=ld(a,`Initialization of query '${Ei(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&hd(t)})}function K0(n,e){return b(this,null,function*(){let t=Q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Q0(n,e){let t=Q(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let h of a.j_)h.X_(i)&&(r=!0);a.z_=i}}r&&hd(t)}function J0(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function hd(n){n.Y_.forEach(e=>{e.next()})}var kh,sm;(sm=kh||(kh={})).ea="default",sm.Cache="cache";var xh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kh.Cache}};var Za=class{constructor(e){this.key=e}},ec=class{constructor(e){this.key=e}},Dh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=Pm(e),this.Ra=new Ya(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Xa,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=i,h=!1,p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,y)=>{let x=i.get(_),D=lc(this.query,y)?y:null,U=!!x&&this.mutatedKeys.has(x.key),j=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),O=!1;x&&D?x.data.isEqual(D.data)?U!==j&&(r.track({type:3,doc:D}),O=!0):this.ga(x,D)||(r.track({type:2,doc:D}),O=!0,(p&&this.Aa(D,p)>0||m&&this.Aa(D,m)<0)&&(h=!0)):!x&&D?(r.track({type:0,doc:D}),O=!0):x&&!D&&(r.track({type:1,doc:x}),O=!0,(p||m)&&(h=!0)),O&&(D?(a=a.add(D),o=j?o.add(_):o.delete(_)):(a=a.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{Ra:a,fa:r,ns:h,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((_,y)=>function(D,U){let j=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return j(D)-j(U)}(_.type,y.type)||this.Aa(_.doc,y.doc)),this.pa(r),i=i!=null&&i;let h=t&&!i?this.ya():[],p=this.da.size===0&&this.current&&!i?1:0,m=p!==this.Ea;return this.Ea=p,a.length!==0||m?{snapshot:new Mi(this.query,e.Ra,o,a,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xa,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ec(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Za(r))}),t}ba(e){this.Ta=e.Ts,this.da=ne();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Mi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Nh=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Oh=class{constructor(e){this.key=e,this.va=!1}},Vh=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Kn(h=>Cm(h),uc),this.Ma=new Map,this.xa=new Set,this.Oa=new ve(G.comparator),this.Na=new Map,this.La=new Ws,this.Ba={},this.ka=new Map,this.qa=Gs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Y0(n,e,t=!0){return b(this,null,function*(){let r=og(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield tg(r,e,t,!0),i})}function X0(n,e){return b(this,null,function*(){let t=og(n);yield tg(t,e,!0,!1)})}function tg(n,e,t,r){return b(this,null,function*(){let i=yield N0(n.localStore,Bt(e)),o=i.targetId,a=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",h;return r&&(h=yield Z0(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Qm(n.remoteStore,i),h})}function Z0(n,e,t,r,i){return b(this,null,function*(){n.Ka=(y,x,D)=>function(j,O,K,Y){return b(this,null,function*(){let Z=O.view.ma(K);Z.ns&&(Z=yield nm(j.localStore,O.query,!1).then(({documents:C})=>O.view.ma(C,Z)));let le=Y&&Y.targetChanges.get(O.targetId),be=Y&&Y.targetMismatches.get(O.targetId)!=null,se=O.view.applyChanges(Z,j.isPrimaryClient,le,be);return am(j,O.targetId,se.wa),se.snapshot})}(n,y,x,D);let o=yield nm(n.localStore,e,!0),a=new Dh(e,o.Ts),h=a.ma(o.documents),p=js.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=a.applyChanges(h,n.isPrimaryClient,p);am(n,t,m.wa);let _=new Nh(e,t,a);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot})}function eE(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!uc(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield yh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&od(r.remoteStore,i.targetId),Lh(r,i.targetId)}).catch(Zs))):(Lh(r,i.targetId),yield yh(r.localStore,i.targetId,!0))})}function tE(n,e){return b(this,null,function*(){let t=Q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),od(t.remoteStore,r.targetId))})}function nE(n,e,t){return b(this,null,function*(){let r=uE(n);try{let i=yield function(a,h){let p=Q(a),m=qe.now(),_=h.reduce((D,U)=>D.add(U.key),ne()),y,x;return p.persistence.runTransaction("Locally write mutations","readwrite",D=>{let U=an(),j=ne();return p.cs.getEntries(D,_).next(O=>{U=O,U.forEach((K,Y)=>{Y.isValidDocument()||(j=j.add(K))})}).next(()=>p.localDocuments.getOverlayedDocuments(D,U)).next(O=>{y=O;let K=[];for(let Y of h){let Z=a0(Y,y.get(Y.key).overlayedDocument);Z!=null&&K.push(new cn(Y.key,Z,vm(Z.value.mapValue),Cr.exists(!0)))}return p.mutationQueue.addMutationBatch(D,m,K,h)}).next(O=>{x=O;let K=O.applyToLocalDocumentSet(y,j);return p.documentOverlayCache.saveOverlays(D,O.batchId,K)})}).then(()=>({batchId:x.batchId,changes:km(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,h,p){let m=a.Ba[a.currentUser.toKey()];m||(m=new ve(oe)),m=m.insert(h,p),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,t),yield no(r,i.changes),yield fc(r.remoteStore)}catch(i){let o=ld(i,"Failed to persist write");t.reject(o)}})}function ng(n,e){return b(this,null,function*(){let t=Q(n);try{let r=yield k0(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Na.get(o);a&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?fe(a.va):i.removedDocuments.size>0&&(fe(a.va),a.va=!1))}),yield no(t,r,e)}catch(r){yield Zs(r)}})}function om(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,a)=>{let h=a.view.Z_(e);h.snapshot&&i.push(h.snapshot)}),function(a,h){let p=Q(a);p.onlineState=h;let m=!1;p.queries.forEach((_,y)=>{for(let x of y.j_)x.Z_(h)&&(m=!0)}),m&&hd(p)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rE(n,e,t){return b(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let a=new ve(G.comparator);a=a.insert(o,It.newNoDocument(o,J.min()));let h=ne().add(o),p=new Ba(J.min(),new Map,new ve(oe),a,h);yield ng(r,p),r.Oa=r.Oa.remove(o),r.Na.delete(e),dd(r)}else yield yh(r.localStore,e,!1).then(()=>Lh(r,e,t)).catch(Zs)})}function iE(n,e){return b(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield R0(t.localStore,e);ig(t,r,null),rg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield no(t,i)}catch(i){yield Zs(i)}})}function sE(n,e,t){return b(this,null,function*(){let r=Q(n);try{let i=yield function(a,h){let p=Q(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return p.mutationQueue.lookupMutationBatch(m,h).next(y=>(fe(y!==null),_=y.keys(),p.mutationQueue.removeMutationBatch(m,y))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>p.localDocuments.getDocuments(m,_))})}(r.localStore,e);ig(r,e,t),rg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield no(r,i)}catch(i){yield Zs(i)}})}function rg(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ig(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Lh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||sg(n,r)})}function sg(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(od(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),dd(n))}function am(n,e,t){for(let r of t)r instanceof Za?(n.La.addReference(r.key,e),oE(n,r)):r instanceof ec?(z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||sg(n,r.key)):H()}function oE(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(r),dd(n))}function dd(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new G(we.fromString(e)),r=n.qa.next();n.Na.set(r,new Oh(t)),n.Oa=n.Oa.insert(t,r),Qm(n.remoteStore,new zs(Bt(rd(t.path)),r,"TargetPurposeLimboResolution",gm.oe))}}function no(n,e,t){return b(this,null,function*(){let r=Q(n),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((h,p)=>{a.push(r.Ka(p,e,t).then(m=>{var _;if((m||t)&&r.isPrimaryClient){let y=m?!m.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(p.targetId,y?"current":"not-current")}if(m){i.push(m);let y=fh.Wi(p.targetId,m);o.push(y)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(p,m){return b(this,null,function*(){let _=Q(p);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>L.forEach(m,x=>L.forEach(x.$i,D=>_.persistence.referenceDelegate.addReference(y,x.targetId,D)).next(()=>L.forEach(x.Ui,D=>_.persistence.referenceDelegate.removeReference(y,x.targetId,D)))))}catch(y){if(!eo(y))throw y;z("LocalStore","Failed to update sequence numbers: "+y)}for(let y of m){let x=y.targetId;if(!y.fromCache){let D=_.os.get(x),U=D.snapshotVersion,j=D.withLastLimboFreeSnapshotVersion(U);_.os=_.os.insert(x,j)}}})}(r.localStore,o))})}function aE(n,e){return b(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let r=yield Hm(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(h=>{h.forEach(p=>{p.reject(new $(N.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield no(t,r.hs)}})}function cE(n,e){let t=Q(n),r=t.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne(),o=t.Ma.get(e);if(!o)return i;for(let a of o){let h=t.Fa.get(a);i=i.unionWith(h.view.Va)}return i}}function og(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ng.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rE.bind(null,e),e.Ca.d_=Q0.bind(null,e.eventManager),e.Ca.$a=J0.bind(null,e.eventManager),e}function uE(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sE.bind(null,e),e}var tc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=hc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return P0(this.persistence,new mh,e.initialUser,this.serializer)}createPersistence(e){return new lh(dh.Zr,this.serializer)}createSharedClientState(e){return new wh}terminate(){return b(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Mh=class{initialize(e,t){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>om(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aE.bind(null,this.syncEngine),yield W0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Rh}()}createDatastore(e){let t=hc(e.databaseInfo.databaseId),r=function(o){return new Ih(o)}(e.databaseInfo);return function(o,a,h,p){return new Th(o,a,h,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,a,h){return new Sh(r,i,o,a,h)}(this.localStore,this.datastore,e.asyncQueue,t=>om(this.syncEngine,t,0),function(){return Ha.D()?new Ha:new _h}())}createSyncEngine(e,t){return function(i,o,a,h,p,m,_){let y=new Vh(i,o,a,h,p,m);return _&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return b(this,null,function*(){var e,t;yield function(i){return b(this,null,function*(){let o=Q(i);z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield to(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Fh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Uh=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=Da.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>b(this,null,function*(){z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ld(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function pl(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield Hm(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function cm(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield hE(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rm(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>rm(e.remoteStore,i)),n._onlineComponents=e})}function lE(n){return n.name==="FirebaseError"?n.code===N.FAILED_PRECONDITION||n.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function hE(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!lE(t))throw t;Pi("Error using user provided cache. Falling back to memory cache: "+t),yield pl(n,new tc)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield pl(n,new tc);return n._offlineComponents})}function ag(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield cm(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield cm(n,new Mh))),n._onlineComponents})}function dE(n){return ag(n).then(e=>e.syncEngine)}function um(n){return b(this,null,function*(){let e=yield ag(n),t=e.eventManager;return t.onListen=Y0.bind(null,e.syncEngine),t.onUnlisten=eE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=X0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tE.bind(null,e.syncEngine),t})}function cg(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var lm=new Map;function ug(n,e,t){if(!t)throw new $(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fE(n,e,t,r){if(e===!0&&r===!0)throw new $(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hm(n){if(!G.isDocumentKey(n))throw new $(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dm(n){if(G.isDocumentKey(n))throw new $(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function Us(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pc(n);throw new $(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pE(n,e){if(e<=0)throw new $(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var nc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ml;switch(r.type){case"firstParty":return new _l(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=lm.get(t);r&&(z("ComponentProvider","Removing Datastore"),lm.delete(t),r.terminate())}(this),Promise.resolve()}};function lg(n,e,t,r={}){var i;let o=(n=Us(n,Fi))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Le.MOCK_USER;else{h=cf(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new $(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Le(m)}n._authCredentials=new gl(new xa(h,p))}}var Jn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ot=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Gn=class n extends Jn{constructor(e,t,r){super(e,t,rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function hg(n,e,...t){if(n=We(n),ug("collection","path",e),n instanceof Fi){let r=we.fromString(e,...t);return dm(r),new Gn(n,null,r)}{if(!(n instanceof ot||n instanceof Gn))throw new $(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return dm(r),new Gn(n.firestore,null,r)}}function dg(n,e,...t){if(n=We(n),arguments.length===1&&(e=Da.newId()),ug("doc","path",e),n instanceof Fi){let r=we.fromString(e,...t);return hm(r),new ot(n,null,new G(r))}{if(!(n instanceof ot||n instanceof Gn))throw new $(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return hm(r),new ot(n.firestore,n instanceof Gn?n.converter:null,new G(r))}}var Bh=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ka(this,"async_queue_retry"),this.Eu=()=>{let t=fl();t&&z("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=fl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=fl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new rn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return b(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!eo(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(a){let h=a.message||"";return a.stack&&(h=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),h}(r);throw sn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=Ch.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&H()}verifyOperationInProgress(){}mu(){return b(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function fm(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Ui=class extends Fi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Bh}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mg(this),this._firestoreClient.terminate()}};function fg(n,e){let t=typeof n=="object"?n:mi(),r=typeof n=="string"?n:e||"(default)",i=Is(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=af("firestore");o&&lg(i,...o)}return i}function pg(n){return n._firestoreClient||mg(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mg(n){var e,t,r;let i=n._freezeSettings(),o=function(h,p,m,_){return new Tl(h,p,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,cg(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Uh(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Hs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new $(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ks=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rc=class{constructor(e){this._methodName=e}};var Qs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var Js=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var mE=/^__.*__$/,qh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new cn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Or(e,this.data,t,this.fieldTransforms)}};function gg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var $h=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return ic(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(gg(this.wu)&&mE.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},jh=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hc(e)}Nu(e,t,r,i=!1){return new $h({wu:e,methodName:t,Ou:r,path:st.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yg(n){let e=n._freezeSettings(),t=hc(n._databaseId);return new jh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gE(n,e,t,r,i,o={}){let a=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);vg("Data must be an object, but it was:",a,r);let h=wg(r,a),p,m;if(o.merge)p=new Ft(a.fieldMask),m=a.fieldTransforms;else if(o.mergeFields){let _=[];for(let y of o.mergeFields){let x=wE(e,y,t);if(!a.contains(x))throw new $(N.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);vE(_,x)||_.push(x)}p=new Ft(_),m=a.fieldTransforms.filter(y=>p.covers(y.field))}else p=null,m=a.fieldTransforms;return new qh(new vt(h),p,m)}function yE(n,e,t,r=!1){return fd(t,n.Nu(r?4:3,e))}function fd(n,e){if(_g(n=We(n)))return vg("Unsupported field value:",e,n),wg(n,e);if(n instanceof rc)return function(r,i){if(!gg(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],a=0;for(let h of r){let p=fd(h,i.Fu(a));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:za(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:za(i.serializer,o)}}if(r instanceof Qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hs)return{bytesValue:Bm(i.serializer,r._byteString)};if(r instanceof ot){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Js)return function(a,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(p=>{if(typeof p!="number")throw h.Mu("VectorValues must only contain numeric values.");return id(h.serializer,p)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${pc(r)}`)}(n,e)}function wg(n,e){let t={};return ym(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(n,(r,i)=>{let o=fd(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _g(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof Qs||n instanceof Hs||n instanceof ot||n instanceof rc||n instanceof Js)}function vg(n,e,t){if(!_g(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=pc(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function wE(n,e,t){if((e=We(e))instanceof Ks)return e._internalPath;if(typeof e=="string")return Ig(n,e);throw ic("Field path arguments must be of type string or ",n,!1,void 0,t)}var _E=new RegExp("[~\\*/\\[\\]]");function Ig(n,e,t){if(e.search(_E)>=0)throw ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ks(...e.split("."))._internalPath}catch{throw ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ic(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||a)&&(p+=" (found",o&&(p+=` in field ${r}`),a&&(p+=` in document ${i}`),p+=")"),new $(N.INVALID_ARGUMENT,h+n+p)}function vE(n,e){return n.some(t=>t.isEqual(e))}var sc=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},zh=class extends sc{data(){return super.data()}};function pd(n,e){return typeof e=="string"?Ig(n,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}function IE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ys=class{},Xs=class extends Ys{};function Eg(n,e,...t){let r=[];e instanceof Ys&&r.push(e),r=r.concat(t),function(o){let a=o.filter(p=>p instanceof Wh).length,h=o.filter(p=>p instanceof Gh).length;if(a>1||a>0&&h>0)throw new $(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Gh=class n extends Xs{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ag(e._query,t),new Jn(e.firestore,e.converter,Ml(e._query,t))}_parse(e){let t=yg(e.firestore);return function(o,a,h,p,m,_,y){let x;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new $(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){mm(y,_);let D=[];for(let U of y)D.push(pm(p,o,U));x={arrayValue:{values:D}}}else x=pm(p,o,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||mm(y,_),x=yE(h,a,y,_==="in"||_==="not-in");return Re.create(m,_,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Wh=class n extends Ys{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Et.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let a=i,h=o.getFlattenedFilters();for(let p of h)Ag(a,p),a=Ml(a,p)}(e._query,t),new Jn(e.firestore,e.converter,Ml(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Hh=class n extends Xs{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,a){if(i.startAt!==null)throw new $(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xr(o,a)}(e._query,this._field,this._direction);return new Jn(e.firestore,e.converter,function(i,o){let a=i.explicitOrderBy.concat([o]);return new Hn(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function bg(n,e="asc"){let t=e,r=pd("orderBy",n);return Hh._create(r,t)}var Kh=class n extends Xs{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Jn(e.firestore,e.converter,Fa(e._query,this._limit,this._limitType))}};function Tg(n){return pE("limit",n),Kh._create("limit",n,"F")}function pm(n,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new $(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sm(e)&&t.indexOf("/")!==-1)throw new $(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(we.fromString(t));if(!G.isDocumentKey(r))throw new $(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Up(n,new G(r))}if(t instanceof ot)return Up(n,t._key);throw new $(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pc(t)}.`)}function mm(n,e){if(!Array.isArray(n)||n.length===0)throw new $(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ag(n,e){let t=function(i,o){for(let a of i)for(let h of a.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Qh=class{convertValue(e,t="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ge(a.doubleValue));return new Js(o)}convertGeoPoint(e){return new Qs(ge(e.latitude),ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Zh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qs(e));default:return null}}convertTimestamp(e){let t=on(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=we.fromString(e);fe(Wm(r));let i=new La(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||sn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function EE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Sr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},oc=class extends sc{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ci(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(pd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ci=class extends oc{data(e={}){return super.data(e)}},Jh=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ci(this._firestore,this._userDataWriter,r.key,r,new Sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(h=>{let p=new Ci(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Sr(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{let p=new Ci(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Sr(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),m=-1,_=-1;return h.type!==0&&(m=a.indexOf(h.doc.key),a=a.delete(h.doc.key)),h.type!==1&&(a=a.add(h.doc),_=a.indexOf(h.doc.key)),{type:bE(h.type),doc:p,oldIndex:m,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function bE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}var ac=class extends Qh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}};function Sg(n,e){let t=Us(n.firestore,Ui),r=dg(n),i=EE(n.converter,e);return TE(t,[gE(yg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}function md(n,...e){var t,r,i;n=We(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||fm(e[a])||(o=e[a],a++);let h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(fm(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let p,m,_;if(n instanceof ot)m=Us(n.firestore,Ui),_=rd(n._key.path),p={next:y=>{e[a]&&e[a](AE(m,n,y))},error:e[a+1],complete:e[a+2]};else{let y=Us(n,Jn);m=Us(y.firestore,Ui),_=y._query;let x=new ac(m);p={next:D=>{e[a]&&e[a](new Jh(m,x,y,D))},error:e[a+1],complete:e[a+2]},IE(n._query)}return function(x,D,U,j){let O=new Fh(j),K=new xh(D,O,U);return x.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return H0(yield um(x),K)})),()=>{O.za(),x.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return K0(yield um(x),K)}))}}(pg(m),_,h,p)}function TE(n,e){return function(r,i){let o=new rn;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return nE(yield dE(r),i,o)})),o.promise}(pg(n),e)}function AE(n,e,t){let r=t.docs.get(e._key),i=new ac(n);return new oc(n,i,e._key,r,new Sr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Bi=i})(Fn),Mn(new ut("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),h=new Ui(new yl(r.getProvider("auth-internal")),new Il(r.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new $(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(m.options.projectId,_)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),xe(Vp,"4.7.1",e),xe(Vp,"4.7.1","esm2017")})();var mc=function(){return mc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},mc.apply(this,arguments)};var PE={includeMetadataChanges:!1};function Cg(n,e){return e===void 0&&(e=PE),new ms(function(t){var r=md(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Pg(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:mc(mc({},r),(t={},t[e.idField]=n.id,t))}function Rg(n){return Cg(n,{includeMetadataChanges:!0}).pipe(Wc(function(e){return e.docs}))}function kg(n,e){return e===void 0&&(e={}),Rg(n).pipe(Wc(function(t){return t.map(function(r){return Pg(r,e)})}))}var bt=class{constructor(e){return e}},xg="firestore",gd=class{constructor(){return Es(xg)}};var yd=new ii("angularfire2.firestore-instances");function RE(n,e){let t=sa(xg,n,e);return t&&new bt(t)}function kE(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bt(r)}}var xE={provide:gd,deps:[[new at,yd]]},DE={provide:bt,useFactory:RE,deps:[[new at,yd],Yt]};function Dg(n,...e){return xe("angularfire",wr.full,"fst"),si([DE,xE,{provide:yd,useFactory:kE(n),multi:!0,deps:[kn,ci,wi,_r,[new at,xs],[new at,yi],...e]}])}var Ng=Ze(kg,!0);var ji=Ze(Sg,!0);var Lr=Ze(hg,!0);var Og=Ze(fg,!0);var Vg=Ze(Tg,!0);var Lg=Ze(bg,!0);var Mg=Ze(Eg,!0);var Id=xd(vd());var lt=class n{usuarioLogueadoSource=new Dd(null);usuarioLogueado$=this.usuarioLogueadoSource.asObservable();constructor(){}setUsuarioLogueado(e){this.usuarioLogueadoSource.next(e)}logout(){this.usuarioLogueadoSource.next(null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=zo({token:n,factory:n.\u0275fac,providedIn:"root"})};function VE(n,e){n&1&&(V(0,"span"),q(1,"\u{1F441}\uFE0F"),F())}function LE(n,e){n&1&&(V(0,"span"),q(1,"\u{1F648}"),F())}var gc=class n{constructor(e,t,r,i){this.auth=e;this.router=t;this.firestore=r;this.authService=i}nuevoUsername="";nuevaPass="";usuarioLogeado="";mensajeError="";mostrarContrasenia=!1;registrarUsuario(){Rp(this.auth,this.nuevoUsername,this.nuevaPass).then(e=>{this.mensajeError="",e.user.email!==null&&(this.usuarioLogeado=e.user.email,Id.default.fire({toast:!0,position:"top-end",icon:"success",title:"Bienvenido",text:`\xA1Hola ${this.usuarioLogeado}!`,showConfirmButton:!1,timer:2e3,background:"#333",color:"#fff",iconColor:"##28a745",customClass:{popup:"colored-toast"}})),this.authService.setUsuarioLogueado(e.user.email);let t=Lr(this.firestore,"logins"),r={fecha:new Date,user:e.user.email};ji(t,r),setTimeout(()=>{this.router.navigate(["/home"])},1500)}).catch(e=>{switch(e.code){case"auth/invalid-email":this.mensajeError="Email invalido";break;case"auth/email-already-in-use":this.mensajeError="Email ya en uso";break;case"auth/missing-password":this.mensajeError="Falta la contrase\xF1a";break;case"auth/weak-password":this.mensajeError="La contrase\xF1a es debil";break;default:this.mensajeError=e.code;break}Id.default.fire({toast:!0,position:"top-end",icon:"error",title:"Error",text:this.mensajeError,showConfirmButton:!1,timer:3e3,background:"#333",color:"#fff",iconColor:"#ff5f6d",customClass:{popup:"colored-toast"}})})}toggleMostrarContrasenia(){this.mostrarContrasenia=!this.mostrarContrasenia}static \u0275fac=function(t){return new(t||n)(Be(tn),Be(Ko),Be(bt),Be(lt))};static \u0275cmp=Ye({type:n,selectors:[["app-registro"]],standalone:!0,features:[Xe],decls:25,vars:5,consts:[[1,"banner"],[1,"main-ingresar"],[1,"registro-principal"],[1,"registro"],["id","registro-form"],["for","username"],["type","text","id","username","name","username","required","",3,"ngModelChange","ngModel"],["for","password"],[1,"password-container"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel","type"],[1,"eye-icon",3,"click"],[4,"ngIf"],["type","submit",1,"btn","btn-danger",3,"click"],[1,"imagen-ingresar"],["src","assets/img/terminator.jpg","alt","terminator login"]],template:function(t,r){t&1&&(V(0,"section")(1,"div",0)(2,"h2"),q(3,"REGISTRO"),F()()(),V(4,"section")(5,"div",1)(6,"div",2)(7,"div",3)(8,"h3"),q(9,"Registra tu nueva cuenta"),F(),V(10,"form",4)(11,"label",5),q(12,"USUARIO (Direcci\xF3n de email)"),F(),V(13,"input",6),Nn("ngModelChange",function(o){return Dn(r.nuevoUsername,o)||(r.nuevoUsername=o),o}),F(),V(14,"label",7),q(15,"CONTRASE\xD1A (Debe contener al menos 6 caracteres)"),F(),V(16,"div",8)(17,"input",9),Nn("ngModelChange",function(o){return Dn(r.nuevaPass,o)||(r.nuevaPass=o),o}),F(),V(18,"i",10),ct("click",function(){return r.toggleMostrarContrasenia()}),Nt(19,VE,2,0,"span",11)(20,LE,2,0,"span",11),F()(),V(21,"button",12),ct("click",function(){return r.registrarUsuario()}),q(22,"REGISTRAR"),F()()()(),V(23,"div",13),ue(24,"img",14),F()()()),t&2&&(Ee(13),xn("ngModel",r.nuevoUsername),Ee(4),xn("ngModel",r.nuevaPass),fr("type",r.mostrarContrasenia?"text":"password"),Ee(2),fr("ngIf",r.mostrarContrasenia),Ee(),fr("ngIf",!r.mostrarContrasenia))},dependencies:[On,Yo,li,hi,Qo,Xo,di,Jo,Ho,Wo],styles:[".main-ingresar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.registro-principal[_ngcontent-%COMP%]{flex:65%;display:flex;flex-direction:column;padding:30px;margin-left:40px}.registro[_ngcontent-%COMP%]{display:flex;flex-direction:column}.registro[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .registro[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%}.registro[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:15px}.registro[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:ubuntu;color:#fff}.registro[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;width:40%}.imagen-ingresar[_ngcontent-%COMP%]{flex:35%;display:flex;justify-content:center;align-items:center}.imagen-ingresar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.password-container[_ngcontent-%COMP%]{position:relative;width:40%}.eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer}"]})};function ME(n,e){n&1&&(V(0,"div",6)(1,"div",7)(2,"div",8),ue(3,"img",9),V(4,"div",10)(5,"h5",11),q(6,"AHORCADO"),F()()()(),V(7,"div",7)(8,"div",12),ue(9,"img",13),V(10,"div",10)(11,"h5",11),q(12,"MAYOR O MENOR"),F()()()(),V(13,"div",7)(14,"div",14),ue(15,"img",15),V(16,"div",10)(17,"h5",11),q(18,"PREGUNTADOS"),F()()()(),V(19,"div",7)(20,"div",16),ue(21,"img",17),V(22,"div",10)(23,"h5",11),q(24,"NAME THE METALLICA SONG"),F()()()()())}function FE(n,e){n&1&&(V(0,"div",6)(1,"div",7)(2,"div",18),ue(3,"img",19),V(4,"div",10)(5,"h5",11),q(6,"AHORCADO"),F()()()(),V(7,"div",7)(8,"div",18),ue(9,"img",19),V(10,"div",10)(11,"h5",11),q(12,"MAYOR O MENOR"),F()()()(),V(13,"div",7)(14,"div",18),ue(15,"img",19),V(16,"div",10)(17,"h5",11),q(18,"PREGUNTADOS"),F()()()(),V(19,"div",7)(20,"div",18),ue(21,"img",19),V(22,"div",10)(23,"h5",11),q(24,"NAME THE METALLICA SONG"),F()()()()())}var yc=class n{constructor(e){this.authService=e}usuarioLogueadoGeneral=null;ngOnInit(){this.authService.usuarioLogueado$.subscribe(e=>{this.usuarioLogueadoGeneral=e})}static \u0275fac=function(t){return new(t||n)(Be(lt))};static \u0275cmp=Ye({type:n,selectors:[["app-home-component"]],standalone:!0,features:[Xe],decls:24,vars:1,consts:[[1,"container-principal-home"],[1,"container-mayor-izquierda"],["src","assets/img/joystick2.png","alt","home gaming fever"],[1,"container-menor-derecha"],["routerLink","/quien-soy",1,"btn","btn-danger","mt-4"],[1,"banner"],[1,"grid-inicio","row","gy-3","mt-3","mb-3"],[1,"col-md-3"],["routerLink","/juegos/ahorcado",1,"card"],["src","assets/img/ahorcado.png",1,"card-img-top"],[1,"card-body","cuerpo-card"],[1,"card-title","text-center"],["routerLink","/juegos/mayor-o-menor",1,"card"],["src","assets/img/mayor-menor.png",1,"card-img-top"],["routerLink","/juegos/preguntados",1,"card"],["src","assets/img/preguntados.png",1,"card-img-top"],["routerLink","/juegos/name-the-song",1,"card"],["src","assets/img/name-song.png",1,"card-img-top"],[1,"card"],["src","assets/img/login.jpg",1,"card-img-top"]],template:function(t,r){t&1&&(V(0,"section")(1,"div",0)(2,"div",1),ue(3,"img",2),F(),V(4,"div",3)(5,"h3"),q(6,"Bienvenidos a "),ue(7,"br"),q(8," Gaming Fever!"),F(),V(9,"p"),q(10," Esta pagina se dise\xF1\xF3 para el trabajo practico correspondiente a la materia Laboratorio IV de la Universidad Tecnol\xF3gica Nacional de Argentina (UTN). "),F(),V(11,"p"),q(12," En este sitio web podr\xE1s encontrar los 4 juegos que program\xE9. Te invito a scrollear en esta pagina para poder encontrar los mismos. "),F(),V(13,"p"),q(14," Espero te diviertas jugando con los juegos que cree usando Angular! "),F(),V(15,"button",4),q(16,"CONOCEME"),F()()()(),V(17,"section")(18,"div",5)(19,"h2"),q(20,"JUEGOS"),F()()(),V(21,"section"),Nt(22,ME,25,0,"div",6)(23,FE,25,0,"div",6),F()),t&2&&(Ee(22),pr(r.usuarioLogueadoGeneral?22:23))},dependencies:[ui,On],styles:['.container-principal-home[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container-mayor-izquierda[_ngcontent-%COMP%]{flex:60%;display:flex}.container-mayor-izquierda[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.container-menor-derecha[_ngcontent-%COMP%]{flex:40%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10px 20px;text-align:center}.container-menor-derecha[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;margin-top:30px;margin-bottom:30px}.cuerpo-card[_ngcontent-%COMP%], .cuerpo-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-image:url("./media/card-bg-HME2GQNT.jpg");color:#fff;font-family:ubuntu;text-decoration:none}.card[_ngcontent-%COMP%]{transition:transform .3s ease;cursor:pointer}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}']})};var Ed=xd(vd());var wc=class n{constructor(e,t,r,i){this.auth=e;this.router=t;this.firestore=r;this.authService=i}usernameLogin="";passLogin="";usuarioLogeado="";mensajeError="";onEnviarUserLogueado=new Md;autocompletar(){this.usernameLogin="marianaquino@hotmail.com",this.passLogin="124Fasfdh!"}login(){xp(this.auth,this.usernameLogin,this.passLogin).then(e=>{this.mensajeError="",e.user.email!==null&&(this.usuarioLogeado=e.user.email,Ed.default.fire({toast:!0,position:"top-end",icon:"success",title:"Bienvenido",text:`\xA1Hola ${this.usuarioLogeado}!`,showConfirmButton:!1,timer:2e3,background:"#333",color:"#fff",iconColor:"##28a745",customClass:{popup:"colored-toast"}})),this.authService.setUsuarioLogueado(e.user.email);let t=Lr(this.firestore,"logins"),r={fecha:new Date,user:e.user.email};ji(t,r),setTimeout(()=>{this.router.navigate(["/home"])},1500)}).catch(e=>{switch(e.code){case"auth/invalid-email":this.mensajeError="Email inv\xE1lido";break;case"auth/invalid-credential":this.mensajeError="Credenciales incorrectas";break;case"auth/network-request-failed":this.mensajeError="Error de red. Intenta nuevamente.";break;default:this.mensajeError="Error desconocido: "+e.message;break}Ed.default.fire({toast:!0,position:"top-end",icon:"error",title:"Error",text:this.mensajeError,showConfirmButton:!1,timer:3e3,background:"#333",color:"#fff",iconColor:"#ff5f6d",customClass:{popup:"colored-toast"}})})}static \u0275fac=function(t){return new(t||n)(Be(tn),Be(Ko),Be(bt),Be(lt))};static \u0275cmp=Ye({type:n,selectors:[["app-login-component"]],outputs:{onEnviarUserLogueado:"onEnviarUserLogueado"},standalone:!0,features:[Xe],decls:29,vars:2,consts:[[1,"banner"],[1,"main-ingresar"],[1,"login-principal"],[1,"login"],["id","login-form"],["for","username"],["type","text","id","username","name","username","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],[1,"button-group"],["type","submit",1,"btn","btn-danger",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"registro"],["routerLink","/registro",1,"btn","btn-danger","mt-3"],[1,"imagen-ingresar"],["src","assets/img/terminator.jpg","alt","terminator login"]],template:function(t,r){t&1&&(V(0,"section")(1,"div",0)(2,"h2"),q(3,"INGRESAR"),F()()(),V(4,"section")(5,"div",1)(6,"div",2)(7,"div",3)(8,"h3"),q(9,"Ingresa a tu cuenta"),F(),V(10,"form",4)(11,"label",5),q(12,"USUARIO"),F(),V(13,"input",6),Nn("ngModelChange",function(o){return Dn(r.usernameLogin,o)||(r.usernameLogin=o),o}),F(),V(14,"label",7),q(15,"CONTRASE\xD1A"),F(),V(16,"input",8),Nn("ngModelChange",function(o){return Dn(r.passLogin,o)||(r.passLogin=o),o}),F(),V(17,"div",9)(18,"button",10),ct("click",function(){return r.login()}),q(19,"INGRESAR"),F(),V(20,"button",11),ct("click",function(){return r.autocompletar()}),q(21,"AUTOCOMPLETAR"),F()()()(),V(22,"div",12)(23,"h3"),q(24,"No tenes cuenta?"),F(),V(25,"button",13),q(26,"REGISTRARSE"),F()()(),V(27,"div",14),ue(28,"img",15),F()()()),t&2&&(Ee(13),xn("ngModel",r.usernameLogin),Ee(3),xn("ngModel",r.passLogin))},dependencies:[ui,On,Yo,li,hi,Qo,Xo,di,Jo],styles:[".main-ingresar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.login-principal[_ngcontent-%COMP%]{flex:65%;display:flex;flex-direction:column;padding:30px;margin-left:40px}.login[_ngcontent-%COMP%], .registro[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%}.login[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.registro[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:30px}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:ubuntu;color:#fff}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;width:40%}.login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:red}.imagen-ingresar[_ngcontent-%COMP%]{flex:35%;display:flex;justify-content:center;align-items:center}.imagen-ingresar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.login[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between;width:100%;max-width:400px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48%;padding:10px;margin:0}"]})};var _c=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-quien-soy-component"]],standalone:!0,features:[Xe],decls:61,vars:0,consts:[[1,"banner"],[1,"acerca-de"],[1,"contenedor-izq-img"],["src","assets/img/perfil2.jpg"],[1,"contenedor-derecho-info"],[1,"fas","fa-gamepad"]],template:function(t,r){t&1&&(V(0,"section")(1,"div",0)(2,"h2"),q(3,"ACERCA DE"),F()()(),V(4,"section")(5,"div",1)(6,"div",2),ue(7,"img",3),F(),V(8,"div",4)(9,"h3"),q(10," Marian N Aquino S "),F(),V(11,"ul")(12,"li"),ue(13,"i",5),V(14,"p")(15,"b"),q(16,"Nombre Completo:"),F(),q(17," Mariano Nicolas Aquino"),F()(),V(18,"li"),ue(19,"i",5),V(20,"p")(21,"b"),q(22,"Numero de Legajo:"),F(),q(23," 114392"),F()(),V(24,"li"),ue(25,"i",5),V(26,"p")(27,"b"),q(28,"Edad:"),F(),q(29," 27 a\xF1os"),F()(),V(30,"li"),ue(31,"i",5),V(32,"p")(33,"b"),q(34,"Carrera:"),F(),q(35," Tecnicatura Universitaria en Programacion (UTN)"),F()(),V(36,"li"),ue(37,"i",5),V(38,"p")(39,"b"),q(40,"Materia:"),F(),q(41," Laboratorio IV"),F()(),V(42,"li"),ue(43,"i",5),V(44,"p")(45,"b"),q(46,"Tecnolog\xEDa utilizada:"),F(),q(47," Angular"),F()(),V(48,"li"),ue(49,"i",5),V(50,"p")(51,"b"),q(52,"Ubicacion:"),F(),q(53," Buenos Aires, Argentina"),F()()(),V(54,"h3"),q(55," NAME THE METALLICA SONG "),F(),V(56,"p"),q(57,` "Name the Metallica Song" es una experiencia interactiva que pone a prueba el conocimiento musical de los participantes sobre la banda de thrash metal 'Metallica'. En este juego, los jugadores deben adivinar el t\xEDtulo de una canci\xF3n de Metallica a partir de fragmentos de audio. A medida que avanza el juego, se presentan varias opciones de respuesta, lo que a\xF1ade un elemento de competencia y estrategia. `),ue(58,"br")(59,"br"),q(60," Los jugadores cuentan con un n\xFAmero limitado de vidas y un sistema de puntuaci\xF3n que recompensa las respuestas correctas, incentivando as\xED un mayor esfuerzo y atenci\xF3n. La din\xE1mica del juego tambi\xE9n incluye un temporizador, lo que aumenta la emoci\xF3n y el desaf\xEDo. Adem\xE1s, el juego ofrece una variedad de \xE1lbumes de Metallica, lo que permite a los jugadores explorar la discograf\xEDa de la banda y familiarizarse con sus temas m\xE1s conocidos y menos populares. Con una mezcla de m\xFAsica, trivia y competencia, el juego no solo entretiene, sino que tambi\xE9n educa a los participantes sobre la rica historia musical de Metallica, haci\xE9ndolo ideal tanto para los fan\xE1ticos de la banda como para aquellos que desean aprender m\xE1s sobre su legado. "),F()()()())},styles:[".acerca-de[_ngcontent-%COMP%]{display:flex;flex-direction:row}.contenedor-izq-img[_ngcontent-%COMP%]{flex:50%;display:flex}.contenedor-izq-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.contenedor-derecho-info[_ngcontent-%COMP%]{flex:50%;display:flex;flex-direction:column;padding:10px 20px}.contenedor-derecho-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:30px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;align-items:center;margin-bottom:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red;margin-right:10px}"]})};var vc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ye({type:n,selectors:[["app-page-not-found"]],standalone:!0,features:[Xe],decls:5,vars:0,consts:[[1,"not-found"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"h1"),q(2,"404"),F(),V(3,"p"),q(4,"Lo sentimos, la p\xE1gina que buscas no existe."),F()())},styles:[".not-found[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh;text-align:center;background-color:#000;padding:20px;box-shadow:0 0 20px #000c;border-radius:10px;margin:0 auto}h1[_ngcontent-%COMP%]{font-size:120px;color:#ff2e2e;margin:0}p[_ngcontent-%COMP%]{font-size:24px;color:#fff;margin:20px 0;font-family:Arial,sans-serif}"]})};var Ug=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:yc},{path:"login",component:wc},{path:"quien-soy",component:_c},{path:"registro",component:gc},{path:"juegos",loadChildren:()=>import("./chunk-4XNNP46L.js").then(n=>n.JuegosModule)},{path:"**",component:vc}];var Bg={providers:[Qd({eventCoalescing:!0}),tf(Ug),xf(()=>Df({projectId:"tp-labo-iv-marian-aquino",appId:"1:814389571342:web:fcc55f9f15bcfdcfb1f15f",storageBucket:"tp-labo-iv-marian-aquino.appspot.com",apiKey:"AIzaSyD7XRLaevOsCYqoW3WcRIZu6LJbxpYryHM",authDomain:"tp-labo-iv-marian-aquino.firebaseapp.com",messagingSenderId:"814389571342"})),Pp(()=>kp()),Dg(()=>Og()),Xd()]};var UE=["messageContainer"],BE=n=>({"chat-open":n});function qE(n,e){if(n&1&&(V(0,"span",10),q(1),Hc(2,"date"),F(),q(3)),n&2){let t=wt().$implicit;Ee(),gs("T\xFA (",Kc(2,2,t.fecha,"dd/MM/yyyy HH:mm:ss"),"):"),Ee(2),gs(" ",t.mensaje," ")}}function $E(n,e){if(n&1&&(q(0),Hc(1,"date")),n&2){let t=wt().$implicit;Gd(" ",t.user," (",Kc(1,3,t.fecha,"dd/MM/yyyy HH:mm:ss"),"): ",t.mensaje," ")}}function jE(n,e){if(n&1&&(V(0,"div"),Nt(1,qE,4,5)(2,$E,2,6),F()),n&2){let t=e.$implicit,r=wt(2);Ee(),pr(t.user==r.usuarioLogueado?1:2)}}function zE(n,e){if(n&1){let t=Go();V(0,"div",4)(1,"div",5,0),Bd(3,jE,3,1,"div",null,Ud),F(),V(5,"div",6)(6,"input",7),Nn("ngModelChange",function(i){oi(t);let o=wt();return Dn(o.message,i)||(o.message=i),ai(i)}),ct("keydown.enter",function(){oi(t);let i=wt();return ai(i.sendMessage())}),F(),V(7,"button",8),ct("click",function(){oi(t);let i=wt();return ai(i.sendMessage())}),V(8,"span",9),q(9,"\u2714"),F()()()()}if(n&2){let t=wt();Ee(3),qd(t.messages),Ee(3),xn("ngModel",t.message)}}var Ic=class n{constructor(e,t){this.firestore=e;this.authService=t}messageContainer;isChatOpen=!1;message="";usuarioLogueado=null;sub=null;messages=[];ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.messageContainer.nativeElement.scrollTop=this.messageContainer.nativeElement.scrollHeight}catch{}}toggleChat(){this.isChatOpen=!this.isChatOpen,this.isChatOpen&&this.scrollToBottom()}ngOnInit(){this.authService.usuarioLogueado$.subscribe(e=>{this.usuarioLogueado=e}),this.readMessages()}readMessages(){let e=Lr(this.firestore,"chat"),t=Mg(e,Lg("fecha","asc"),Vg(100)),r=Ng(t);this.sub=r.subscribe(i=>{this.messages=i.map(o=>jo($o({},o),{fecha:o.fecha instanceof Date?o.fecha:new Date(o.fecha.seconds*1e3)})),this.scrollToBottom()})}sendMessage(){if(this.message.trim()){let e=Lr(this.firestore,"chat"),t={fecha:new Date,mensaje:this.message,user:this.usuarioLogueado};ji(e,t).then(()=>{this.message="",setTimeout(()=>{this.scrollToBottom()},100)})}}static \u0275fac=function(t){return new(t||n)(Be(bt),Be(lt))};static \u0275cmp=Ye({type:n,selectors:[["app-chat"]],viewQuery:function(t,r){if(t&1&&$d(UE,5),t&2){let i;jd(i=zd())&&(r.messageContainer=i.first)}},standalone:!0,features:[Xe],decls:5,vars:4,consts:[["messageContainer",""],[1,"chat-container",3,"ngClass"],[1,"chat-header",3,"click"],["class","chat-body",4,"ngIf"],[1,"chat-body"],[1,"messages"],[1,"chat-input"],["type","text","placeholder","Escribe tu mensaje aqui","maxlength","100",3,"ngModelChange","keydown.enter","ngModel"],[1,"send-btn",3,"click"],[1,"send-icon"],[1,"highlight"]],template:function(t,r){t&1&&(V(0,"div",1)(1,"div",2),ct("click",function(){return r.toggleChat()}),V(2,"span"),q(3,"CHAT"),F()(),Nt(4,zE,10,1,"div",3),F()),t&2&&(fr("ngClass",Wd(2,BE,r.isChatOpen)),Ee(4),fr("ngIf",r.isChatOpen))},dependencies:[Ho,Jd,Wo,Yd,On,li,hi,nf,di],styles:[".chat-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:400px;background-color:#161515;border-radius:10px;color:#000;box-shadow:0 0 15px #0000004d;font-family:Arial,sans-serif;transition:height .3s ease;cursor:pointer;border:1px solid black}.chat-open[_ngcontent-%COMP%]{height:400px}.chat-header[_ngcontent-%COMP%]{background-color:red;padding:10px;border-radius:10px 10px 0 0;text-align:center;font-weight:700;color:#fff}.chat-header[_ngcontent-%COMP%]:hover{background-color:#a30b0b}.chat-body[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:space-between;height:calc(100% - 40px)}.messages[_ngcontent-%COMP%]{color:#fff;flex-grow:1;padding:10px;margin-bottom:10px;overflow-y:auto;cursor:auto}.messages[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;white-space:normal;max-width:100%;margin-bottom:5px}.highlight[_ngcontent-%COMP%], .user[_ngcontent-%COMP%]{color:red}.chat-input[_ngcontent-%COMP%]{display:flex;align-items:center;border-top:1px solid black}.chat-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:10px;border:1px solid black;border-right:none;border-radius:0 0 0 10px;font-size:14px}.send-btn[_ngcontent-%COMP%]{background-color:red;color:#fff;border:1px solid black;border-left:none;padding:7px;cursor:pointer;border-radius:0 0 10px;display:flex;align-items:center;justify-content:center}.send-btn[_ngcontent-%COMP%]:hover{background-color:#a30b0b}.send-icon[_ngcontent-%COMP%]{font-size:18px;font-weight:700}"]})};function GE(n,e){if(n&1){let t=Go();V(0,"li",6),q(1),F(),V(2,"li",7),ct("click",function(){oi(t);let i=wt();return ai(i.logout())}),q(3,"LOG OUT"),F()}if(n&2){let t=wt();Ee(),gs("USER: ",t.usuarioLogueadoGeneral,"")}}function WE(n,e){n&1&&(V(0,"li",5),q(1,"INGRESAR"),F())}function HE(n,e){n&1&&ue(0,"app-chat")}var Ec=class n{constructor(e){this.authService=e}title="tp-labo-iv";usuarioLogueadoGeneral=null;ngOnInit(){this.authService.usuarioLogueado$.subscribe(e=>{this.usuarioLogueadoGeneral=e})}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)(Be(lt))};static \u0275cmp=Ye({type:n,selectors:[["app-root"]],standalone:!0,features:[Xe],decls:16,vars:2,consts:[[1,"navbar"],[1,"navbar-izquierda"],["routerLink","home","alt","Logo",1,"logo"],[1,"nav-derecha"],["routerLink","quien-soy"],["routerLink","login"],[1,"username"],["routerLink","home",3,"click"]],template:function(t,r){t&1&&(V(0,"header")(1,"nav",0)(2,"div",1),ue(3,"img",2),F(),V(4,"ul",3)(5,"li",4),q(6,"ACERCA DE"),F(),Nt(7,GE,4,1)(8,WE,2,0,"li",5),F()()(),V(9,"main"),ue(10,"router-outlet"),Nt(11,HE,1,0,"app-chat"),F(),V(12,"footer")(13,"div")(14,"p"),q(15,"\xA9 2024 Gaming Fever"),F()()()),t&2&&(Ee(7),pr(r.usuarioLogueadoGeneral?7:8),Ee(4),pr(r.usuarioLogueadoGeneral?11:-1))},dependencies:[ef,ui,Ic],styles:['.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#000;background-image:url("./media/black-paper-Q4KM4EFX.png");padding:10px 20px}.navbar-izquierda[_ngcontent-%COMP%]{display:flex;align-items:center}.logo[_ngcontent-%COMP%]{height:70px;margin-right:15px;content:url("./media/logo-white2-E6LUDGO2.png");cursor:pointer}.logo[_ngcontent-%COMP%]:hover{content:url("./media/logo-red2-S5HODTNX.png")}.nav-derecha[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex}.nav-derecha[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:20px;text-decoration:none;color:#fff;font-size:1.05rem;font-family:ubuntu;transition:color .3s ease;cursor:pointer}.nav-derecha[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.username):hover{color:red}.nav-derecha[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.username){cursor:pointer}.username[_ngcontent-%COMP%]{color:#fff;cursor:default;pointer-events:none}footer[_ngcontent-%COMP%]{background-color:#000;background-image:url("./media/black-paper-Q4KM4EFX.png");text-align:center;height:70px;padding:20px;width:100%}.copyright[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.active-route[_ngcontent-%COMP%]{color:red}']})};Zd(Ec,Bg).catch(n=>console.error(n));
